(()=>{function m(t){return k(getComputedStyle(t).color)}function k(t){let e=t.indexOf(",")>-1?",":" ";t=t.substr(4).split(")")[0].split(e);for(let h in t){let d=t[h];d.indexOf("%")>-1&&(t[h]=Math.round(d.substr(0,d.length-1)/100*255))}let o=t[0]/255,n=t[1]/255,r=t[2]/255,g=Math.min(o,n,r),s=Math.max(o,n,r),i=s-g,a=0,u=0,c=0;return i==0?a=0:s==o?a=(n-r)/i%6:s==n?a=(r-o)/i+2:a=(o-n)/i+4,a=Math.round(a*60),a<0&&(a+=360),c=(s+g)/2,u=i==0?0:i/(1-Math.abs(2*c-1)),u=+(u*100).toFixed(1),c=+(c*100).toFixed(1),{h:a,s:u,l:c}}var l,L=[],p=null;async function C(t,e){let o=document.querySelector("[data-location-map]"),{Map:n}=await google.maps.importLibrary("maps");l=new n(o,{zoom:14,center:t,disableDefaultUI:!0,zoomControl:!0}),e(l)}function w(t){let e=new google.maps.Marker({map:l,position:new google.maps.LatLng(t),icon:M()});return L.push(e),e}function x(t=null){if(t===null)return;let e=new google.maps.LatLng(t);p?p.setPosition(e):p=q(e),console.log(e),l.panTo(e)}function v(t=null){if(t===null)return;let e=M(),o=I(),n=t.getPosition().lat(),r=t.getPosition().lng(),g=new google.maps.LatLng({lat:n,lng:r});L.forEach(s=>s.setIcon(e)),t.setIcon(o),l.panTo(g)}function I(t=50){let e=S();return{anchor:new google.maps.Point(t/2,t),url:`data:image/svg+xml;utf-8,      <svg width="${t}" height="${t}" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">        <path fill="hsl(${e.h},${e.s}%,${e.l}%)" d="M15.4936516,0 C9.21222402,0 5.94476278,5 6.00070647,10 C6.07764653,17.2779762 13.1207067,20 15.4936516,30 C17.8690441,20 25,17.1196429 25,10 C25,5 21.3136604,0 15.4971481,0"></path>        <path fill="hsl(${e.h},${e.s}%,${e.l-10}%)" d="M15.5,6.4 C17.4326394,6.4 19,7.96699298 19,9.9 C19,11.8326394 17.433007,13.4 15.5,13.4 C13.5673606,13.4 12,11.833007 12,9.9 C12,7.96736062 13.566993,6.4 15.5,6.4"></path>      </svg>`}}function M(t=40){let e=S();return{anchor:new google.maps.Point(t/2,t),url:`data:image/svg+xml;utf-8,      <svg width="${t}" height="${t}" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">        <path fill="hsl(${e.h},${e.s}%,${e.l+20}%)" d="M15.4936516,0 C9.21222402,0 5.94476278,5 6.00070647,10 C6.07764653,17.2779762 13.1207067,20 15.4936516,30 C17.8690441,20 25,17.1196429 25,10 C25,5 21.3136604,0 15.4971481,0"></path>        <path fill="hsl(${e.h},${e.s}%,${e.l+10}%)" d="M15.5,6.4 C17.4326394,6.4 19,7.96699298 19,9.9 C19,11.8326394 17.433007,13.4 15.5,13.4 C13.5673606,13.4 12,11.833007 12,9.9 C12,7.96736062 13.566993,6.4 15.5,6.4"></path>      </svg>`}}function q(t){return new google.maps.Marker({map:l,position:t,icon:{anchor:new google.maps.Point(15,15),url:'data:image/svg+xml;utf-8,       <svg width="30" height="30" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">         <path fill="hsla(217, 89%, 61%, 30%)" d="M15,0 C23.2827403,0 30,6.7156842 30,15 C30,23.2827403 23.2843157,30 15,30 C6.71725971,30 0,23.2843157 0,15 C0,6.7172598 6.71568429,0 15,0"></path>        <path fill="hsl(0,0%,100%)" d="M15,7 C19.4174615,7 23,10.5816982 23,15 C23,19.4174615 19.4183017,23 15,23 C10.5825385,23 7,19.4183017 7,15 C7,10.5825386 10.5816983,7 15,7"></path>        <path fill="hsl(217, 89%, 61%)" d="M15,9 C18.3130961,9 21,11.6862737 21,15 C21,18.3130961 18.3137263,21 15,21 C11.6869039,21 9,18.3137263 9,15 C9,11.6869039 11.6862737,9 15,9"></path>      </svg>'}})}function S(){let t=document.querySelector("[data-location-map]");return m(t)||{h:212,s:100,l:50}}function y(t){let e=B();if(e)return t(e);if(!navigator||!navigator.geolocation)return t();navigator.geolocation.getCurrentPosition(o=>{console.log(o);let n=H(o);A(n),t(n)},()=>{console.log("Geolocation failed"),t()})}function B(){return JSON.parse(window.sessionStorage.getItem("geolocation"))}function A(t){t!==null&&window.sessionStorage.setItem("geolocation",JSON.stringify(t))}function H(t){return{lat:t.coords.latitude,lng:t.coords.longitude}}function $(t,e=!1){let o=N(t);o?T(o,e):G(t,e)}function F(t){let e=N(t);e!==null&&e.classList.remove("is-active")}function N(t){return(t||document.querySelector("body")).querySelector("[data-loader]")}function T(t,e=!1){t.classList.contains("Loader")?t.classList.add("is-active"):e?t.classList.add("Loader","is-active","is-contextual"):t.classList.add("Loader","is-active")}function G(t,e=!1){let o=document.createElement("div"),n=O(),r=t||document.querySelector("body");o.setAttribute("data-loader",""),o.classList.add("Loader","is-active"),e&&o.classList.add("is-contextual"),r.prepend(o),o.append(n)}function O(){let t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg"),o=document.createElementNS(t,"circle");return e.setAttribute("viewBox","0 0 50 50"),e.classList.add("spinner"),o.setAttribute("cx","25"),o.setAttribute("cy","25"),o.setAttribute("r","20"),o.setAttribute("fill","none"),o.setAttribute("stroke-width","5"),o.classList.add("path"),e.appendChild(o),e}function E(t){let o=document.getElementById("SC-Header").offsetHeight;t.style.height=`calc(100vh - ${o}px)`}var f=document.querySelector("[data-location-record]"),P=R();E(f);$(f);y(t=>{C(P,()=>{let e=w(P);F(f),x(t),v(e)})});function R(){let t=document.querySelector("[data-location-map]"),e=t.dataset.lat,o=t.dataset.lng;return e&&o?{lat:parseFloat(e),lng:parseFloat(o)}:null}})();
