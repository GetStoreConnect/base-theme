{
  "version": 3,
  "sources": ["../../src/scripts/theme/utils/init.js", "../../src/scripts/packs/price-picker.js"],
  "sourcesContent": ["// This script establishes a MutationObserver to detect changes in the DOM and run callbacks when changes are detected.\n// It tries to be efficient about this by establishing only one obeserver and running all callbacks once on each new node.\n// There is a limitation of this mechanism: if a node contains a script that has not before been added to the dom,\n// and it calls onDomChange, its callback won't be run against anything until the next mutation.\n// To work around this, ensure the script is loaded in the initial page load or a previous fetch.\n\nwindow.StoreConnect = window.StoreConnect || {}\nwindow.StoreConnect.ObserverCallbacks = window.StoreConnect.ObserverCallbacks || []\n\ndocument.addEventListener('DOMContentLoaded', establishObserver)\n\nexport function onDomChange(initCallback) {\n  window.StoreConnect.ObserverCallbacks.push(initCallback)\n}\n\nfunction establishObserver() {\n  if (window.StoreConnect.Observer) return\n\n  window.StoreConnect.Observer = new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n      mutation.addedNodes.forEach((node) => {\n        if (node.nodeType === Node.ELEMENT_NODE) {\n          runCallbacks(node, 'mutation')\n        }\n      })\n    })\n  })\n\n  window.StoreConnect.Observer.observe(document.body, { childList: true, subtree: true })\n\n  runCallbacks(document, 'initial load')\n}\n\nfunction runCallbacks(node, _context) {\n  window.StoreConnect.ObserverCallbacks.forEach((callback) => callback(node))\n}\n", "import { onDomChange } from '../theme/utils/init'\n\nonDomChange(init)\n\nfunction init(node) {\n  ;[...node.querySelectorAll('[data-price-picker]')].forEach((picker) => {\n    const trigger = picker.querySelector('[data-price-picker-trigger]')\n    if (!trigger) return\n\n    trigger.addEventListener('click', () => open(picker))\n\n    buttons = [...picker.querySelectorAll('[data-price-picker-btn]')]\n\n    buttons.map((button) => {\n      button.addEventListener('click', (e) => {\n        set(e, picker)\n      })\n\n      if (button.hasAttribute('data-price-picker-btn-other')) {\n        button.addEventListener('click', (e) => {\n          manualEntry(picker)\n        })\n      }\n    })\n    document.addEventListener('click', (e) => {\n      closeIfClickElsewhere(e, picker)\n    })\n  })\n}\n\nfunction set(e, picker) {\n  const input = picker.querySelector('[data-price-picker-input]')\n\n  input.value = e.target.value\n  picker.querySelector('[data-price-picker-value]').innerText = e.target.innerText\n  if (input.value) input.dispatchEvent(new Event('change'))\n  close(picker)\n}\n\nfunction manualEntry(picker) {\n  const input = picker.querySelector('[data-price-picker-input]')\n\n  input.classList.add('is-active')\n  input.focus()\n  picker.querySelector('[data-price-picker-trigger]').classList.add('is-hidden')\n  close(picker)\n}\n\nfunction open(picker) {\n  closeOpenPickers()\n\n  const pickerList = picker.querySelector('[data-price-picker-list]')\n\n  pickerList.classList.add('is-active')\n  pickerList.setAttribute('aria-hidden', false)\n}\n\nfunction close(picker) {\n  const pickerList = picker.querySelector('[data-price-picker-list]')\n\n  pickerList.classList.remove('is-active')\n  pickerList.setAttribute('aria-hidden', true)\n}\n\nfunction closeIfClickElsewhere(e, picker) {\n  if (!picker.contains(e.target)) {\n    close(picker)\n  }\n}\n\nfunction closeOpenPickers() {\n  const pickerLists = document.querySelectorAll('[data-price-picker-list].is-active')\n\n  ;[...pickerLists].forEach((pickerList) => close(pickerList.closest('[data-price-picker]')))\n}\n"],
  "mappings": "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",
  "names": []
}
