{
  "version": 3,
  "sources": ["../../src/scripts/theme/utils/init.js", "../../src/scripts/packs/privacy.js"],
  "sourcesContent": ["// This script establishes a MutationObserver to detect changes in the DOM and run callbacks when changes are detected.\n// It tries to be efficient about this by establishing only one obeserver and running all callbacks once on each new node.\n// There is a limitation of this mechanism: if a node contains a script that has not before been added to the dom,\n// and it calls onDomChange, its callback won't be run against anything until the next mutation.\n// To work around this, ensure the script is loaded in the initial page load or a previous fetch.\n\nwindow.StoreConnect = window.StoreConnect || {}\nwindow.StoreConnect.ObserverCallbacks = window.StoreConnect.ObserverCallbacks || []\n\ndocument.addEventListener('DOMContentLoaded', establishObserver)\n\nexport function onDomChange(initCallback) {\n  window.StoreConnect.ObserverCallbacks.push(initCallback)\n}\n\nfunction establishObserver() {\n  if (window.StoreConnect.Observer) return\n\n  window.StoreConnect.Observer = new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n      mutation.addedNodes.forEach((node) => {\n        if (node.nodeType === Node.ELEMENT_NODE) {\n          runCallbacks(node, 'mutation')\n        }\n      })\n    })\n  })\n\n  window.StoreConnect.Observer.observe(document.body, { childList: true, subtree: true })\n\n  runCallbacks(document, 'initial load')\n}\n\nfunction runCallbacks(node, _context) {\n  window.StoreConnect.ObserverCallbacks.forEach((callback) => callback(node))\n}\n", "import { onDomChange } from '../theme/utils/init'\n\nwindow.StoreConnect = window.StoreConnect || {}\n\nwindow.StoreConnect.PrivacySettings = {\n  close: closePrivacySettings,\n  open: showPrivacySettings,\n}\n\nonDomChange(init)\n\nfunction init(node) {\n  const form = node.querySelector('[data-privacy-settings-form]')\n\n  if (form) {\n    const banner = node.querySelector('[data-privacy-settings-banner]')\n    const customTrigger = node.querySelector('.sc-show-privacy-settings')\n\n    if (banner) {\n      if (customTrigger) {\n        customTrigger.classList.add('sc-hide')\n      }\n      banner\n        .querySelector('[data-privacy-settings-form-open]')\n        .addEventListener('click', showPrivacySettings)\n    } else {\n      if (customTrigger) {\n        customTrigger.addEventListener('click', (e) => {\n          e.preventDefault()\n          showPrivacySettings()\n        })\n      }\n    }\n    ;[...form.querySelectorAll('[data-privacy-group-optional]')].forEach((group) => {\n      group\n        .querySelector('input[type=checkbox]')\n        .addEventListener('change', enableOrDisableAllCookies)\n    })\n    ;[...form.querySelectorAll('[data-cookie-optional]')].map((cookie) => {\n      cookie.querySelector('input[type=checkbox]').addEventListener('change', enableOrDisableCookie)\n    })\n\n    form\n      .querySelector('[data-privacy-settings-form-close]')\n      .addEventListener('click', closePrivacySettings)\n  }\n}\n\nfunction showPrivacySettings() {\n  document.querySelector('[data-privacy-settings-form]').classList.add('is-active')\n}\n\nfunction closePrivacySettings() {\n  document.querySelector('[data-privacy-settings-form]').classList.remove('is-active')\n}\n\nfunction enableOrDisableAllCookies(event) {\n  const groupId = event.target.id\n  const group = document.querySelector('[data-privacy-group=\"' + groupId + '\"]')\n  const cookies = group.querySelectorAll('[data-cookie-optional]')\n  const cookieLabels = group.querySelectorAll('[data-cookie-label]')\n  const label = group.querySelector('label[for=\"' + groupId + '\"]')\n\n  if (event.target.checked === true) {\n    event.target.checked = true\n    label.innerText = label.dataset.disableLabel\n    ;[...cookieLabels].map((label) => (label.innerText = label.dataset.enabledLabel))\n  } else {\n    event.target.checked = false\n    label.innerText = label.dataset.enableLabel\n    ;[...cookieLabels].map((label) => (label.innerText = label.dataset.disabledLabel))\n  }\n\n  ;[...cookies].map((cookie) => {\n    const input = cookie.querySelector('input[type=checkbox]')\n    input.checked = event.target.checked ? true : false\n  })\n}\n\nfunction enableOrDisableCookie(event) {\n  const groupId = event.target.dataset.group\n  const group = document.querySelector('[data-privacy-group=\"' + groupId + '\"]')\n  const cookie = event.target.closest('[data-cookie]')\n  const parentInput = group.querySelector('[data-privacy-group-optional] input[type=checkbox]')\n  const parentLabel = group.querySelector('label[for=\"' + groupId + '\"]')\n  const label = cookie.querySelector('[data-cookie-label]')\n\n  label.innerText = event.target.checked ? label.dataset.enabledLabel : label.dataset.disabledLabel\n  parentInput.checked = false\n  parentLabel.innerText = parentLabel.dataset.enableLabel\n}\n"],
  "mappings": "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",
  "names": ["label"]
}
