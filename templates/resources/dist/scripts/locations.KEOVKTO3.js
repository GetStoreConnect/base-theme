(()=>{function k(t){return z(getComputedStyle(t).color)}function z(t){let e=t.indexOf(",")>-1?",":" ";t=t.substr(4).split(")")[0].split(e);for(let M in t){let w=t[M];w.indexOf("%")>-1&&(t[M]=Math.round(w.substr(0,w.length-1)/100*255))}let o=t[0]/255,n=t[1]/255,a=t[2]/255,s=Math.min(o,n,a),i=Math.max(o,n,a),c=i-s,l=0,g=0,p=0;return c==0?l=0:i==o?l=(n-a)/c%6:i==n?l=(a-o)/c+2:l=(o-n)/c+4,l=Math.round(l*60),l<0&&(l+=360),p=(i+s)/2,g=c==0?0:c/(1-Math.abs(2*p-1)),g=+(g*100).toFixed(1),p=+(p*100).toFixed(1),{h:l,s:g,l:p}}var d,h=[],x=null;async function T(t,e){let o=document.querySelector("[data-location-map]"),{Map:n}=await google.maps.importLibrary("maps");d=new n(o,{zoom:14,center:t,disableDefaultUI:!0,zoomControl:!0}),e(d)}function $(t){let e=new google.maps.Marker({map:d,position:new google.maps.LatLng(t),icon:B()});return h.push(e),e}function I(t,e){google.maps.event.addListener(t,"click",()=>{e(t)})}function P(t=null){if(t===null)return;let e=new google.maps.LatLng(t);x?x.setPosition(e):x=et(e),console.log(e),d.panTo(e)}function L(t=null){if(t===null)return;let e=B(),o=tt(),n=t.getPosition().lat(),a=t.getPosition().lng(),s=new google.maps.LatLng({lat:n,lng:a});h.forEach(i=>i.setIcon(e)),t.setIcon(o),d.panTo(s)}function N(t){if(t.getNorthEast().equals(t.getSouthWest())){let e=new google.maps.LatLng(t.getNorthEast().lat()+.01,t.getNorthEast().lng()+.01),o=new google.maps.LatLng(t.getNorthEast().lat()-.01,t.getNorthEast().lng()-.01);t.extend(e),t.extend(o)}}function v(){h.forEach(t=>t.setMap(null)),h=[]}function tt(t=50){let e=G();return{anchor:new google.maps.Point(t/2,t),url:`data:image/svg+xml;utf-8,      <svg width="${t}" height="${t}" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">        <path fill="hsl(${e.h},${e.s}%,${e.l}%)" d="M15.4936516,0 C9.21222402,0 5.94476278,5 6.00070647,10 C6.07764653,17.2779762 13.1207067,20 15.4936516,30 C17.8690441,20 25,17.1196429 25,10 C25,5 21.3136604,0 15.4971481,0"></path>        <path fill="hsl(${e.h},${e.s}%,${e.l-10}%)" d="M15.5,6.4 C17.4326394,6.4 19,7.96699298 19,9.9 C19,11.8326394 17.433007,13.4 15.5,13.4 C13.5673606,13.4 12,11.833007 12,9.9 C12,7.96736062 13.566993,6.4 15.5,6.4"></path>      </svg>`}}function B(t=40){let e=G();return{anchor:new google.maps.Point(t/2,t),url:`data:image/svg+xml;utf-8,      <svg width="${t}" height="${t}" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">        <path fill="hsl(${e.h},${e.s}%,${e.l+20}%)" d="M15.4936516,0 C9.21222402,0 5.94476278,5 6.00070647,10 C6.07764653,17.2779762 13.1207067,20 15.4936516,30 C17.8690441,20 25,17.1196429 25,10 C25,5 21.3136604,0 15.4971481,0"></path>        <path fill="hsl(${e.h},${e.s}%,${e.l+10}%)" d="M15.5,6.4 C17.4326394,6.4 19,7.96699298 19,9.9 C19,11.8326394 17.433007,13.4 15.5,13.4 C13.5673606,13.4 12,11.833007 12,9.9 C12,7.96736062 13.566993,6.4 15.5,6.4"></path>      </svg>`}}function et(t){return new google.maps.Marker({map:d,position:t,icon:{anchor:new google.maps.Point(15,15),url:'data:image/svg+xml;utf-8,       <svg width="30" height="30" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">         <path fill="hsla(217, 89%, 61%, 30%)" d="M15,0 C23.2827403,0 30,6.7156842 30,15 C30,23.2827403 23.2843157,30 15,30 C6.71725971,30 0,23.2843157 0,15 C0,6.7172598 6.71568429,0 15,0"></path>        <path fill="hsl(0,0%,100%)" d="M15,7 C19.4174615,7 23,10.5816982 23,15 C23,19.4174615 19.4183017,23 15,23 C10.5825385,23 7,19.4183017 7,15 C7,10.5825386 10.5816983,7 15,7"></path>        <path fill="hsl(217, 89%, 61%)" d="M15,9 C18.3130961,9 21,11.6862737 21,15 C21,18.3130961 18.3137263,21 15,21 C11.6869039,21 9,18.3137263 9,15 C9,11.6869039 11.6862737,9 15,9"></path>      </svg>'}})}function G(){let t=document.querySelector("[data-location-map]");return k(t)||{h:212,s:100,l:50}}async function D(t,e){let o=await google.maps.importLibrary("maps"),n=await google.maps.importLibrary("places");new google.maps.Geocoder().geocode({address:"123 Test Address"},(a,s)=>{switch(s){case google.maps.GeocoderStatus.REQUEST_DENIED:e();break;default:t()}})}async function U(t,e){let o=await new google.maps.Geocoder().geocode({address:t});e({formattedAddress:o.results[0].formatted_address,latLng:{lat:o.results[0].geometry.location.lat(),lng:o.results[0].geometry.location.lng()}})}async function q(t=null,e){if(t===null)return;let o=await new google.maps.Geocoder().geocode({location:t}),n=ot(o);e(n)}function ot(t){if(!t)return;let e=t.results.find(o=>o.types.length==1&&o.types.includes("postal_code"));return e?e.formatted_address:null}function f(t,e=!1){let o=R(t);o?nt(o,e):rt(t,e)}function u(t){let e=R(t);e!==null&&e.classList.remove("is-active")}function R(t){return(t||document.querySelector("body")).querySelector("[data-loader]")}function nt(t,e=!1){t.classList.contains("Loader")?t.classList.add("is-active"):e?t.classList.add("Loader","is-active","is-contextual"):t.classList.add("Loader","is-active")}function rt(t,e=!1){let o=document.createElement("div"),n=at(),a=t||document.querySelector("body");o.setAttribute("data-loader",""),o.classList.add("Loader","is-active"),e&&o.classList.add("is-contextual"),a.prepend(o),o.append(n)}function at(){let t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg"),o=document.createElementNS(t,"circle");return e.setAttribute("viewBox","0 0 50 50"),e.classList.add("spinner"),o.setAttribute("cx","25"),o.setAttribute("cy","25"),o.setAttribute("r","20"),o.setAttribute("fill","none"),o.setAttribute("stroke-width","5"),o.classList.add("path"),e.appendChild(o),e}var J=new URLSearchParams(window.location.search),r=document.querySelector("[data-location-search-form]");function S(t){if(r!==null)return r.appendChild(t.content.cloneNode(!0)),r.querySelector("form")}async function X(t=null){let e=r.querySelector("input[name=address]"),o=J.get("address");ct(),_(t),o?(y(o),F()):q(t,n=>{y(n),F()}),r.querySelector("form").addEventListener("submit",()=>{f(r),v(),O()}),e.addEventListener("change",n=>{if(v(),O(),A(),n.target.value)f(r),U(n.target.value,({latLng:a,formattedAddress:s})=>{_(a),y(s),ut()}).catch(a=>{u(r),V()});else if(t){let a=r.querySelector("[data-use-geoloc]");a.classList.remove("sc-hide"),W(),dt(),q(t,s=>{a.addEventListener("click",()=>{a.classList.add("sc-hide"),y(s),submit()})})}else V()}),e.addEventListener("input",n=>{let a=n.target.value,s=n.target.getAttribute("searched-value");W(),r.querySelector("[data-use-geoloc]").classList.add("sc-hide"),a==s?F():A()})}function E(){let t=st(r.querySelectorAll("input[name=country]")),e=r.querySelector("[data-selector=country]");H(t),e.addEventListener("change",o=>{H(o.target.value)})}function st(t=[]){return J.get("country")||t.length===2?t[1].value:null}function H(t){let e=r.querySelectorAll("[data-selector=state]"),o=r.querySelector("[data-combined-state-selector]");e.forEach(n=>{lt(n),t===null?(n.style.display="none",o&&(o.style.display="block")):t===n.dataset.id?(n.style.display="block",o&&(o.style.display="none")):n.style.display="none"})}function O(){let t=document.querySelector("[data-location-search-summary]"),e=document.querySelectorAll("[data-location]");e.length!==0&&(t.innerText=t.dataset.default,e.forEach(o=>o.classList.add("sc-hide")))}function _(t=null){t!==null&&(r.querySelector("input[name=lat]").value=t.lat,r.querySelector("input[name=lng]").value=t.lng)}function y(t){r.querySelector("input[name=address]").value=t}function ct(){let t=it(),e=r.querySelector("input[name=distance_unit]"),o=r.querySelector("[data-distance-unit]");e.value=t,o.innerText=mt(t)}function it(){let t=Intl.DateTimeFormat().resolvedOptions().locale;return["en-US","en-GB"].includes(t)?"imp":"metric"}function lt(t){t.querySelectorAll("[data-dropdown-option]:checked").forEach(o=>o.checked=!1)}function dt(){r.querySelector("input[name=lat]").value="",r.querySelector("input[name=lng]").value="",r.querySelector("input[name=address]").value="",A()}function V(){r.querySelector("[data-location-error]").classList.remove("sc-hide"),r.querySelector("input[name=address]").classList.add("has-error")}function W(){r.querySelector("[data-location-error]").classList.add("sc-hide"),r.querySelector("input[name=address]").classList.remove("has-error")}function F(){r.querySelector("button[type=submit]").removeAttribute("disabled")}function A(){r.querySelector("button[type=submit]").setAttribute("disabled",!0)}function ut(){r.querySelector("form").submit()}function mt(t){let e=r.querySelector("form");switch(t){case"imp":return e.getAttribute("data-distance-unit-imperial");case"metric":return e.getAttribute("data-distance-unit-metric")}}function Y(t,e){let o=t.querySelector("[data-directions]"),n=o.getAttribute("href"),a=`&origin=${e.lat},${e.lng}`,s=`&destination=${t.dataset.lat},${t.dataset.lng}`;o.setAttribute("href",encodeURI(n+a+s))}function Z(t,e){t.querySelector("button").addEventListener("click",()=>{e()})}function C(t){gt().forEach(pt),ft(t),t.classList.add("sc-outline")}function pt(t){t.classList.remove("sc-outline")}function ft(t){let e=document.querySelector("[data-locations]"),o=window.getComputedStyle(e).getPropertyValue("padding-bottom"),n=t.offsetTop-parseInt(o,10),a=t.offsetLeft-parseInt(o,10);e.scrollTop=n,e.scrollLeft=a}function gt(){return document.querySelector("[data-locations]").querySelectorAll("[data-location]")}function Q(t){let o=document.getElementById("SC-Header").offsetHeight;t.style.height=`calc(100vh - ${o}px)`}function j(t){let e=ht();if(e)return t(e);if(!navigator||!navigator.geolocation)return t();navigator.geolocation.getCurrentPosition(o=>{console.log(o);let n=yt(o);Lt(n),t(n)},()=>{console.log("Geolocation failed"),t()})}function ht(){return JSON.parse(window.sessionStorage.getItem("geolocation"))}function Lt(t){t!==null&&window.sessionStorage.setItem("geolocation",JSON.stringify(t))}function yt(t){return{lat:t.coords.latitude,lng:t.coords.longitude}}var K={lat:-33.8523,lng:151.2108},m=document.querySelector("[data-location-search]"),b=m.querySelectorAll("[data-location]"),St=document.querySelector("[data-location-map]");f(m);Q(m);j(t=>{if(St===null)return S(document.querySelector("#sc-location-form-exact")),u(m),E();let e=wt()||t||K,o=t||K;T(e,n=>{let a=new google.maps.LatLngBounds;P(e),b.forEach(s=>{let i=Ct(s),c=$(i);a.extend(i),Y(s,o),N(a),b[0]===s&&(L(c),C(s)),Z(s,()=>{L(c),C(s)}),I(c,()=>{L(c),C(s)})}),b.length>0&&n.fitBounds(a)}),D(()=>{let n=document.querySelector("#sc-location-form-near");u(m),S(n),X(t)},()=>{let n=document.querySelector("#sc-location-form-exact");u(m),S(n),E()})});function Ct(t){let e=t.dataset.lat,o=t.dataset.lng;return e&&o?{lat:parseFloat(e),lng:parseFloat(o)}:null}function wt(){let t=new URLSearchParams(window.location.search),e=t.get("lat"),o=t.get("lng");return!e&&!o?null:{lat:parseFloat(e),lng:parseFloat(o)}}})();
