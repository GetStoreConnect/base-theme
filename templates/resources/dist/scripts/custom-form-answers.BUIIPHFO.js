(()=>{window.StoreConnect=window.StoreConnect||{};window.StoreConnect.ObserverCallbacks=window.StoreConnect.ObserverCallbacks||[];document.addEventListener("DOMContentLoaded",d);function f(t){window.StoreConnect.ObserverCallbacks.push(t)}function d(){window.StoreConnect.Observer||(window.StoreConnect.Observer=new MutationObserver(t=>{t.forEach(o=>{o.addedNodes.forEach(r=>{r.nodeType===Node.ELEMENT_NODE&&u(r,"mutation")})})}),window.StoreConnect.Observer.observe(document.body,{childList:!0,subtree:!0}),u(document,"initial load"))}function u(t,o){window.StoreConnect.ObserverCallbacks.forEach(r=>r(t))}function s(t){let o=document.querySelector('meta[name="sc-path"]');if(o){let r=o.content;if(r)return`/${r}${t}`}return t}f(w);function w(t){[...t.querySelectorAll("[data-custom-form-answer]")].forEach(o=>b(o))}function b(t){o(),r();function o(){t.addEventListener("click",function(e){let{target:n}=e;if(n.tagName==="A"&&n.hasAttribute("data-custom-form-answer-id")){e.preventDefault(),e.stopPropagation();let a=n.getAttribute("data-custom-form-answer-id");m(a)}})}function r(){t.addEventListener("submit",function(e){let{target:n}=e;t.querySelector('input[type="submit"]')&&(e.preventDefault(),e.stopPropagation(),i())}),t.addEventListener("change",function(e){let{target:n}=e;if(n.tagName==="SELECT"||n.getAttribute("type")==="checkbox"&&!t.querySelector('input[type="submit"]')){e.preventDefault(),e.stopPropagation();let a=t.querySelector("form"),c=new URLSearchParams(new FormData(a)),l=a.getAttribute("data-custom-form-answer-id");i()}}),t.addEventListener("keypress",function(e){let{target:n}=e;e.key==="Enter"&&n.tagName==="INPUT"&&(e.preventDefault(),e.stopPropagation(),i())})}function m(e){fetch(s(`/async/custom_form_answers/${e}`)).then(n=>n.text()).then(n=>{t.innerHTML=n})}function i(){let e=t.querySelector("form"),n=new URLSearchParams(new FormData(e)),a=e.getAttribute("data-custom-form-answer-id");fetch(s(`/async/custom_form_answers/${a}`),{method:"PUT",body:n}).then(c=>c.text()).then(c=>{t.innerHTML=c})}}})();
