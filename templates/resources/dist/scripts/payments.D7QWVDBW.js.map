{
  "version": 3,
  "sources": ["../../node_modules/js-cookie/dist/js.cookie.mjs", "../../src/scripts/packs/payments.js"],
  "sourcesContent": ["/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n", "import Cookie from 'js-cookie'\nwindow.StoreConnect = window.StoreConnect || {}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  resetPaymentCookieIfNecessary()\n\n  const tabTriggers = document.querySelectorAll('[data-tab-trigger]')\n  ;[...tabTriggers].map((tab) => {\n    tab.addEventListener('click', (event) => {\n      const providerId = event.target.getAttribute('data-tab-trigger')\n\n      if (providerId) {\n        showPaymentForm(providerId)\n      }\n    })\n  })\n\n  const lastProviderId = Cookie.get('last-used-payment-provider')\n  if (lastProviderId) {\n    showPaymentForm(lastProviderId)\n  } else {\n    // If there is no last used provider, we'll show the first one if it is available\n    const paymentProviders = document.querySelector(\"section[data-tabs='payment']\")\n    if (paymentProviders) {\n      if (paymentProviders.querySelector('[data-tab]')) {\n        const firstProviderId = paymentProviders\n          .querySelector('[data-tab]')\n          .getAttribute('data-tab')\n        if (firstProviderId) {\n          showPaymentForm(firstProviderId)\n        }\n      }\n    }\n  }\n})\n\n// Once a payment is processed, reset the payment provider cookie;\n// Or if the user starts the checkout process again.\n// The data-reset-cookie-checkout attribute should appear on these pages.\nfunction resetPaymentCookieIfNecessary() {\n  if (document.querySelector('[data-reset-cookie-checkout]')) {\n    Cookie.remove('last-used-payment-provider')\n  }\n}\n\nfunction showPaymentForm(providerId) {\n  document.querySelectorAll('[data-tab]').forEach((tab) => tab.classList.add('sc-hide'))\n  document\n    .querySelectorAll('[data-tab-trigger]')\n    .forEach((tab) => tab.classList.remove('is-active'))\n\n  const tab = document.querySelector(`[data-tab='${providerId}']`)\n  const trigger = document.querySelector(`[data-tab-trigger='${providerId}']`)\n\n  // Store the selected payment provider for 1 day\n  Cookie.set('last-used-payment-provider', providerId, { expires: 1 })\n\n  if (tab) {\n    tab.classList.remove('sc-hide')\n  }\n  if (trigger) {\n    trigger.classList.add('is-active')\n  }\n  activateSurcharge(providerId)\n}\n\nfunction activateSurcharge(providerId) {\n  document.querySelectorAll(`[data-surcharge-id]`).forEach((elem) => elem.classList.add('sc-hide'))\n\n  const selector = `[data-surcharge-id=\"${providerId}\"]`\n  document.querySelectorAll(selector).forEach((elem) => elem.classList.remove('sc-hide'))\n\n  const elem = document.querySelector(selector)\n  const totalPayableElem = document.querySelector('[data-order-cart-total-payable]')\n  const totalTaxElem = document.querySelector('[data-order-tax-amount]')\n\n  if (elem) {\n    setTotalPayable(elem.getAttribute('data-surcharge-cart-total-payable'))\n    setTotalTax(elem.getAttribute('data-surcharge-cart-total-tax'))\n  } else {\n    if (totalPayableElem) {\n      setTotalPayable(totalPayableElem.getAttribute('data-order-cart-total-payable'))\n    }\n\n    if (totalTaxElem) {\n      setTotalTax(totalTaxElem.getAttribute('data-order-tax-amount'))\n    }\n  }\n}\n\nfunction setTotalPayable(amount) {\n  document.querySelectorAll('[data-order-cart-total-payable]').forEach((elem) => {\n    elem.innerHTML = amount\n  })\n}\n\nfunction setTotalTax(amount) {\n  document.querySelectorAll('[data-order-tax-amount]').forEach((elem) => {\n    elem.innerHTML = amount\n  })\n}\n\nwindow.StoreConnect.showPaymentProviderCallbacks = {}\n"],
  "mappings": "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",
  "names": ["converter", "tab", "elem"]
}
