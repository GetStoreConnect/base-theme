(()=>{window.StoreConnect=window.StoreConnect||{};window.StoreConnect.ObserverCallbacks=window.StoreConnect.ObserverCallbacks||[];document.addEventListener("DOMContentLoaded",d);function a(e){window.StoreConnect.ObserverCallbacks.push(e)}function d(){window.StoreConnect.Observer||(window.StoreConnect.Observer=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.forEach(n=>{n.nodeType===Node.ELEMENT_NODE&&o(n,"mutation")})})}),window.StoreConnect.Observer.observe(document.body,{childList:!0,subtree:!0}),o(document,"initial load"))}function o(e,t){window.StoreConnect.ObserverCallbacks.forEach(n=>n(e))}a(l);var u=1e3*60,r;function l(e){[...e.querySelectorAll("[data-sc-cart-timer]")].forEach(t=>{if(r=t.getAttribute("data-sc-expiry"),s(r)<=0)return i();setInterval(()=>t.dispatchEvent(new Event("countdown")),1e3),t.addEventListener("countdown",c)})}function c(){let e=s(r);if(e<=0)return i();e<=u&&w(),[...document.querySelectorAll("[data-sc-cart-timer]")].map(t=>{t.querySelector("[data-sc-mins]").innerText=m(e),t.querySelector("[data-sc-secs]").innerText=b(e)})}function w(){[...document.querySelectorAll("[data-sc-cart-timer]")].map(e=>e.classList.add("warning"))}function i(){document.removeEventListener("countdown",c),[...document.querySelectorAll("[data-sc-cart-timer]")].map(e=>{let t=e.querySelector("[data-sc-label]");e.classList.add("expired"),t.innerText=t.dataset.scExpired}),[...document.querySelectorAll("[data-sc-cart]")].map(e=>{e.classList.add("expired"),[...e.querySelectorAll("[data-sc-cart-booking]")].map(t=>{t.classList.add("expired")})})}function s(e){return Date.parse(e)-Date.parse(new Date)}function m(e){return new Date(e).getMinutes()}function b(e){let t=new Date(e).getSeconds();return(t<10?"0":"")+t}})();
