(()=>{window.StoreConnect=window.StoreConnect||{};window.StoreConnect.ObserverCallbacks=window.StoreConnect.ObserverCallbacks||[];document.addEventListener("DOMContentLoaded",I);function p(t){window.StoreConnect.ObserverCallbacks.push(t)}function I(){window.StoreConnect.Observer||(window.StoreConnect.Observer=new MutationObserver(t=>{t.forEach(e=>{e.addedNodes.forEach(n=>{n.nodeType===Node.ELEMENT_NODE&&E(n,"mutation")})})}),window.StoreConnect.Observer.observe(document.body,{childList:!0,subtree:!0}),E(document,"initial load"))}function E(t,e){window.StoreConnect.ObserverCallbacks.forEach(n=>n(t))}var y=[1,2,3,4,5,6,7,8,9],w=1,O="manual_option",s=null;p(q);function q(t){N([...t.querySelectorAll("[data-qty-picker]")])}function N(t=[]){t.forEach(e=>{P(e),C(e),H(e)})}function C(t){let e=Q(t),n=c(t),r=M(t),i=J(t),o=V(t),{min:u,max:l,range:a}=x(t);e.addEventListener("click",()=>{s&&b(s),A(t),F(t)}),[...D(t,u,l,a,o),B(u,l,a)].forEach(d=>{if(d===null||d==null)return;let f=d.querySelector("button"),T=m(t);f.addEventListener("click",k=>{b(t),f.value===O?(L(e),v(i),v(n),n.focus(),n.select()):(r.innerText=f.innerText,n.value=f.value,n.dispatchEvent(new Event("change")),U(n.form)&&k.target.form.dispatchEvent(new CustomEvent("submit",{bubbles:!0,cancelable:!0})))}),T.append(d)})}function D(t,e,n,r=[],i={}){return r.map(o=>{let u=i[o],l=t.getAttribute("data-i18n-remove")||"Remove",a=t.getAttribute("data-i18n-max")||"Max",g=t.getAttribute("data-i18n-min")||"Min";return S({value:o,label:u||o,hint:(()=>{switch(o){case 0:return`(${l})`;case n:return`(${a})`;case e:return`(${g})`;default:return null}})()})})}function B(t,e=1/0,n=[]){if(e>n.length)return S({value:O,label:(t===0?n.length:n.length+1)+"+"})}function S({value:t,label:e=null,hint:n=null}){let r=document.createElement("li"),i=document.createElement("button");if(i.type="button",i.value=t,i.innerText=e||t,i.style.display="flex",i.style.alignItems="center",i.style.gap="var(--sc-spacing-tiny)",i.classList.add("sc-focus:outline","sc-focus:bg-lightest"),r.append(i),n===null)return r;let o=document.createElement("span");return o.classList.add("sc-font-tiny","sc-shade-neutral"),o.innerText=n,o.style.pointerEvents="none",i.append(o),r}function x(t){let e=c(t),n=_(e),r=R(e);return{range:$(n,r),min:n,max:r}}function _(t){return t.getAttribute("min")===null?w:parseInt(t.min)}function R(t){return t.getAttribute("max")===null?1/0:parseInt(t.max)}function $(t=w,e=1/0){return e>y.length&&e<1/0?[...Array(e)].map((n,r)=>t===0?r:r+1):t===0?[0,...y.slice(t,e)]:y.slice(t-1,e)}function P(t){let e=Q(t),n=m(t),r=c(t),i=M(t),{min:o,max:u}=x(t);L(r),v(e),n.innerHTML="",(parseInt(r.value)>u||parseInt(r.value)<o)&&(i.innerText=o)}function F(t){document.addEventListener("click",h),t.addEventListener("clickOutside",()=>{b(t),document.removeEventListener("click",h)})}function h(t){let e=t.target.closest("[data-qty-picker]");if(e)return G(e)?b(e):A(e);s&&s.dispatchEvent(new Event("clickOutside"))}function A(t){let e=m(t),n=c(t),r=parseInt(n.value);s=t,e.style.display="block",e.setAttribute("aria-hidden",!1);let i=e.querySelector(`button[value="${r}"]`);i&&i.focus()}function b(t){let e=m(t);s=null,e.style.display="none",e.setAttribute("aria-hidden",!0)}function H(t){let e=c(t);new MutationObserver(()=>{P(t),C(t)}).observe(e,{attributes:!0,attributeFilter:["min","max"]})}function U(t){return t.getAttribute("data-submit-on-change")==="true"}function V(t){let n=c(t).dataset.labels;return n?JSON.parse(n):{}}function v(t=null){if(t!==null)return t.style.display="block"}function L(t=null){if(t!==null)return t.style.display="none"}function G(t){return t.querySelector("ul").getAttribute("aria-hidden")==="true"}function m(t){return t.querySelector("ul")}function c(t){return t.querySelector('input[type="number"]')}function M(t){return t.querySelector("[data-qty-picker-value]")}function J(t){return t.querySelector("[data-qty-picker-update]")}function Q(t){return t.querySelector("[data-qty-picker-trigger]")}})();
