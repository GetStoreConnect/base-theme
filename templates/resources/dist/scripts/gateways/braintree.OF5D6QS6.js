(()=>{var xe=Object.create;var Ie=Object.defineProperty;var Ve=Object.getOwnPropertyDescriptor;var He=Object.getOwnPropertyNames;var Be=Object.getPrototypeOf,Ye=Object.prototype.hasOwnProperty;var oe=(F=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(F,{get:(S,V)=>(typeof require<"u"?require:S)[V]}):F)(function(F){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+F+'" is not supported')});var ge=(F,S)=>()=>(S||F((S={exports:{}}).exports,S),S.exports);var Ke=(F,S,V,e)=>{if(S&&typeof S=="object"||typeof S=="function")for(let d of He(S))!Ye.call(F,d)&&d!==V&&Ie(F,d,{get:()=>S[d],enumerable:!(e=Ve(S,d))||e.enumerable});return F};var ze=(F,S,V)=>(V=F!=null?xe(Be(F)):{},Ke(S||!F||!F.__esModule?Ie(V,"default",{value:F,enumerable:!0}):V,F));var Oe=ge((Ne,de)=>{(function(){var F=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form:not([data-turbo=true])",formInputClickSelector:"form:not([data-turbo=true]) input[type=submit], form:not([data-turbo=true]) input[type=image], form:not([data-turbo=true]) button[type=submit], form:not([data-turbo=true]) button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(F);var S=F.Rails;(function(){(function(){var V;V=null,S.loadCSPNonce=function(){var e;return V=(e=document.querySelector("meta[name=csp-nonce]"))!=null?e.content:void 0},S.cspNonce=function(){return V??S.loadCSPNonce()}}).call(this),function(){var V,e;e=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,S.matches=function(d,m){return m.exclude!=null?e.call(d,m.selector)&&!e.call(d,m.exclude):e.call(d,m)},V="_ujsData",S.getData=function(d,m){var t;return(t=d[V])!=null?t[m]:void 0},S.setData=function(d,m,t){return d[V]==null&&(d[V]={}),d[V][m]=t},S.$=function(d){return Array.prototype.slice.call(document.querySelectorAll(d))}}.call(this),function(){var V,e,d;V=S.$,d=S.csrfToken=function(){var m;return m=document.querySelector("meta[name=csrf-token]"),m&&m.content},e=S.csrfParam=function(){var m;return m=document.querySelector("meta[name=csrf-param]"),m&&m.content},S.CSRFProtection=function(m){var t;if(t=d(),t!=null)return m.setRequestHeader("X-CSRF-Token",t)},S.refreshCSRFTokens=function(){var m,t;if(t=d(),m=e(),t!=null&&m!=null)return V('form input[name="'+m+'"]').forEach(function(a){return a.value=t})}}.call(this),function(){var V,e,d,m;d=S.matches,V=window.CustomEvent,typeof V!="function"&&(V=function(t,a){var n;return n=document.createEvent("CustomEvent"),n.initCustomEvent(t,a.bubbles,a.cancelable,a.detail),n},V.prototype=window.Event.prototype,m=V.prototype.preventDefault,V.prototype.preventDefault=function(){var t;return t=m.call(this),this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),t}),e=S.fire=function(t,a,n){var r;return r=new V(a,{bubbles:!0,cancelable:!0,detail:n}),t.dispatchEvent(r),!r.defaultPrevented},S.stopEverything=function(t){return e(t.target,"ujs:everythingStopped"),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},S.delegate=function(t,a,n,r){return t.addEventListener(n,function(i){var l;for(l=i.target;!(!(l instanceof Element)||d(l,a));)l=l.parentNode;if(l instanceof Element&&r.call(l,i)===!1)return i.preventDefault(),i.stopPropagation()})}}.call(this),function(){var V,e,d,m,t,a,n;m=S.cspNonce,e=S.CSRFProtection,t=S.fire,V={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},S.ajax=function(r){var i;if(r=a(r),i=d(r,function(){var l,o;return o=n((l=i.response)!=null?l:i.responseText,i.getResponseHeader("Content-Type")),Math.floor(i.status/100)===2?typeof r.success=="function"&&r.success(o,i.statusText,i):typeof r.error=="function"&&r.error(o,i.statusText,i),typeof r.complete=="function"?r.complete(i,i.statusText):void 0}),r.beforeSend!=null&&!r.beforeSend(i,r))return!1;if(i.readyState===XMLHttpRequest.OPENED)return i.send(r.data)},a=function(r){return r.url=r.url||location.href,r.type=r.type.toUpperCase(),r.type==="GET"&&r.data&&(r.url.indexOf("?")<0?r.url+="?"+r.data:r.url+="&"+r.data),V[r.dataType]==null&&(r.dataType="*"),r.accept=V[r.dataType],r.dataType!=="*"&&(r.accept+=", */*; q=0.01"),r},d=function(r,i){var l;return l=new XMLHttpRequest,l.open(r.type,r.url,!0),l.setRequestHeader("Accept",r.accept),typeof r.data=="string"&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.crossDomain||(l.setRequestHeader("X-Requested-With","XMLHttpRequest"),e(l)),l.withCredentials=!!r.withCredentials,l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE)return i(l)},l},n=function(r,i){var l,o;if(typeof r=="string"&&typeof i=="string"){if(i.match(/\bjson\b/))try{r=JSON.parse(r)}catch{}else if(i.match(/\b(?:java|ecma)script\b/))o=document.createElement("script"),o.setAttribute("nonce",m()),o.text=r,document.head.appendChild(o).parentNode.removeChild(o);else if(i.match(/\b(xml|html|svg)\b/)){l=new DOMParser,i=i.replace(/;.+/,"");try{r=l.parseFromString(r,i)}catch{}}}return r},S.href=function(r){return r.href},S.isCrossDomain=function(r){var i,l,o;l=document.createElement("a"),l.href=location.href,o=document.createElement("a");try{return o.href=r,!((!o.protocol||o.protocol===":")&&!o.host||l.protocol+"//"+l.host==o.protocol+"//"+o.host)}catch(u){return i=u,!0}}}.call(this),function(){var V,e;V=S.matches,e=function(d){return Array.prototype.slice.call(d)},S.serializeElement=function(d,m){var t,a;return t=[d],V(d,"form")&&(t=e(d.elements)),a=[],t.forEach(function(n){if(!(!n.name||n.disabled)&&!V(n,"fieldset[disabled] *")){if(V(n,"select"))return e(n.options).forEach(function(r){if(r.selected)return a.push({name:n.name,value:r.value})});if(n.checked||["radio","checkbox","submit"].indexOf(n.type)===-1)return a.push({name:n.name,value:n.value})}}),m&&a.push(m),a.map(function(n){return n.name!=null?encodeURIComponent(n.name)+"="+encodeURIComponent(n.value):n}).join("&")},S.formElements=function(d,m){return V(d,"form")?e(d.elements).filter(function(t){return V(t,m)}):e(d.querySelectorAll(m))}}.call(this),function(){var V,e,d;e=S.fire,d=S.stopEverything,S.handleConfirm=function(m){if(!V(this))return d(m)},S.confirm=function(m,t){return confirm(m)},V=function(m){var t,a,n;if(n=m.getAttribute("data-confirm"),!n)return!0;if(t=!1,e(m,"confirm")){try{t=S.confirm(n,m)}catch{}a=e(m,"confirm:complete",[t])}return t&&a}}.call(this),function(){var V,e,d,m,t,a,n,r,i,l,o,u;l=S.matches,r=S.getData,o=S.setData,u=S.stopEverything,n=S.formElements,S.handleDisabledElement=function(p){var E;if(E=this,E.disabled)return u(p)},S.enableElement=function(p){var E;if(p instanceof Event){if(i(p))return;E=p.target}else E=p;if(l(E,S.linkDisableSelector))return a(E);if(l(E,S.buttonDisableSelector)||l(E,S.formEnableSelector))return m(E);if(l(E,S.formSubmitSelector))return t(E)},S.disableElement=function(p){var E;if(E=p instanceof Event?p.target:p,l(E,S.linkDisableSelector))return d(E);if(l(E,S.buttonDisableSelector)||l(E,S.formDisableSelector))return V(E);if(l(E,S.formSubmitSelector))return e(E)},d=function(p){var E;if(!r(p,"ujs:disabled"))return E=p.getAttribute("data-disable-with"),E!=null&&(o(p,"ujs:enable-with",p.innerHTML),p.innerHTML=E),p.addEventListener("click",u),o(p,"ujs:disabled",!0)},a=function(p){var E;return E=r(p,"ujs:enable-with"),E!=null&&(p.innerHTML=E,o(p,"ujs:enable-with",null)),p.removeEventListener("click",u),o(p,"ujs:disabled",null)},e=function(p){return n(p,S.formDisableSelector).forEach(V)},V=function(p){var E;if(!r(p,"ujs:disabled"))return E=p.getAttribute("data-disable-with"),E!=null&&(l(p,"button")?(o(p,"ujs:enable-with",p.innerHTML),p.innerHTML=E):(o(p,"ujs:enable-with",p.value),p.value=E)),p.disabled=!0,o(p,"ujs:disabled",!0)},t=function(p){return n(p,S.formEnableSelector).forEach(m)},m=function(p){var E;return E=r(p,"ujs:enable-with"),E!=null&&(l(p,"button")?p.innerHTML=E:p.value=E,o(p,"ujs:enable-with",null)),p.disabled=!1,o(p,"ujs:disabled",null)},i=function(p){var E,v;return v=(E=p.detail)!=null?E[0]:void 0,v?.getResponseHeader("X-Xhr-Redirect")!=null}}.call(this),function(){var V;V=S.stopEverything,S.handleMethod=function(e){var d,m,t,a,n,r,i;if(r=this,i=r.getAttribute("data-method"),!!i)return n=S.href(r),m=S.csrfToken(),d=S.csrfParam(),t=document.createElement("form"),a="<input name='_method' value='"+i+"' type='hidden' />",d!=null&&m!=null&&!S.isCrossDomain(n)&&(a+="<input name='"+d+"' value='"+m+"' type='hidden' />"),a+='<input type="submit" />',t.method="post",t.action=n,t.target=r.target,t.innerHTML=a,t.style.display="none",document.body.appendChild(t),t.querySelector('[type="submit"]').click(),V(e)}}.call(this),function(){var V,e,d,m,t,a,n,r,i,l=[].slice;a=S.matches,d=S.getData,r=S.setData,e=S.fire,i=S.stopEverything,V=S.ajax,m=S.isCrossDomain,n=S.serializeElement,t=function(o){var u;return u=o.getAttribute("data-remote"),u!=null&&u!=="false"},S.handleRemote=function(o){var u,p,E,v,A,g,s;return v=this,t(v)?e(v,"ajax:before")?(s=v.getAttribute("data-with-credentials"),E=v.getAttribute("data-type")||"script",a(v,S.formSubmitSelector)?(u=d(v,"ujs:submit-button"),A=d(v,"ujs:submit-button-formmethod")||v.method,g=d(v,"ujs:submit-button-formaction")||v.getAttribute("action")||location.href,A.toUpperCase()==="GET"&&(g=g.replace(/\?.*$/,"")),v.enctype==="multipart/form-data"?(p=new FormData(v),u!=null&&p.append(u.name,u.value)):p=n(v,u),r(v,"ujs:submit-button",null),r(v,"ujs:submit-button-formmethod",null),r(v,"ujs:submit-button-formaction",null)):a(v,S.buttonClickSelector)||a(v,S.inputChangeSelector)?(A=v.getAttribute("data-method"),g=v.getAttribute("data-url"),p=n(v,v.getAttribute("data-params"))):(A=v.getAttribute("data-method"),g=S.href(v),p=v.getAttribute("data-params")),V({type:A||"GET",url:g,data:p,dataType:E,beforeSend:function(c,y){return e(v,"ajax:beforeSend",[c,y])?e(v,"ajax:send",[c]):(e(v,"ajax:stopped"),!1)},success:function(){var c;return c=1<=arguments.length?l.call(arguments,0):[],e(v,"ajax:success",c)},error:function(){var c;return c=1<=arguments.length?l.call(arguments,0):[],e(v,"ajax:error",c)},complete:function(){var c;return c=1<=arguments.length?l.call(arguments,0):[],e(v,"ajax:complete",c)},crossDomain:m(g),withCredentials:s!=null&&s!=="false"}),i(o)):(e(v,"ajax:stopped"),!1):!0},S.formSubmitButtonClick=function(o){var u,p;if(u=this,p=u.form,!!p)return u.name&&r(p,"ujs:submit-button",{name:u.name,value:u.value}),r(p,"ujs:formnovalidate-button",u.formNoValidate),r(p,"ujs:submit-button-formaction",u.getAttribute("formaction")),r(p,"ujs:submit-button-formmethod",u.getAttribute("formmethod"))},S.preventInsignificantClick=function(o){var u,p,E,v,A,g;if(E=this,A=(E.getAttribute("data-method")||"GET").toUpperCase(),u=E.getAttribute("data-params"),v=o.metaKey||o.ctrlKey,p=v&&A==="GET"&&!u,g=o.button!=null&&o.button!==0,g||p)return o.stopImmediatePropagation()}}.call(this),function(){var V,e,d,m,t,a,n,r,i,l,o,u,p,E,v;if(a=S.fire,d=S.delegate,r=S.getData,V=S.$,v=S.refreshCSRFTokens,e=S.CSRFProtection,p=S.loadCSPNonce,t=S.enableElement,m=S.disableElement,l=S.handleDisabledElement,i=S.handleConfirm,E=S.preventInsignificantClick,u=S.handleRemote,n=S.formSubmitButtonClick,o=S.handleMethod,typeof jQuery<"u"&&jQuery!==null&&jQuery.ajax!=null){if(jQuery.rails)throw new Error("If you load both jquery_ujs and rails-ujs, use rails-ujs only.");jQuery.rails=S,jQuery.ajaxPrefilter(function(A,g,s){if(!A.crossDomain)return e(s)})}S.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return V(S.formEnableSelector).forEach(function(A){if(r(A,"ujs:disabled"))return t(A)}),V(S.linkDisableSelector).forEach(function(A){if(r(A,"ujs:disabled"))return t(A)})}),d(document,S.linkDisableSelector,"ajax:complete",t),d(document,S.linkDisableSelector,"ajax:stopped",t),d(document,S.buttonDisableSelector,"ajax:complete",t),d(document,S.buttonDisableSelector,"ajax:stopped",t),d(document,S.linkClickSelector,"click",E),d(document,S.linkClickSelector,"click",l),d(document,S.linkClickSelector,"click",i),d(document,S.linkClickSelector,"click",m),d(document,S.linkClickSelector,"click",u),d(document,S.linkClickSelector,"click",o),d(document,S.buttonClickSelector,"click",E),d(document,S.buttonClickSelector,"click",l),d(document,S.buttonClickSelector,"click",i),d(document,S.buttonClickSelector,"click",m),d(document,S.buttonClickSelector,"click",u),d(document,S.inputChangeSelector,"change",l),d(document,S.inputChangeSelector,"change",i),d(document,S.inputChangeSelector,"change",u),d(document,S.formSubmitSelector,"submit",l),d(document,S.formSubmitSelector,"submit",i),d(document,S.formSubmitSelector,"submit",u),d(document,S.formSubmitSelector,"submit",function(A){return setTimeout(function(){return m(A)},13)}),d(document,S.formSubmitSelector,"ajax:send",m),d(document,S.formSubmitSelector,"ajax:complete",t),d(document,S.formInputClickSelector,"click",E),d(document,S.formInputClickSelector,"click",l),d(document,S.formInputClickSelector,"click",i),d(document,S.formInputClickSelector,"click",n),document.addEventListener("DOMContentLoaded",v),document.addEventListener("DOMContentLoaded",p),window._rails_loaded=!0},window.Rails===S&&a(document,"rails:attachBindings")&&S.start()}.call(this)}).call(this),typeof de=="object"&&de.exports?de.exports=S:typeof define=="function"&&define.amd&&define(S)}).call(Ne)});var Ue=ge((Me,ye)=>{(function(F){if(typeof Me=="object"&&typeof ye<"u")ye.exports=F();else if(typeof define=="function"&&define.amd)define([],F);else{var S;typeof window<"u"?S=window:typeof global<"u"?S=global:typeof self<"u"?S=self:S=this,S.braintree=F()}})(function(){var F,S,V;return function(){function e(d,m,t){function a(i,l){if(!m[i]){if(!d[i]){var o=typeof oe=="function"&&oe;if(!l&&o)return o(i,!0);if(n)return n(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var p=m[i]={exports:{}};d[i][0].call(p.exports,function(E){var v=d[i][1][E];return a(v||E)},p,p.exports,e,d,m,t)}return m[i].exports}for(var n=typeof oe=="function"&&oe,r=0;r<t.length;r++)a(t[r]);return a}return e}()({1:[function(e,d,m){"use strict";var t=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(m,"__esModule",{value:!0}),m.PromiseGlobal=void 0;var a=t(e("promise-polyfill")),n=typeof Promise<"u"?Promise:a.default;m.PromiseGlobal=n},{"promise-polyfill":68}],2:[function(e,d,m){"use strict";var t=e("./lib/promise"),a={};function n(r){var i,l=JSON.stringify(r);if(!r.forceScriptReload&&(i=a[l],i))return i;var o=document.createElement("script"),u=r.dataAttributes||{},p=r.container||document.head;return o.src=r.src,o.id=r.id||"",o.async=!0,r.crossorigin&&o.setAttribute("crossorigin",""+r.crossorigin),Object.keys(u).forEach(function(E){o.setAttribute("data-"+E,""+u[E])}),i=new t.PromiseGlobal(function(E,v){o.addEventListener("load",function(){E(o)}),o.addEventListener("error",function(){v(new Error(r.src+" failed to load."))}),o.addEventListener("abort",function(){v(new Error(r.src+" has aborted."))}),p.appendChild(o)}),a[l]=i,i}n.clearCache=function(){a={}},d.exports=n},{"./lib/promise":1}],3:[function(e,d,m){d.exports=e("./dist/load-script")},{"./dist/load-script":2}],4:[function(e,d,m){"use strict";d.exports=function(a){return a=a||window.navigator.userAgent,/Android/i.test(a)}},{}],5:[function(e,d,m){"use strict";d.exports=function(a){return a=a||window.navigator.userAgent,/CrOS/i.test(a)}},{}],6:[function(e,d,m){"use strict";var t=e("./is-edge"),a=e("./is-samsung"),n=e("./is-duckduckgo"),r=e("./is-opera"),i=e("./is-silk");d.exports=function(o){return o=o||window.navigator.userAgent,(o.indexOf("Chrome")!==-1||o.indexOf("CriOS")!==-1)&&!t(o)&&!a(o)&&!n(o)&&!r(o)&&!i(o)}},{"./is-duckduckgo":7,"./is-edge":8,"./is-opera":18,"./is-samsung":19,"./is-silk":20}],7:[function(e,d,m){"use strict";d.exports=function(a){return a=a||window.navigator.userAgent,a.indexOf("DuckDuckGo/")!==-1}},{}],8:[function(e,d,m){"use strict";d.exports=function(a){return a=a||window.navigator.userAgent,a.indexOf("Edge/")!==-1}},{}],9:[function(e,d,m){"use strict";d.exports=function(a){return a=a||window.navigator.userAgent,/Firefox/i.test(a)}},{}],10:[function(e,d,m){"use strict";d.exports=function(a){return a=a||window.navigator.userAgent,a.indexOf("MSIE 9")!==-1}},{}],11:[function(e,d,m){"use strict";d.exports=function(a){return a=a||window.navigator.userAgent,/FxiOS/i.test(a)}},{}],12:[function(e,d,m){"use strict";var t=e("./is-ios");function a(n){return/\bGSA\b/.test(n)}d.exports=function(r){return r=r||window.navigator.userAgent,t(r)&&a(r)}},{"./is-ios":16}],13:[function(e,d,m){"use strict";var t=e("./is-ios"),a=e("./is-ios-firefox"),n=/webkit/i;function r(o){return n.test(o)}function i(o){return o.indexOf("CriOS")>-1}function l(o){return o.indexOf("FBAN")>-1}d.exports=function(u){return u=u||window.navigator.userAgent,t(u)&&r(u)&&!i(u)&&!a(u)&&!l(u)}},{"./is-ios":16,"./is-ios-firefox":11}],14:[function(e,d,m){"use strict";var t=e("./is-ios"),a=e("./is-ios-google-search-app");d.exports=function(r){return r=r||window.navigator.userAgent,t(r)?a(r)?!0:/.+AppleWebKit(?!.*Safari)/i.test(r):!1}},{"./is-ios":16,"./is-ios-google-search-app":12}],15:[function(e,d,m){"use strict";var t=e("./is-ios-webview");d.exports=function(n,r){return r=typeof r<"u"?r:window.statusbar.visible,t(n)&&r}},{"./is-ios-webview":14}],16:[function(e,d,m){"use strict";var t=e("./is-ipados");d.exports=function(n,r,i){r===void 0&&(r=!0),n=n||window.navigator.userAgent;var l=/iPhone|iPod|iPad/i.test(n);return r?l||t(n,i):l}},{"./is-ipados":17}],17:[function(e,d,m){"use strict";d.exports=function(a,n){return a=a||window.navigator.userAgent,n=n||window.document,/Mac|iPad/i.test(a)&&"ontouchend"in n}},{}],18:[function(e,d,m){"use strict";d.exports=function(a){return a=a||window.navigator.userAgent,a.indexOf("OPR/")!==-1||a.indexOf("Opera/")!==-1||a.indexOf("OPT/")!==-1}},{}],19:[function(e,d,m){"use strict";d.exports=function(a){return a=a||window.navigator.userAgent,/SamsungBrowser/i.test(a)}},{}],20:[function(e,d,m){"use strict";d.exports=function(a){return a=a||window.navigator.userAgent,a.indexOf("Silk/")!==-1}},{}],21:[function(e,d,m){"use strict";var t=48,a=e("./is-android"),n=e("./is-ios-firefox"),r=e("./is-ios-webview"),i=e("./is-chrome"),l=e("./is-samsung"),o=e("./is-duckduckgo");function u(A){A=A||window.navigator.userAgent;var g=A.match(/CriOS\/(\d+)\./);if(!g)return!1;var s=parseInt(g[1],10);return s<t}function p(A){return A=A||window.navigator.userAgent,A.indexOf("Opera Mini")>-1}function E(A){var g=/Version\/[\d.]+/i;return A=A||window.navigator.userAgent,a(A)?g.test(A)&&!p(A)&&!o(A):!1}function v(A){return!i(A)&&!l(A)&&/samsung/i.test(A)}d.exports=function(g){return g=g||window.navigator.userAgent,!(r(g)||n(g)||E(g)||p(g)||u(g)||v(g))}},{"./is-android":4,"./is-chrome":6,"./is-duckduckgo":7,"./is-ios-firefox":11,"./is-ios-webview":14,"./is-samsung":19}],22:[function(e,d,m){d.exports=e("./dist/is-android")},{"./dist/is-android":4}],23:[function(e,d,m){d.exports=e("./dist/is-chrome-os")},{"./dist/is-chrome-os":5}],24:[function(e,d,m){d.exports=e("./dist/is-chrome")},{"./dist/is-chrome":6}],25:[function(e,d,m){d.exports=e("./dist/is-firefox")},{"./dist/is-firefox":9}],26:[function(e,d,m){d.exports=e("./dist/is-ie9")},{"./dist/is-ie9":10}],27:[function(e,d,m){d.exports=e("./dist/is-ios-safari")},{"./dist/is-ios-safari":13}],28:[function(e,d,m){d.exports=e("./dist/is-ios-webview")},{"./dist/is-ios-webview":14}],29:[function(e,d,m){d.exports=e("./dist/is-ios-wkwebview")},{"./dist/is-ios-wkwebview":15}],30:[function(e,d,m){d.exports=e("./dist/is-ios")},{"./dist/is-ios":16}],31:[function(e,d,m){d.exports=e("./dist/is-samsung")},{"./dist/is-samsung":19}],32:[function(e,d,m){d.exports=e("./dist/supports-popups")},{"./dist/supports-popups":21}],33:[function(e,d,m){"use strict";var t=function(){function a(){this._events={}}return a.prototype.on=function(n,r){this._events[n]?this._events[n].push(r):this._events[n]=[r]},a.prototype.off=function(n,r){var i=this._events[n];if(i){var l=i.indexOf(r);i.splice(l,1)}},a.prototype._emit=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var l=this._events[n];l&&l.forEach(function(o){o.apply(void 0,r)})},a.prototype.hasListener=function(n){var r=this._events[n];return r?r.length>0:!1},a.createChild=function(n){n.prototype=Object.create(a.prototype,{constructor:n})},a}();d.exports=t},{}],34:[function(e,d,m){"use strict";var t=typeof Promise<"u"?Promise:null,a=function(){function n(r){var i=this;if(typeof r=="function"){this._promise=new n.Promise(r);return}this._promise=new n.Promise(function(l,o){i._resolveFunction=l,i._rejectFunction=o}),r=r||{},this._onResolve=r.onResolve||n.defaultOnResolve,this._onReject=r.onReject||n.defaultOnReject,n.shouldCatchExceptions(r)&&this._promise.catch(function(){}),this._resetState()}return n.defaultOnResolve=function(r){return n.Promise.resolve(r)},n.defaultOnReject=function(r){return n.Promise.reject(r)},n.setPromise=function(r){n.Promise=r},n.shouldCatchExceptions=function(r){return r.hasOwnProperty("suppressUnhandledPromiseMessage")?!!r.suppressUnhandledPromiseMessage:!!n.suppressUnhandledPromiseMessage},n.all=function(r){return n.Promise.all(r)},n.allSettled=function(r){return n.Promise.allSettled(r)},n.race=function(r){return n.Promise.race(r)},n.reject=function(r){return n.Promise.reject(r)},n.resolve=function(r){return n.Promise.resolve(r)},n.prototype.then=function(){for(var r,i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return(r=this._promise).then.apply(r,i)},n.prototype.catch=function(){for(var r,i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return(r=this._promise).catch.apply(r,i)},n.prototype.resolve=function(r){var i=this;return this.isFulfilled?this:(this._setResolved(),n.Promise.resolve().then(function(){return i._onResolve(r)}).then(function(l){i._resolveFunction(l)}).catch(function(l){i._resetState(),i.reject(l)}),this)},n.prototype.reject=function(r){var i=this;return this.isFulfilled?this:(this._setRejected(),n.Promise.resolve().then(function(){return i._onReject(r)}).then(function(l){i._setResolved(),i._resolveFunction(l)}).catch(function(l){return i._rejectFunction(l)}),this)},n.prototype._resetState=function(){this.isFulfilled=!1,this.isResolved=!1,this.isRejected=!1},n.prototype._setResolved=function(){this.isFulfilled=!0,this.isResolved=!0,this.isRejected=!1},n.prototype._setRejected=function(){this.isFulfilled=!0,this.isResolved=!1,this.isRejected=!0},n.Promise=t,n}();d.exports=a},{}],35:[function(e,d,m){"use strict";var t=e("./lib/set-attributes"),a=e("./lib/default-attributes"),n=e("./lib/assign");d.exports=function(i){i===void 0&&(i={});var l=document.createElement("iframe"),o=n.assign({},a.defaultAttributes,i);return o.style&&typeof o.style!="string"&&(n.assign(l.style,o.style),delete o.style),t.setAttributes(l,o),l.getAttribute("id")||(l.id=l.name),l}},{"./lib/assign":36,"./lib/default-attributes":37,"./lib/set-attributes":38}],36:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.assign=void 0;function t(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.forEach(function(i){typeof i=="object"&&Object.keys(i).forEach(function(l){a[l]=i[l]})}),a}m.assign=t},{}],37:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.defaultAttributes=void 0,m.defaultAttributes={src:"about:blank",frameBorder:0,allowtransparency:!0,scrolling:"no"}},{}],38:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.setAttributes=void 0;function t(a,n){for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];i==null?a.removeAttribute(r):a.setAttribute(r,i)}}m.setAttributes=t},{}],39:[function(e,d,m){"use strict";function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var n=Math.random()*16|0,r=a==="x"?n:n&3|8;return r.toString(16)})}d.exports=t},{}],40:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0});function t(a){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];setTimeout(function(){try{a.apply(void 0,n)}catch(i){console.log("Error in callback function"),console.log(i)}},1)}}m.deferred=t},{}],41:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0});function t(a){var n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n||(n=!0,a.apply(void 0,r))}}m.once=t},{}],42:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0});function t(a,n){if(!n)return a;a.then(function(r){return n(null,r)}).catch(function(r){return n(r)})}m.promiseOrCallback=t},{}],43:[function(e,d,m){"use strict";var t=e("./lib/deferred"),a=e("./lib/once"),n=e("./lib/promise-or-callback");function r(i){return function(){for(var l=[],o=0;o<arguments.length;o++)l[o]=arguments[o];var u,p=l[l.length-1];return typeof p=="function"&&(u=l.pop(),u=a.once(t.deferred(u))),n.promiseOrCallback(i.apply(this,l),u)}}r.wrapPrototype=function(i,l){l===void 0&&(l={});var o=l.ignoreMethods||[],u=l.transformPrivateMethods===!0,p=Object.getOwnPropertyNames(i.prototype).filter(function(E){var v,A=E!=="constructor"&&typeof i.prototype[E]=="function",g=o.indexOf(E)===-1;return u?v=!0:v=E.charAt(0)!=="_",A&&v&&g});return p.forEach(function(E){var v=i.prototype[E];i.prototype[E]=r(v)}),i},d.exports=r},{"./lib/deferred":40,"./lib/once":41,"./lib/promise-or-callback":42}],44:[function(e,d,m){"use strict";var t=this&&this.__assign||function(){return t=Object.assign||function(c){for(var y,h=1,T=arguments.length;h<T;h++){y=arguments[h];for(var O in y)Object.prototype.hasOwnProperty.call(y,O)&&(c[O]=y[O])}return c},t.apply(this,arguments)},a=e("./lib/card-types"),n=e("./lib/add-matching-cards-to-results"),r=e("./lib/is-valid-input-type"),i=e("./lib/find-best-match"),l=e("./lib/clone"),o={},u={VISA:"visa",MASTERCARD:"mastercard",AMERICAN_EXPRESS:"american-express",DINERS_CLUB:"diners-club",DISCOVER:"discover",JCB:"jcb",UNIONPAY:"unionpay",MAESTRO:"maestro",ELO:"elo",MIR:"mir",HIPER:"hiper",HIPERCARD:"hipercard"},p=[u.VISA,u.MASTERCARD,u.AMERICAN_EXPRESS,u.DINERS_CLUB,u.DISCOVER,u.JCB,u.UNIONPAY,u.MAESTRO,u.ELO,u.MIR,u.HIPER,u.HIPERCARD],E=l.clone(p);function v(c){return o[c]||a[c]}function A(){return E.map(function(c){return l.clone(v(c))})}function g(c,y){y===void 0&&(y=!1);var h=E.indexOf(c);if(!y&&h===-1)throw new Error('"'+c+'" is not a supported card type.');return h}function s(c){var y=[];if(!r.isValidInputType(c))return y;if(c.length===0)return A();E.forEach(function(T){var O=v(T);n.addMatchingCardsToResults(c,O,y)});var h=i.findBestMatch(y);return h?[h]:y}s.getTypeInfo=function(c){return l.clone(v(c))},s.removeCard=function(c){var y=g(c);E.splice(y,1)},s.addCard=function(c){var y=g(c.type,!0);o[c.type]=c,y===-1&&E.push(c.type)},s.updateCard=function(c,y){var h=o[c]||a[c];if(!h)throw new Error('"'+c+"\" is not a recognized type. Use `addCard` instead.'");if(y.type&&h.type!==y.type)throw new Error("Cannot overwrite type parameter.");var T=l.clone(h);T=t(t({},T),y),o[T.type]=T},s.changeOrder=function(c,y){var h=g(c);E.splice(h,1),E.splice(y,0,c)},s.resetModifications=function(){E=l.clone(p),o={}},s.types=u,d.exports=s},{"./lib/add-matching-cards-to-results":45,"./lib/card-types":46,"./lib/clone":47,"./lib/find-best-match":48,"./lib/is-valid-input-type":49}],45:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.addMatchingCardsToResults=void 0;var t=e("./clone"),a=e("./matches");function n(r,i,l){var o,u;for(o=0;o<i.patterns.length;o++){var p=i.patterns[o];if(a.matches(r,p)){var E=t.clone(i);Array.isArray(p)?u=String(p[0]).length:u=String(p).length,r.length>=u&&(E.matchStrength=u),l.push(E);break}}}m.addMatchingCardsToResults=n},{"./clone":47,"./matches":50}],46:[function(e,d,m){"use strict";var t={visa:{niceType:"Visa",type:"visa",patterns:[4],gaps:[4,8,12],lengths:[16,18,19],code:{name:"CVV",size:3}},mastercard:{niceType:"Mastercard",type:"mastercard",patterns:[[51,55],[2221,2229],[223,229],[23,26],[270,271],2720],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},"american-express":{niceType:"American Express",type:"american-express",patterns:[34,37],gaps:[4,10],lengths:[15],code:{name:"CID",size:4}},"diners-club":{niceType:"Diners Club",type:"diners-club",patterns:[[300,305],36,38,39],gaps:[4,10],lengths:[14,16,19],code:{name:"CVV",size:3}},discover:{niceType:"Discover",type:"discover",patterns:[6011,[644,649],65],gaps:[4,8,12],lengths:[16,19],code:{name:"CID",size:3}},jcb:{niceType:"JCB",type:"jcb",patterns:[2131,1800,[3528,3589]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVV",size:3}},unionpay:{niceType:"UnionPay",type:"unionpay",patterns:[620,[624,626],[62100,62182],[62184,62187],[62185,62197],[62200,62205],[622010,622999],622018,[622019,622999],[62207,62209],[622126,622925],[623,626],6270,6272,6276,[627700,627779],[627781,627799],[6282,6289],6291,6292,810,[8110,8131],[8132,8151],[8152,8163],[8164,8171]],gaps:[4,8,12],lengths:[14,15,16,17,18,19],code:{name:"CVN",size:3}},maestro:{niceType:"Maestro",type:"maestro",patterns:[493698,[5e5,504174],[504176,506698],[506779,508999],[56,59],63,67,6],gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:"CVC",size:3}},elo:{niceType:"Elo",type:"elo",patterns:[401178,401179,438935,457631,457632,431274,451416,457393,504175,[506699,506778],[509e3,509999],627780,636297,636368,[650031,650033],[650035,650051],[650405,650439],[650485,650538],[650541,650598],[650700,650718],[650720,650727],[650901,650978],[651652,651679],[655e3,655019],[655021,655058]],gaps:[4,8,12],lengths:[16],code:{name:"CVE",size:3}},mir:{niceType:"Mir",type:"mir",patterns:[[2200,2204]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVP2",size:3}},hiper:{niceType:"Hiper",type:"hiper",patterns:[637095,63737423,63743358,637568,637599,637609,637612],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},hipercard:{niceType:"Hipercard",type:"hipercard",patterns:[606282],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}}};d.exports=t},{}],47:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.clone=void 0;function t(a){return a?JSON.parse(JSON.stringify(a)):null}m.clone=t},{}],48:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.findBestMatch=void 0;function t(n){var r=n.filter(function(i){return i.matchStrength}).length;return r>0&&r===n.length}function a(n){return t(n)?n.reduce(function(r,i){return!r||Number(r.matchStrength)<Number(i.matchStrength)?i:r}):null}m.findBestMatch=a},{}],49:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.isValidInputType=void 0;function t(a){return typeof a=="string"||a instanceof String}m.isValidInputType=t},{}],50:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.matches=void 0;function t(r,i,l){var o=String(i).length,u=r.substr(0,o),p=parseInt(u,10);return i=parseInt(String(i).substr(0,u.length),10),l=parseInt(String(l).substr(0,u.length),10),p>=i&&p<=l}function a(r,i){return i=String(i),i.substring(0,r.length)===r.substring(0,i.length)}function n(r,i){return Array.isArray(i)?t(r,i[0],i[1]):a(r,i)}m.matches=n},{}],51:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Framebus=void 0;var t=e("./lib"),a=typeof window<"u"&&window.Promise,n=function(){function r(i){i===void 0&&(i={}),this.origin=i.origin||"*",this.channel=i.channel||"",this.verifyDomain=i.verifyDomain,this.targetFrames=i.targetFrames||[],this.limitBroadcastToFramesArray=!!i.targetFrames,this.isDestroyed=!1,this.listeners=[],this.hasAdditionalChecksForOnListeners=!!(this.verifyDomain||this.limitBroadcastToFramesArray)}return r.setPromise=function(i){r.Promise=i},r.target=function(i){return new r(i)},r.prototype.addTargetFrame=function(i){this.limitBroadcastToFramesArray&&this.targetFrames.push(i)},r.prototype.include=function(i){return i==null||i.Window==null||i.constructor!==i.Window?!1:(t.childWindows.push(i),!0)},r.prototype.target=function(i){return r.target(i)},r.prototype.emit=function(i,l,o){if(this.isDestroyed)return!1;var u=this.origin;if(i=this.namespaceEvent(i),(0,t.isntString)(i)||(0,t.isntString)(u))return!1;typeof l=="function"&&(o=l,l=void 0);var p=(0,t.packagePayload)(i,u,l,o);return p?(this.limitBroadcastToFramesArray?this.targetFramesAsWindows().forEach(function(E){(0,t.sendMessage)(E,p,u)}):(0,t.broadcast)(p,{origin:u,frame:window.top||window.self}),!0):!1},r.prototype.emitAsPromise=function(i,l){var o=this;return new r.Promise(function(u,p){var E=o.emit(i,l,function(v){u(v)});E||p(new Error('Listener not added for "'.concat(i,'"')))})},r.prototype.on=function(i,l){if(this.isDestroyed)return!1;var o=this,u=this.origin,p=l;return i=this.namespaceEvent(i),(0,t.subscriptionArgsInvalid)(i,p,u)?!1:(this.hasAdditionalChecksForOnListeners&&(p=function(){for(var E=[],v=0;v<arguments.length;v++)E[v]=arguments[v];o.passesVerifyDomainCheck(this&&this.origin)&&o.hasMatchingTargetFrame(this&&this.source)&&l.apply(void 0,E)}),this.listeners.push({eventName:i,handler:p,originalHandler:l}),t.subscribers[u]=t.subscribers[u]||{},t.subscribers[u][i]=t.subscribers[u][i]||[],t.subscribers[u][i].push(p),!0)},r.prototype.off=function(i,l){var o=l;if(this.isDestroyed)return!1;if(this.verifyDomain)for(var u=0;u<this.listeners.length;u++){var p=this.listeners[u];p.originalHandler===l&&(o=p.handler)}i=this.namespaceEvent(i);var E=this.origin;if((0,t.subscriptionArgsInvalid)(i,o,E))return!1;var v=t.subscribers[E]&&t.subscribers[E][i];if(!v)return!1;for(var u=0;u<v.length;u++)if(v[u]===o)return v.splice(u,1),!0;return!1},r.prototype.teardown=function(){if(!this.isDestroyed){this.isDestroyed=!0;for(var i=0;i<this.listeners.length;i++){var l=this.listeners[i];this.off(l.eventName,l.handler)}this.listeners.length=0}},r.prototype.passesVerifyDomainCheck=function(i){return this.verifyDomain?this.checkOrigin(i):!0},r.prototype.targetFramesAsWindows=function(){return this.limitBroadcastToFramesArray?this.targetFrames.map(function(i){return i instanceof HTMLIFrameElement?i.contentWindow:i}).filter(function(i){return i}):[]},r.prototype.hasMatchingTargetFrame=function(i){if(!this.limitBroadcastToFramesArray)return!0;var l=this.targetFramesAsWindows().find(function(o){return o===i});return!!l},r.prototype.checkOrigin=function(i){var l,o=document.createElement("a");o.href=location.href,o.protocol==="https:"?l=o.host.replace(/:443$/,""):o.protocol==="http:"?l=o.host.replace(/:80$/,""):l=o.host;var u=o.protocol+"//"+l;return u===i?!0:this.verifyDomain?this.verifyDomain(i):!0},r.prototype.namespaceEvent=function(i){return this.channel?"".concat(this.channel,":").concat(i):i},r.Promise=a,r}();m.Framebus=n},{"./lib":59}],52:[function(e,d,m){"use strict";var t=e("./lib"),a=e("./framebus");(0,t.attach)(),d.exports=a.Framebus},{"./framebus":51,"./lib":59}],53:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.detach=m.attach=void 0;var t=e("./"),a=!1;function n(){a||typeof window>"u"||(a=!0,window.addEventListener("message",t.onMessage,!1))}m.attach=n;function r(){a=!1,window.removeEventListener("message",t.onMessage,!1)}m.detach=r},{"./":59}],54:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.broadcastToChildWindows=void 0;var t=e("./");function a(n,r,i){for(var l=t.childWindows.length-1;l>=0;l--){var o=t.childWindows[l];o.closed?t.childWindows.splice(l,1):i!==o&&(0,t.broadcast)(n,{origin:r,frame:o.top})}}m.broadcastToChildWindows=a},{"./":59}],55:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.broadcast=void 0;var t=e("./");function a(n,r){var i=0,l,o=r.origin,u=r.frame;try{for(u.postMessage(n,o),(0,t.hasOpener)(u)&&u.opener.top!==window.top&&a(n,{origin:o,frame:u.opener.top});l=u.frames[i];)a(n,{origin:o,frame:l}),i++}catch{}}m.broadcast=a},{"./":59}],56:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.subscribers=m.childWindows=m.prefix=void 0,m.prefix="/*framebus*/",m.childWindows=[],m.subscribers={}},{}],57:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.dispatch=void 0;var t=e("./");function a(n,r,i,l,o){if(t.subscribers[n]&&t.subscribers[n][r]){var u=[];i&&u.push(i),l&&u.push(l);for(var p=0;p<t.subscribers[n][r].length;p++)t.subscribers[n][r][p].apply(o,u)}}m.dispatch=a},{"./":59}],58:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.hasOpener=void 0;function t(a){return!(a.top!==a||a.opener==null||a.opener===a||a.opener.closed===!0)}m.hasOpener=t},{}],59:[function(e,d,m){"use strict";var t=this&&this.__createBinding||(Object.create?function(n,r,i,l){l===void 0&&(l=i);var o=Object.getOwnPropertyDescriptor(r,i);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(n,l,o)}:function(n,r,i,l){l===void 0&&(l=i),n[l]=r[i]}),a=this&&this.__exportStar||function(n,r){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,n,i)};Object.defineProperty(m,"__esModule",{value:!0}),a(e("./attach"),m),a(e("./broadcast-to-child-windows"),m),a(e("./broadcast"),m),a(e("./constants"),m),a(e("./dispatch"),m),a(e("./has-opener"),m),a(e("./is-not-string"),m),a(e("./message"),m),a(e("./package-payload"),m),a(e("./send-message"),m),a(e("./subscribe-replier"),m),a(e("./subscription-args-invalid"),m),a(e("./types"),m),a(e("./unpack-payload"),m)},{"./attach":53,"./broadcast":55,"./broadcast-to-child-windows":54,"./constants":56,"./dispatch":57,"./has-opener":58,"./is-not-string":60,"./message":61,"./package-payload":62,"./send-message":63,"./subscribe-replier":64,"./subscription-args-invalid":65,"./types":66,"./unpack-payload":67}],60:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.isntString=void 0;function t(a){return typeof a!="string"}m.isntString=t},{}],61:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.onMessage=void 0;var t=e("./");function a(n){if(!(0,t.isntString)(n.data)){var r=(0,t.unpackPayload)(n);if(r){var i=r.eventData,l=r.reply;(0,t.dispatch)("*",r.event,i,l,n),(0,t.dispatch)(n.origin,r.event,i,l,n),(0,t.broadcastToChildWindows)(n.data,r.origin,n.source)}}}m.onMessage=a},{"./":59}],62:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.packagePayload=void 0;var t=e("./");function a(n,r,i,l){var o,u={event:n,origin:r};typeof l=="function"&&(u.reply=(0,t.subscribeReplier)(l,r)),u.eventData=i;try{o=t.prefix+JSON.stringify(u)}catch(p){throw new Error("Could not stringify event: ".concat(p.message))}return o}m.packagePayload=a},{"./":59}],63:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.sendMessage=void 0;function t(a,n,r){try{a.postMessage(n,r)}catch{}}m.sendMessage=t},{}],64:[function(e,d,m){"use strict";var t=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(m,"__esModule",{value:!0}),m.subscribeReplier=void 0;var a=e("../framebus"),n=t(e("@braintree/uuid"));function r(i,l){var o=(0,n.default)();function u(p,E){i(p,E),a.Framebus.target({origin:l}).off(o,u)}return a.Framebus.target({origin:l}).on(o,u),o}m.subscribeReplier=r},{"../framebus":51,"@braintree/uuid":39}],65:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.subscriptionArgsInvalid=void 0;var t=e("./");function a(n,r,i){return(0,t.isntString)(n)||typeof r!="function"?!0:(0,t.isntString)(i)}m.subscriptionArgsInvalid=a},{"./":59}],66:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0})},{}],67:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.unpackPayload=void 0;var t=e("./");function a(n){var r;if(n.data.slice(0,t.prefix.length)!==t.prefix)return!1;try{r=JSON.parse(n.data.slice(t.prefix.length))}catch{return!1}if(r.reply){var i=n.origin,l=n.source,o=r.reply;r.reply=function(p){if(l){var E=(0,t.packagePayload)(o,i,p);E&&l.postMessage(E,i)}}}return r}m.unpackPayload=a},{"./":59}],68:[function(e,d,m){"use strict";function t(s){var c=this.constructor;return this.then(function(y){return c.resolve(s()).then(function(){return y})},function(y){return c.resolve(s()).then(function(){return c.reject(y)})})}function a(s){var c=this;return new c(function(y,h){if(!(s&&typeof s.length<"u"))return h(new TypeError(typeof s+" "+s+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var T=Array.prototype.slice.call(s);if(T.length===0)return y([]);var O=T.length;function _(f,N){if(N&&(typeof N=="object"||typeof N=="function")){var P=N.then;if(typeof P=="function"){P.call(N,function(b){_(f,b)},function(b){T[f]={status:"rejected",reason:b},--O===0&&y(T)});return}}T[f]={status:"fulfilled",value:N},--O===0&&y(T)}for(var I=0;I<T.length;I++)_(I,T[I])})}var n=setTimeout;function r(s){return!!(s&&typeof s.length<"u")}function i(){}function l(s,c){return function(){s.apply(c,arguments)}}function o(s){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if(typeof s!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],g(s,this)}function u(s,c){for(;s._state===3;)s=s._value;if(s._state===0){s._deferreds.push(c);return}s._handled=!0,o._immediateFn(function(){var y=s._state===1?c.onFulfilled:c.onRejected;if(y===null){(s._state===1?p:E)(c.promise,s._value);return}var h;try{h=y(s._value)}catch(T){E(c.promise,T);return}p(c.promise,h)})}function p(s,c){try{if(c===s)throw new TypeError("A promise cannot be resolved with itself.");if(c&&(typeof c=="object"||typeof c=="function")){var y=c.then;if(c instanceof o){s._state=3,s._value=c,v(s);return}else if(typeof y=="function"){g(l(y,c),s);return}}s._state=1,s._value=c,v(s)}catch(h){E(s,h)}}function E(s,c){s._state=2,s._value=c,v(s)}function v(s){s._state===2&&s._deferreds.length===0&&o._immediateFn(function(){s._handled||o._unhandledRejectionFn(s._value)});for(var c=0,y=s._deferreds.length;c<y;c++)u(s,s._deferreds[c]);s._deferreds=null}function A(s,c,y){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof c=="function"?c:null,this.promise=y}function g(s,c){var y=!1;try{s(function(h){y||(y=!0,p(c,h))},function(h){y||(y=!0,E(c,h))})}catch(h){if(y)return;y=!0,E(c,h)}}o.prototype.catch=function(s){return this.then(null,s)},o.prototype.then=function(s,c){var y=new this.constructor(i);return u(this,new A(s,c,y)),y},o.prototype.finally=t,o.all=function(s){return new o(function(c,y){if(!r(s))return y(new TypeError("Promise.all accepts an array"));var h=Array.prototype.slice.call(s);if(h.length===0)return c([]);var T=h.length;function O(I,f){try{if(f&&(typeof f=="object"||typeof f=="function")){var N=f.then;if(typeof N=="function"){N.call(f,function(P){O(I,P)},y);return}}h[I]=f,--T===0&&c(h)}catch(P){y(P)}}for(var _=0;_<h.length;_++)O(_,h[_])})},o.allSettled=a,o.resolve=function(s){return s&&typeof s=="object"&&s.constructor===o?s:new o(function(c){c(s)})},o.reject=function(s){return new o(function(c,y){y(s)})},o.race=function(s){return new o(function(c,y){if(!r(s))return y(new TypeError("Promise.race accepts an array"));for(var h=0,T=s.length;h<T;h++)o.resolve(s[h]).then(c,y)})},o._immediateFn=typeof setImmediate=="function"&&function(s){setImmediate(s)}||function(s){n(s,0)},o._unhandledRejectionFn=function(c){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",c)},d.exports=o},{}],69:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.isIos=m.isIE9=m.isSamsungBrowser=m.isAndroidChrome=m.isKitKatWebview=void 0;var t=typeof window<"u"&&window.navigator&&window.navigator.userAgent,a=e("@braintree/browser-detection/is-android"),n=e("@braintree/browser-detection/is-chrome-os"),r=e("@braintree/browser-detection/is-chrome"),i=e("@braintree/browser-detection/is-ios");m.isIos=i;var l=e("@braintree/browser-detection/is-ie9");m.isIE9=l;var o=/Version\/\d\.\d* Chrome\/\d*\.0\.0\.0/;function u(A){return!r(A)&&A.indexOf("Samsung")>-1}function p(A){return A===void 0&&(A=t),a(A)&&o.test(A)}m.isKitKatWebview=p;function E(A){return A===void 0&&(A=t),(a(A)||n(A))&&r(A)}m.isAndroidChrome=E;function v(A){return A===void 0&&(A=t),/SamsungBrowser/.test(A)||u(A)}m.isSamsungBrowser=v},{"@braintree/browser-detection/is-android":22,"@braintree/browser-detection/is-chrome":24,"@braintree/browser-detection/is-chrome-os":23,"@braintree/browser-detection/is-ie9":26,"@braintree/browser-detection/is-ios":30}],70:[function(e,d,m){"use strict";var t=e("./lib/device");d.exports=function(){return!(0,t.isSamsungBrowser)()}},{"./lib/device":69}],71:[function(e,d,m){d.exports=e("./dist/supports-input-formatting")},{"./dist/supports-input-formatting":70}],72:[function(e,d,m){"use strict";var t=e("../lib/braintree-error"),a=e("./errors"),n=e("../lib/assign").assign,r=e("../lib/methods"),i=e("../lib/convert-methods-to-error"),l=e("@braintree/wrap-promise");function o(u){this._client=u.client}o.prototype.getRewardsBalance=function(u){var p=u.nonce,E;return p?(E=n({_meta:{source:"american-express"},paymentMethodNonce:p},u),delete E.nonce,this._client.request({method:"get",endpoint:"payment_methods/amex_rewards_balance",data:E}).catch(function(v){return Promise.reject(new t({type:a.AMEX_NETWORK_ERROR.type,code:a.AMEX_NETWORK_ERROR.code,message:"A network error occurred when getting the American Express rewards balance.",details:{originalError:v}}))})):Promise.reject(new t({type:a.AMEX_NONCE_REQUIRED.type,code:a.AMEX_NONCE_REQUIRED.code,message:"getRewardsBalance must be called with a nonce."}))},o.prototype.getExpressCheckoutProfile=function(u){return u.nonce?this._client.request({method:"get",endpoint:"payment_methods/amex_express_checkout_cards/"+u.nonce,data:{_meta:{source:"american-express"},paymentMethodNonce:u.nonce}}).catch(function(p){return Promise.reject(new t({type:a.AMEX_NETWORK_ERROR.type,code:a.AMEX_NETWORK_ERROR.code,message:"A network error occurred when getting the American Express Checkout nonce profile.",details:{originalError:p}}))}):Promise.reject(new t({type:a.AMEX_NONCE_REQUIRED.type,code:a.AMEX_NONCE_REQUIRED.code,message:"getExpressCheckoutProfile must be called with a nonce."}))},o.prototype.teardown=function(){return i(this,r(o.prototype)),Promise.resolve()},d.exports=l.wrapPrototype(o)},{"../lib/assign":121,"../lib/braintree-error":124,"../lib/convert-methods-to-error":127,"../lib/methods":155,"./errors":73,"@braintree/wrap-promise":43}],73:[function(e,d,m){"use strict";var t=e("../lib/braintree-error");d.exports={AMEX_NONCE_REQUIRED:{type:t.types.MERCHANT,code:"AMEX_NONCE_REQUIRED"},AMEX_NETWORK_ERROR:{type:t.types.NETWORK,code:"AMEX_NETWORK_ERROR"}}},{"../lib/braintree-error":124}],74:[function(e,d,m){"use strict";var t=e("./american-express"),a=e("../lib/basic-component-verification"),n=e("../lib/create-deferred-client"),r=e("../lib/create-assets-url"),i="3.102.0",l=e("@braintree/wrap-promise");function o(u){var p="American Express";return a.verify({name:p,client:u.client,authorization:u.authorization}).then(function(){return n.create({authorization:u.authorization,client:u.client,debug:u.debug,assetsUrl:r.create(u.authorization),name:p})}).then(function(E){return u.client=E,new t(u)})}d.exports={create:l(o),VERSION:i}},{"../lib/basic-component-verification":122,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./american-express":72,"@braintree/wrap-promise":43}],75:[function(e,d,m){"use strict";var t=e("../lib/braintree-error"),a=e("../lib/analytics"),n=e("./errors"),r=e("../lib/methods"),i=e("../lib/convert-methods-to-error"),l=e("@braintree/wrap-promise");function o(u){this._instantiatedWithClient=!u.useDeferredClient,this._client=u.client,this._createPromise=u.createPromise,this._client&&this._setMerchantIdentifier()}o.prototype._waitForClient=function(){return this._client?Promise.resolve():this._createPromise.then(function(u){this._client=u,this._setMerchantIdentifier()}.bind(this))},o.prototype._setMerchantIdentifier=function(){var u=this._client.getConfiguration().gatewayConfiguration.applePayWeb;u&&Object.defineProperty(this,"merchantIdentifier",{value:u.merchantIdentifier,configurable:!1,writable:!1})},o.prototype.createPaymentRequest=function(u){return this._instantiatedWithClient?this._createPaymentRequestSynchronously(u):this._waitForClient().then(function(){return this._createPaymentRequestSynchronously(u)}.bind(this))},o.prototype._createPaymentRequestSynchronously=function(u){var p=this._client.getConfiguration().gatewayConfiguration.applePayWeb,E={countryCode:p.countryCode,currencyCode:p.currencyCode,merchantCapabilities:p.merchantCapabilities||["supports3DS"],supportedNetworks:p.supportedNetworks.map(function(v){return v==="mastercard"?"masterCard":v})};return Object.assign({},E,u)},o.prototype.performValidation=function(u){var p=this;return!u||!u.validationURL?Promise.reject(new t(n.APPLE_PAY_VALIDATION_URL_REQUIRED)):this._waitForClient().then(function(){var E={validationUrl:u.validationURL,domainName:u.domainName||window.location.hostname,merchantIdentifier:u.merchantIdentifier||p.merchantIdentifier};return u.displayName!=null&&(E.displayName=u.displayName),p._client.request({method:"post",endpoint:"apple_pay_web/sessions",data:{_meta:{source:"apple-pay"},applePayWebSession:E}})}).then(function(E){return a.sendEvent(p._client,"applepay.performValidation.succeeded"),Promise.resolve(E)}).catch(function(E){return a.sendEvent(p._client,"applepay.performValidation.failed"),E.code==="CLIENT_REQUEST_ERROR"?Promise.reject(new t({type:n.APPLE_PAY_MERCHANT_VALIDATION_FAILED.type,code:n.APPLE_PAY_MERCHANT_VALIDATION_FAILED.code,message:n.APPLE_PAY_MERCHANT_VALIDATION_FAILED.message,details:{originalError:E.details.originalError}})):Promise.reject(new t({type:n.APPLE_PAY_MERCHANT_VALIDATION_NETWORK.type,code:n.APPLE_PAY_MERCHANT_VALIDATION_NETWORK.code,message:n.APPLE_PAY_MERCHANT_VALIDATION_NETWORK.message,details:{originalError:E}}))})},o.prototype.tokenize=function(u){var p=this;return u.token?this._waitForClient().then(function(){return p._client.request({method:"post",endpoint:"payment_methods/apple_payment_tokens",data:{_meta:{source:"apple-pay"},applePaymentToken:Object.assign({},u.token,{paymentData:btoa(JSON.stringify(u.token.paymentData))})}})}).then(function(E){return a.sendEvent(p._client,"applepay.tokenize.succeeded"),Promise.resolve(E.applePayCards[0])}).catch(function(E){return a.sendEvent(p._client,"applepay.tokenize.failed"),Promise.reject(new t({type:n.APPLE_PAY_TOKENIZATION.type,code:n.APPLE_PAY_TOKENIZATION.code,message:n.APPLE_PAY_TOKENIZATION.message,details:{originalError:E}}))}):Promise.reject(new t(n.APPLE_PAY_PAYMENT_TOKEN_REQUIRED))},o.prototype.teardown=function(){return i(this,r(o.prototype)),Promise.resolve()},d.exports=l.wrapPrototype(o)},{"../lib/analytics":119,"../lib/braintree-error":124,"../lib/convert-methods-to-error":127,"../lib/methods":155,"./errors":76,"@braintree/wrap-promise":43}],76:[function(e,d,m){"use strict";var t=e("../lib/braintree-error");d.exports={APPLE_PAY_NOT_ENABLED:{type:t.types.MERCHANT,code:"APPLE_PAY_NOT_ENABLED",message:"Apple Pay is not enabled for this merchant."},APPLE_PAY_VALIDATION_URL_REQUIRED:{type:t.types.MERCHANT,code:"APPLE_PAY_VALIDATION_URL_REQUIRED",message:"performValidation must be called with a validationURL."},APPLE_PAY_MERCHANT_VALIDATION_NETWORK:{type:t.types.NETWORK,code:"APPLE_PAY_MERCHANT_VALIDATION_NETWORK",message:"A network error occurred when validating the Apple Pay merchant."},APPLE_PAY_MERCHANT_VALIDATION_FAILED:{type:t.types.MERCHANT,code:"APPLE_PAY_MERCHANT_VALIDATION_FAILED",message:"Make sure you have registered your domain name in the Braintree Control Panel."},APPLE_PAY_PAYMENT_TOKEN_REQUIRED:{type:t.types.MERCHANT,code:"APPLE_PAY_PAYMENT_TOKEN_REQUIRED",message:"tokenize must be called with a payment token."},APPLE_PAY_TOKENIZATION:{type:t.types.NETWORK,code:"APPLE_PAY_TOKENIZATION",message:"A network error occurred when processing the Apple Pay payment."}}},{"../lib/braintree-error":124}],77:[function(e,d,m){"use strict";var t=e("./apple-pay"),a=e("../lib/analytics"),n=e("../lib/braintree-error"),r=e("../lib/basic-component-verification"),i=e("../lib/create-assets-url"),l=e("../lib/create-deferred-client"),o=e("./errors"),u="3.102.0",p=e("@braintree/wrap-promise");function E(v){var A="Apple Pay";return r.verify({name:A,client:v.client,authorization:v.authorization}).then(function(){var g,s=l.create({authorization:v.authorization,client:v.client,debug:v.debug,assetsUrl:i.create(v.authorization),name:A}).then(function(c){return c.getConfiguration().gatewayConfiguration.applePayWeb?(a.sendEvent(c,"applepay.initialized"),c):Promise.reject(new n(o.APPLE_PAY_NOT_ENABLED))});return v.createPromise=s,g=new t(v),v.useDeferredClient?g:s.then(function(c){return g._client=c,g})})}d.exports={create:p(E),VERSION:u}},{"../lib/analytics":119,"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./apple-pay":75,"./errors":76,"@braintree/wrap-promise":43}],78:[function(e,d,m){"use strict";var t=e("./constants").BRAINTREE_VERSION,a=e("./request/graphql"),n=e("./request"),r=e("../lib/is-verified-domain"),i=e("../lib/braintree-error"),l=e("../lib/convert-to-braintree-error"),o=e("./get-configuration").getConfiguration,u=e("../lib/create-authorization-data"),p=e("../lib/add-metadata"),E=e("@braintree/wrap-promise"),v=e("../lib/once"),A=e("../lib/deferred"),g=e("../lib/assign").assign,s=e("../lib/analytics"),c=e("./errors"),y=e("../lib/constants").VERSION,h=e("../lib/constants").GRAPHQL_URLS,T=e("../lib/methods"),O=e("../lib/convert-methods-to-error"),_=e("../lib/assets"),I=e("../lib/constants").FRAUDNET_FNCLS,f=e("../lib/constants").FRAUDNET_SOURCE,N=e("../lib/constants").FRAUDNET_URL,P={};function b(L){var C,R;if(L=L||{},C=JSON.stringify(L),R=L.gatewayConfiguration,!R)throw new i(c.CLIENT_MISSING_GATEWAY_CONFIGURATION);if(["assetsUrl","clientApiUrl","configUrl"].forEach(function(w){if(w in R&&!r(R[w]))throw new i({type:c.CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN.type,code:c.CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN.code,message:w+" property is on an invalid domain."})}),this.getConfiguration=function(){return JSON.parse(C)},this._request=n,this._configuration=this.getConfiguration(),this._clientApiBaseUrl=R.clientApiUrl+"/v1/",R.graphQL){if(!r(R.graphQL.url))throw new i({type:c.CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN.type,code:c.CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN.code,message:"graphQL.url property is on an invalid domain."});this._graphQL=new a({graphQL:R.graphQL})}}b.initialize=function(L){var C,R,w=P[L.authorization];if(w)return s.sendEvent(w,"custom.client.load.cached"),w;try{R=u(L.authorization)}catch{return Promise.reject(new i(c.CLIENT_INVALID_AUTHORIZATION))}return w=o(R).then(function(B){return L.debug&&(B.isDebug=!0),B.authorization=L.authorization,C=new b(B),C}),P[L.authorization]=w,s.sendEvent(w,"custom.client.load.initialized"),w.then(function(B){return s.sendEvent(C,"custom.client.load.succeeded"),B}).catch(function(B){return delete P[L.authorization],Promise.reject(B)})},b.clearCache=function(){P={}},b.prototype._findOrCreateFraudnetJSON=function(L){var C=document.querySelector('script[fncls="'+I+'"]'),R,w,B,H;C||(C=document.body.appendChild(document.createElement("script")),C.type="application/json",C.setAttribute("fncls",I)),R=this.getConfiguration(),w={rda_tenant:"bt_card",mid:R.gatewayConfiguration.merchantId},B=R.authorizationFingerprint,B&&B.split("&").forEach(function(K){var Y=K.split("=");Y[0]==="customer_id"&&Y.length>1&&(w.cid=Y[1])}),H={f:L.substr(0,32),fp:w,bu:!1,s:f},C.text=JSON.stringify(H)},b.prototype.request=function(L,C){var R=this,w=new Promise(function(B,H){var K,Y,G,U,k=!!(L.endpoint==="payment_methods/credit_cards"&&R.getConfiguration().gatewayConfiguration.creditCards.collectDeviceData);if(L.api!=="graphQLApi"&&(L.method?L.endpoint||(K="options.endpoint"):K="options.method"),K)throw new i({type:c.CLIENT_OPTION_REQUIRED.type,code:c.CLIENT_OPTION_REQUIRED.code,message:K+" is required when making a request."});if("api"in L?Y=L.api:Y="clientApi",U={method:L.method,graphQL:R._graphQL,timeout:L.timeout,metadata:R._configuration.analyticsMetadata},Y==="clientApi")G=R._clientApiBaseUrl,U.data=p(R._configuration,L.data);else if(Y==="graphQLApi")G=h[R._configuration.gatewayConfiguration.environment],L.endpoint="",U.method="post",U.data=g({clientSdkMetadata:{platform:R._configuration.analyticsMetadata.platform,source:R._configuration.analyticsMetadata.source,integration:R._configuration.analyticsMetadata.integration,sessionId:R._configuration.analyticsMetadata.sessionId,version:y}},L.data),U.headers=M(R._configuration);else throw new i({type:c.CLIENT_OPTION_INVALID.type,code:c.CLIENT_OPTION_INVALID.code,message:"options.api is invalid."});U.url=G+L.endpoint,U.sendAnalyticsEvent=function(x){s.sendEvent(R,x)},R._request(U,function(x,z,X){var Z,j;if(j=D(X,x),j){H(j);return}if(Y==="graphQLApi"&&z.errors){H(l(z.errors,{type:c.CLIENT_GRAPHQL_REQUEST_ERROR.type,code:c.CLIENT_GRAPHQL_REQUEST_ERROR.code,message:c.CLIENT_GRAPHQL_REQUEST_ERROR.message}));return}Z=g({_httpStatus:X},z),k&&Z.creditCards&&Z.creditCards.length>0&&(R._findOrCreateFraudnetJSON(Z.creditCards[0].nonce),_.loadScript({src:N,forceScriptReload:!0})),B(Z)})});if(typeof C=="function"){C=v(A(C)),w.then(function(B){C(null,B,B._httpStatus)}).catch(function(B){var H=B&&B.details&&B.details.httpStatus;C(B,null,H)});return}return w};function D(L,C){var R;if(L===-1?R=new i(c.CLIENT_REQUEST_TIMEOUT):L===401?R=new i(c.CLIENT_AUTHORIZATION_INVALID):L===403?R=new i(c.CLIENT_AUTHORIZATION_INSUFFICIENT):L===429?R=new i(c.CLIENT_RATE_LIMITED):L>=500?R=new i(c.CLIENT_GATEWAY_NETWORK):(L<200||L>=400)&&(R=l(C,{type:c.CLIENT_REQUEST_ERROR.type,code:c.CLIENT_REQUEST_ERROR.code,message:c.CLIENT_REQUEST_ERROR.message})),R)return R.details=R.details||{},R.details.httpStatus=L,R}b.prototype.toJSON=function(){return this.getConfiguration()},b.prototype.getVersion=function(){return y},b.prototype.teardown=E(function(){var L=this;return delete P[L.getConfiguration().authorization],O(L,T(b.prototype)),Promise.resolve()});function M(L){var C=L.authorizationFingerprint||L.authorization;return{Authorization:"Bearer "+C,"Braintree-Version":t}}d.exports=b},{"../lib/add-metadata":118,"../lib/analytics":119,"../lib/assets":120,"../lib/assign":121,"../lib/braintree-error":124,"../lib/constants":126,"../lib/convert-methods-to-error":127,"../lib/convert-to-braintree-error":128,"../lib/create-authorization-data":130,"../lib/deferred":132,"../lib/is-verified-domain":153,"../lib/methods":155,"../lib/once":156,"./constants":79,"./errors":80,"./get-configuration":81,"./request":92,"./request/graphql":90,"@braintree/wrap-promise":43}],79:[function(e,d,m){"use strict";d.exports={BRAINTREE_VERSION:"2018-05-10"}},{}],80:[function(e,d,m){"use strict";var t=e("../lib/braintree-error");d.exports={CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN:{type:t.types.MERCHANT,code:"CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN"},CLIENT_OPTION_REQUIRED:{type:t.types.MERCHANT,code:"CLIENT_OPTION_REQUIRED"},CLIENT_OPTION_INVALID:{type:t.types.MERCHANT,code:"CLIENT_OPTION_INVALID"},CLIENT_MISSING_GATEWAY_CONFIGURATION:{type:t.types.INTERNAL,code:"CLIENT_MISSING_GATEWAY_CONFIGURATION",message:"Missing gatewayConfiguration."},CLIENT_INVALID_AUTHORIZATION:{type:t.types.MERCHANT,code:"CLIENT_INVALID_AUTHORIZATION",message:"Authorization is invalid. Make sure your client token or tokenization key is valid."},CLIENT_GATEWAY_NETWORK:{type:t.types.NETWORK,code:"CLIENT_GATEWAY_NETWORK",message:"Cannot contact the gateway at this time."},CLIENT_REQUEST_TIMEOUT:{type:t.types.NETWORK,code:"CLIENT_REQUEST_TIMEOUT",message:"Request timed out waiting for a reply."},CLIENT_REQUEST_ERROR:{type:t.types.NETWORK,code:"CLIENT_REQUEST_ERROR",message:"There was a problem with your request."},CLIENT_GRAPHQL_REQUEST_ERROR:{type:t.types.NETWORK,code:"CLIENT_GRAPHQL_REQUEST_ERROR",message:"There was a problem with your request."},CLIENT_RATE_LIMITED:{type:t.types.MERCHANT,code:"CLIENT_RATE_LIMITED",message:"You are being rate-limited; please try again in a few minutes."},CLIENT_AUTHORIZATION_INSUFFICIENT:{type:t.types.MERCHANT,code:"CLIENT_AUTHORIZATION_INSUFFICIENT",message:"The authorization used has insufficient privileges."},CLIENT_AUTHORIZATION_INVALID:{type:t.types.MERCHANT,code:"CLIENT_AUTHORIZATION_INVALID",message:"Either the client token has expired and a new one should be generated or the tokenization key has been deactivated or deleted."}}},{"../lib/braintree-error":124}],81:[function(e,d,m){"use strict";var t=e("../lib/braintree-error"),a=e("@braintree/wrap-promise"),n=e("./request"),r=e("@braintree/uuid"),i=e("../lib/constants"),l=e("./errors"),o=e("./request/graphql"),u=e("../lib/constants").GRAPHQL_URLS,p=e("../lib/is-date-string-before-or-on"),E=e("./constants").BRAINTREE_VERSION;function v(A){return new Promise(function(g,s){var c,y,h,T,O=r(),_={merchantAppId:window.location.host,platform:i.PLATFORM,sdkVersion:i.VERSION,source:i.SOURCE,integration:i.INTEGRATION,integrationType:i.INTEGRATION,sessionId:O};y=A.attrs,h=A.configUrl,y._meta=_,y.braintreeLibraryVersion=i.BRAINTREE_LIBRARY_VERSION,y.configVersion="3",T={url:h,method:"GET",data:y},y.authorizationFingerprint&&A.graphQL?(p(A.graphQL.date,E)&&(T.graphQL=new o({graphQL:{url:A.graphQL.url,features:["configuration"]}})),T.metadata=_):y.tokenizationKey&&(T.graphQL=new o({graphQL:{url:u[A.environment],features:["configuration"]}}),T.metadata=_),n(T,function(I,f,N){var P;if(I){N===403?P=l.CLIENT_AUTHORIZATION_INSUFFICIENT:N===401?P=l.CLIENT_AUTHORIZATION_INVALID:P=l.CLIENT_GATEWAY_NETWORK,s(new t({type:P.type,code:P.code,message:P.message,details:{originalError:I}}));return}c={authorizationType:y.tokenizationKey?"TOKENIZATION_KEY":"CLIENT_TOKEN",authorizationFingerprint:y.authorizationFingerprint,analyticsMetadata:_,gatewayConfiguration:f},g(c)})})}d.exports={getConfiguration:a(v)}},{"../lib/braintree-error":124,"../lib/constants":126,"../lib/is-date-string-before-or-on":151,"./constants":79,"./errors":80,"./request":92,"./request/graphql":90,"@braintree/uuid":39,"@braintree/wrap-promise":43}],82:[function(e,d,m){"use strict";var t=e("../lib/braintree-error"),a=e("./client"),n="3.102.0",r=e("@braintree/wrap-promise"),i=e("../lib/errors");function l(o){return o.authorization?a.initialize(o):Promise.reject(new t({type:i.INSTANTIATION_OPTION_REQUIRED.type,code:i.INSTANTIATION_OPTION_REQUIRED.code,message:"options.authorization is required when instantiating a client."}))}d.exports={create:r(l),VERSION:n}},{"../lib/braintree-error":124,"../lib/errors":135,"./client":78,"@braintree/wrap-promise":43}],83:[function(e,d,m){"use strict";var t=e("../../lib/querystring"),a=e("../../lib/assign").assign,n=e("./prep-body"),r=e("./parse-body"),i=e("./xhr"),l=i.isAvailable,o=e("./graphql/request"),u=e("./default-request"),p=1,E=408;function v(c){return!c||c===E}function A(c){var y=!c.data&&c.errors&&c.errors[0]&&c.errors[0].extensions&&c.errors[0].extensions.errorClass;return y==="UNKNOWN"||y==="INTERNAL"}function g(c,y,h){var T,O,_,I,f,N,P,b=c.url,D=c.graphQL,M=c.timeout,L=i.getRequestObject(),C=h,R=!!(D&&D.isGraphQLRequest(b,c.data));c.headers=a({"Content-Type":"application/json"},c.headers),R?_=new o(c):_=new u(c),b=_.getUrl(),I=_.getBody(),f=_.getMethod(),N=_.getHeaders(),f==="GET"&&(b=t.queryify(b,I),I=null),l?L.onreadystatechange=function(){if(L.readyState===4){if(L.status===0&&R){delete c.graphQL,g(c,y,h);return}if(P=r(L.responseText),O=_.adaptResponseBody(P),T=_.determineStatus(L.status,P),T>=400||T<200){if(R&&A(P)){delete c.graphQL,g(c,y,h);return}if(y<p&&v(T)){y++,g(c,y,h);return}C(O||"error",null,T||500)}else C(null,O,T)}}:(c.headers&&(b=t.queryify(b,N)),L.onload=function(){C(null,r(L.responseText),L.status)},L.onerror=function(){C("error",null,500)},L.onprogress=function(){},L.ontimeout=function(){C("timeout",null,-1)});try{L.open(f,b,!0)}catch(w){if(!R)throw w;delete c.graphQL,g(c,y,h);return}L.timeout=M,l&&Object.keys(N).forEach(function(w){L.setRequestHeader(w,N[w])});try{L.send(n(f,I))}catch{}}function s(c,y){g(c,0,y)}d.exports={request:s}},{"../../lib/assign":121,"../../lib/querystring":157,"./default-request":84,"./graphql/request":91,"./parse-body":93,"./prep-body":94,"./xhr":95}],84:[function(e,d,m){"use strict";function t(a){this._url=a.url,this._data=a.data,this._method=a.method,this._headers=a.headers}t.prototype.getUrl=function(){return this._url},t.prototype.getBody=function(){return this._data},t.prototype.getMethod=function(){return this._method},t.prototype.getHeaders=function(){return this._headers},t.prototype.adaptResponseBody=function(a){return a},t.prototype.determineStatus=function(a){return a},d.exports=t},{}],85:[function(e,d,m){"use strict";var t=e("./error"),a=e("../../../../lib/assign").assign,n={creditCard:{AMERICAN_EXPRESS:"American Express",DISCOVER:"Discover",INTERNATIONAL_MAESTRO:"Maestro",JCB:"JCB",MASTERCARD:"MasterCard",SOLO:"Solo",UK_MAESTRO:"UK Maestro",UNION_PAY:"UnionPay",VISA:"Visa",ELO:"Elo",HIPER:"Hiper",HIPERCARD:"Hipercard"},applePayWeb:{VISA:"visa",MASTERCARD:"mastercard",DISCOVER:"discover",AMERICAN_EXPRESS:"amex",INTERNATIONAL_MAESTRO:"maestro",ELO:"elo"},visaCheckout:{VISA:"Visa",MASTERCARD:"MasterCard",DISCOVER:"Discover",AMERICAN_EXPRESS:"American Express"},googlePay:{VISA:"visa",MASTERCARD:"mastercard",DISCOVER:"discover",AMERICAN_EXPRESS:"amex",INTERNATIONAL_MAESTRO:"maestro",ELO:"elo"},masterpass:{VISA:"visa",MASTERCARD:"master",DISCOVER:"discover",AMERICAN_EXPRESS:"amex",DINERS:"diners",INTERNATIONAL_MAESTRO:"maestro",JCB:"jcb"}};function r(o,u){var p;return o.data&&!o.errors?p=i(o,u):p=t(o),p}function i(o,u){var p=o.data.clientConfiguration,E;return E={environment:p.environment.toLowerCase(),clientApiUrl:p.clientApiUrl,assetsUrl:p.assetsUrl,analytics:{url:p.analyticsUrl},merchantId:p.merchantId,venmo:"off"},p.supportedFeatures&&(E.graphQL={url:u._graphQL._config.url,features:p.supportedFeatures.map(function(v){return v.toLowerCase()})}),p.braintreeApi&&(E.braintreeApi=p.braintreeApi),p.applePayWeb&&(E.applePayWeb=p.applePayWeb,E.applePayWeb.supportedNetworks=l(p.applePayWeb.supportedCardBrands,n.applePayWeb),delete E.applePayWeb.supportedCardBrands),p.ideal&&(E.ideal=p.ideal),p.kount&&(E.kount={kountMerchantId:p.kount.merchantId}),p.creditCard?(E.challenges=p.creditCard.challenges.map(function(v){return v.toLowerCase()}),E.creditCards={supportedCardTypes:l(p.creditCard.supportedCardBrands,n.creditCard)},E.threeDSecureEnabled=p.creditCard.threeDSecureEnabled,E.threeDSecure=p.creditCard.threeDSecure):(E.challenges=[],E.creditCards={supportedCardTypes:[]},E.threeDSecureEnabled=!1),p.googlePay&&(E.androidPay={displayName:p.googlePay.displayName,enabled:!0,environment:p.googlePay.environment.toLowerCase(),googleAuthorizationFingerprint:p.googlePay.googleAuthorization,paypalClientId:p.googlePay.paypalClientId,supportedNetworks:l(p.googlePay.supportedCardBrands,n.googlePay)}),p.venmo&&(E.payWithVenmo={merchantId:p.venmo.merchantId,accessToken:p.venmo.accessToken,environment:p.venmo.environment.toLowerCase(),enrichedCustomerDataEnabled:p.venmo.enrichedCustomerDataEnabled}),p.paypal?(E.paypalEnabled=!0,E.paypal=a({},p.paypal),E.paypal.currencyIsoCode=E.paypal.currencyCode,E.paypal.environment=E.paypal.environment.toLowerCase(),delete E.paypal.currencyCode):E.paypalEnabled=!1,p.unionPay&&(E.unionPay={enabled:!0,merchantAccountId:p.unionPay.merchantAccountId}),p.visaCheckout&&(E.visaCheckout={apikey:p.visaCheckout.apiKey,encryptionKey:p.visaCheckout.encryptionKey,externalClientId:p.visaCheckout.externalClientId,supportedCardTypes:l(p.visaCheckout.supportedCardBrands,n.visaCheckout)}),p.masterpass&&(E.masterpass={merchantCheckoutId:p.masterpass.merchantCheckoutId,supportedNetworks:l(p.masterpass.supportedCardBrands,n.masterpass)}),p.usBankAccount&&(E.usBankAccount={routeId:p.usBankAccount.routeId,plaid:{publicKey:p.usBankAccount.plaidPublicKey}}),E}function l(o,u){return o.reduce(function(p,E){return u.hasOwnProperty(E)?p.concat(u[E]):p},[])}d.exports=r},{"../../../../lib/assign":121,"./error":87}],86:[function(e,d,m){"use strict";var t=e("./error"),a={AMERICAN_EXPRESS:"American Express",DINERS:"Discover",DISCOVER:"Discover",ELO:"Elo",HIPER:"Hiper",HIPERCARD:"Hipercard",INTERNATIONAL_MAESTRO:"Maestro",JCB:"JCB",MASTERCARD:"MasterCard",UK_MAESTRO:"Maestro",UNION_PAY:"UnionPay",VISA:"Visa"},n={YES:"Yes",NO:"No",UNKNOWN:"Unknown"},r={PSDTWO:"psd2"};function i(o){var u;return o.data&&!o.errors?u=l(o):u=t(o),u}function l(o){var u=o.data.tokenizeCreditCard,p=u.creditCard,E=p.last4?p.last4.substr(2,4):"",v=p.binData,A,g;return v&&(["commercial","debit","durbinRegulated","healthcare","payroll","prepaid"].forEach(function(s){v[s]?v[s]=n[v[s]]:v[s]="Unknown"}),["issuingBank","countryOfIssuance","productId"].forEach(function(s){v[s]||(v[s]="Unknown")})),A={creditCards:[{binData:v,consumed:!1,description:E?"ending in "+E:"",nonce:u.token,details:{cardholderName:p.cardholderName,expirationMonth:p.expirationMonth,expirationYear:p.expirationYear,bin:p.bin||"",cardType:a[p.brandCode]||"Unknown",lastFour:p.last4||"",lastTwo:E},type:"CreditCard",threeDSecureInfo:null}]},u.authenticationInsight&&(g=u.authenticationInsight.customerAuthenticationRegulationEnvironment,A.creditCards[0].authenticationInsight={regulationEnvironment:r[g]||g.toLowerCase()}),A}d.exports=i},{"./error":87}],87:[function(e,d,m){"use strict";function t(o){var u,p=o.errors&&o.errors[0]&&o.errors[0].extensions&&o.errors[0].extensions.errorClass;return p==="VALIDATION"?u=n(o):p?u=a(o):u={error:{message:"There was a problem serving your request"},fieldErrors:[]},u}function a(o){return{error:{message:o.errors[0].message},fieldErrors:[]}}function n(o){var u=r(o.errors);return u.length===0?{error:{message:o.errors[0].message}}:{error:{message:l(u)},fieldErrors:u}}function r(o){var u=[];return o.forEach(function(p){p.extensions&&p.extensions.inputPath&&i(p.extensions.inputPath.slice(1),p,u)}),u}function i(o,u,p){var E,v=u.extensions.legacyCode,A=o[0];if(o.length===1){p.push({code:v,field:A,message:u.message});return}p.forEach(function(g){g.field===A&&(E=g)}),E||(E={field:A,fieldErrors:[]},p.push(E)),i(o.slice(1),u,E.fieldErrors)}function l(o){var u={creditCard:"Credit card is invalid"},p=o[0].field;return u[p]}d.exports=t},{}],88:[function(e,d,m){"use strict";var t="query ClientConfiguration {   clientConfiguration {     analyticsUrl     environment     merchantId     assetsUrl     clientApiUrl     creditCard {       supportedCardBrands       challenges       threeDSecureEnabled       threeDSecure {         cardinalAuthenticationJWT       }     }     applePayWeb {       countryCode       currencyCode       merchantIdentifier       supportedCardBrands     }     googlePay {       displayName       supportedCardBrands       environment       googleAuthorization       paypalClientId     }     ideal {       routeId       assetsUrl     }     kount {       merchantId     }     masterpass {       merchantCheckoutId       supportedCardBrands     }     paypal {       displayName       clientId       assetsUrl       environment       environmentNoNetwork       unvettedMerchant       braintreeClientId       billingAgreementsEnabled       merchantAccountId       currencyCode       payeeEmail     }     unionPay {       merchantAccountId     }     usBankAccount {       routeId       plaidPublicKey     }     venmo {       merchantId       accessToken       environment       enrichedCustomerDataEnabled    }     visaCheckout {       apiKey       externalClientId       supportedCardBrands     }     braintreeApi {       accessToken       url     }     supportedFeatures   } }";function a(){return{query:t,operationName:"ClientConfiguration"}}d.exports=a},{}],89:[function(e,d,m){"use strict";var t=e("../../../../lib/assign").assign;function a(l){var o=l.hasAuthenticationInsight,u="mutation TokenizeCreditCard($input: TokenizeCreditCardInput!";return o&&(u+=", $authenticationInsightInput: AuthenticationInsightInput!"),u+=") {   tokenizeCreditCard(input: $input) {     token     creditCard {       bin       brandCode       last4       cardholderName       expirationMonth      expirationYear      binData {         prepaid         healthcare         debit         durbinRegulated         commercial         payroll         issuingBank         countryOfIssuance         productId       }     } ",o&&(u+="    authenticationInsight(input: $authenticationInsightInput) {      customerAuthenticationRegulationEnvironment    }"),u+="  } }",u}function n(l,o){var u=l.creditCard,p=u&&u.billingAddress,E=u&&u.expirationDate,v=u&&(u.expirationMonth||E&&E.split("/")[0].trim()),A=u&&(u.expirationYear||E&&E.split("/")[1].trim()),g={input:{creditCard:{number:u&&u.number,expirationMonth:v,expirationYear:A,cvv:u&&u.cvv,cardholderName:u&&u.cardholderName},options:{}}};return o.hasAuthenticationInsight&&(g.authenticationInsightInput={merchantAccountId:l.merchantAccountId}),p&&(g.input.creditCard.billingAddress=p),g.input=r(l,g.input),g}function r(l,o){var u;return l.creditCard&&l.creditCard.options&&typeof l.creditCard.options.validate=="boolean"?u=l.creditCard.options.validate:l.authorizationFingerprint&&l.tokenizationKey||l.authorizationFingerprint?u=!0:l.tokenizationKey&&(u=!1),typeof u=="boolean"&&(o.options=t({validate:u},o.options)),o}function i(l){var o={hasAuthenticationInsight:!!(l.authenticationInsight&&l.merchantAccountId)};return{query:a(o),variables:n(l,o),operationName:"TokenizeCreditCard"}}d.exports=i},{"../../../../lib/assign":121}],90:[function(e,d,m){"use strict";var t={tokenize_credit_cards:"payment_methods/credit_cards",configuration:"configuration"},a=["creditCard.options.unionPayEnrollment"];function n(i){this._config=i.graphQL}n.prototype.getGraphQLEndpoint=function(){return this._config.url},n.prototype.isGraphQLRequest=function(i,l){var o,u=this.getClientApiPath(i);return!this._isGraphQLEnabled()||!u||(o=this._config.features.some(function(p){return t[p]===u}),r(l))?!1:o},n.prototype.getClientApiPath=function(i){var l,o="/client_api/v1/",u=i.split(o);return u.length>1&&(l=u[1].split("?")[0]),l},n.prototype._isGraphQLEnabled=function(){return!!this._config};function r(i){return a.some(function(l){var o=l.split(".").reduce(function(u,p){return u&&u[p]},i);return o!==void 0})}d.exports=n},{}],91:[function(e,d,m){"use strict";var t=e("../../constants").BRAINTREE_VERSION,a=e("../../../lib/assign").assign,n=e("../../../lib/snake-case-to-camel-case"),r=e("./generators/credit-card-tokenization"),i=e("./adapters/credit-card-tokenization"),l=e("./generators/configuration"),o=e("./adapters/configuration"),u={"payment_methods/credit_cards":r,configuration:l},p={"payment_methods/credit_cards":i,configuration:o};function E(g){var s=g.graphQL.getClientApiPath(g.url);this._graphQL=g.graphQL,this._data=g.data,this._method=g.method,this._headers=g.headers,this._clientSdkMetadata={source:g.metadata.source,integration:g.metadata.integration,sessionId:g.metadata.sessionId},this._sendAnalyticsEvent=g.sendAnalyticsEvent||Function.prototype,this._generator=u[s],this._adapter=p[s],this._sendAnalyticsEvent("graphql.init")}E.prototype.getUrl=function(){return this._graphQL.getGraphQLEndpoint()},E.prototype.getBody=function(){var g=A(this._data),s=this._generator(g),c=a({clientSdkMetadata:this._clientSdkMetadata},s);return JSON.stringify(c)},E.prototype.getMethod=function(){return"POST"},E.prototype.getHeaders=function(){var g,s;return this._data.authorizationFingerprint?(this._sendAnalyticsEvent("graphql.authorization-fingerprint"),g=this._data.authorizationFingerprint):(this._sendAnalyticsEvent("graphql.tokenization-key"),g=this._data.tokenizationKey),s={Authorization:"Bearer "+g,"Braintree-Version":t},a({},this._headers,s)},E.prototype.adaptResponseBody=function(g){return this._adapter(g,this)},E.prototype.determineStatus=function(g,s){var c,y;return g===200?(y=s.errors&&s.errors[0]&&s.errors[0].extensions&&s.errors[0].extensions.errorClass,s.data&&!s.errors?c=200:y==="VALIDATION"?c=422:y==="AUTHORIZATION"?c=403:y==="AUTHENTICATION"?c=401:v(y,s)?c=403:c=500):g?c=g:c=500,this._sendAnalyticsEvent("graphql.status."+g),this._sendAnalyticsEvent("graphql.determinedStatus."+c),c};function v(g,s){return!g&&s.errors[0].message}function A(g){var s={};return Object.keys(g).forEach(function(c){var y=n(c);typeof g[c]=="object"?s[y]=A(g[c]):typeof g[c]=="number"?s[y]=String(g[c]):s[y]=g[c]}),s}d.exports=E},{"../../../lib/assign":121,"../../../lib/snake-case-to-camel-case":159,"../../constants":79,"./adapters/configuration":85,"./adapters/credit-card-tokenization":86,"./generators/configuration":88,"./generators/credit-card-tokenization":89}],92:[function(e,d,m){"use strict";var t=e("../../lib/once"),a=e("./ajax-driver");d.exports=function(n,r){r=t(r||Function.prototype),n.method=(n.method||"GET").toUpperCase(),n.timeout=n.timeout==null?6e4:n.timeout,n.data=n.data||{},a.request(n,r)}},{"../../lib/once":156,"./ajax-driver":83}],93:[function(e,d,m){"use strict";d.exports=function(t){try{t=JSON.parse(t)}catch{}return t}},{}],94:[function(e,d,m){"use strict";d.exports=function(t,a){if(typeof t!="string")throw new Error("Method must be a string");return t.toLowerCase()!=="get"&&a!=null&&(a=typeof a=="string"?a:JSON.stringify(a)),a}},{}],95:[function(e,d,m){"use strict";var t=typeof window<"u"&&window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest;function a(){return t?new window.XMLHttpRequest:new window.XDomainRequest}d.exports={isAvailable:t,getRequestObject:a}},{}],96:[function(e,d,m){"use strict";var t=e("../lib/braintree-error");d.exports={DATA_COLLECTOR_KOUNT_NOT_ENABLED:{type:t.types.MERCHANT,code:"DATA_COLLECTOR_KOUNT_NOT_ENABLED",message:"Kount is not enabled for this merchant."},DATA_COLLECTOR_KOUNT_ERROR:{type:t.types.MERCHANT,code:"DATA_COLLECTOR_KOUNT_ERROR"},DATA_COLLECTOR_REQUIRES_CREATE_OPTIONS:{type:t.types.MERCHANT,code:"DATA_COLLECTOR_REQUIRES_CREATE_OPTIONS",message:"Data Collector must be created with Kount and/or PayPal."}}},{"../lib/braintree-error":124}],97:[function(e,d,m){"use strict";var t=e("../lib/constants").FRAUDNET_FNCLS,a=e("../lib/constants").FRAUDNET_SOURCE,n=e("../lib/constants").FRAUDNET_URL,r=e("../lib/assets").loadScript,i;function l(g){var s=new u;return g=g||{},!g.sessionId&&i?(s.sessionId=i,Promise.resolve(s)):s.initialize(g)}function o(){i=null}function u(){}u.prototype.initialize=function(g){var s=g.environment,c=this;return this.sessionId=g.sessionId||E(),g.sessionId||(i=this.sessionId),this._beaconId=v(this.sessionId),this._parameterBlock=A(this.sessionId,this._beaconId,s),r({src:n}).then(function(y){return c._thirdPartyBlock=y,c}).catch(function(){return null})},u.prototype.teardown=function(){p(document.querySelector('iframe[title="ppfniframe"]')),p(document.querySelector('iframe[title="pbf"]')),p(this._parameterBlock),p(this._thirdPartyBlock)};function p(g){g&&g.parentNode&&g.parentNode.removeChild(g)}function E(){var g,s="";for(g=0;g<32;g++)s+=Math.floor(Math.random()*16).toString(16);return s}function v(g){var s=new Date().getTime()/1e3;return"https://b.stats.paypal.com/counter.cgi?i=127.0.0.1&p="+g+"&t="+s+"&a=14"}function A(g,s,c){var y=document.body.appendChild(document.createElement("script")),h={f:g,s:a,b:s};return c!=="production"&&(h.sandbox=!0),y.type="application/json",y.setAttribute("fncls",t),y.text=JSON.stringify(h),y}d.exports={setup:l,clearSessionIdCache:o}},{"../lib/assets":120,"../lib/constants":126}],98:[function(e,d,m){"use strict";var t=e("./kount"),a=e("./fraudnet"),n=e("../lib/braintree-error"),r=e("../lib/basic-component-verification"),i=e("../lib/create-deferred-client"),l=e("../lib/create-assets-url"),o=e("../lib/methods"),u=e("../lib/convert-methods-to-error"),p="3.102.0",E=e("@braintree/wrap-promise"),v=e("./errors");function A(c){var y="Data Collector",h={_instances:[]},T;return r.verify({name:y,client:c.client,authorization:c.authorization}).then(function(){return h._instantiatedWithAClient=!c.useDeferredClient,h._createPromise=i.create({authorization:c.authorization,client:c.client,debug:c.debug,assetsUrl:l.create(c.authorization),name:y}).then(function(O){var _,I=O.getConfiguration();if(c.kount===!0&&I.gatewayConfiguration.kount){try{_=t.setup({environment:I.gatewayConfiguration.environment,merchantId:I.gatewayConfiguration.kount.kountMerchantId})}catch(f){return Promise.reject(new n({type:v.DATA_COLLECTOR_KOUNT_ERROR.type,code:v.DATA_COLLECTOR_KOUNT_ERROR.code,message:f.message}))}T=_.deviceData,h._instances.push(_)}else T={};return Promise.resolve(O)}).then(function(O){return a.setup({sessionId:c.riskCorrelationId||c.clientMetadataId||c.correlationId,environment:O.getConfiguration().gatewayConfiguration.environment}).then(function(_){_&&(T.correlation_id=_.sessionId,h._instances.push(_))})}).then(function(){return h._instances.length===0?Promise.reject(new n(v.DATA_COLLECTOR_REQUIRES_CREATE_OPTIONS)):(h.deviceData=JSON.stringify(T),h.rawDeviceData=T,h)}),h.teardown=g(h),h.getDeviceData=s(h),h._instantiatedWithAClient?h._createPromise:h})}function g(c){return E(function(){return c._createPromise.then(function(){c._instances.forEach(function(h){h&&h.teardown()}),u(c,o(c))})})}function s(c){return E(function(h){return h=h||{},c._createPromise.then(function(){return h.raw?Promise.resolve(c.rawDeviceData):Promise.resolve(c.deviceData)})})}d.exports={create:E(A),VERSION:p}},{"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/convert-methods-to-error":127,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"../lib/methods":155,"./errors":96,"./fraudnet":97,"./kount":99,"@braintree/wrap-promise":43}],99:[function(e,d,m){"use strict";var t=e("./vendor/sjcl"),a=e("../lib/camel-case-to-snake-case"),n="https://assets.qa.braintreepayments.com/data",r="braintreeDataFrame-",i={development:n,qa:n,sandbox:"https://assets.braintreegateway.com/sandbox/data",production:"https://assets.braintreegateway.com/data"},l={};function o(p){var E=p??{};return new u(E)}function u(p){var E=u.getCachedDeviceData(p.merchantId);if(E){this.deviceData=E,this._isCached=!0;return}this._currentEnvironment=this._initializeEnvironment(p),t.random.startCollectors(),this._deviceSessionId=this._generateDeviceSessionId(),this.deviceData=this._getDeviceData(),u.setCachedDeviceData(p.merchantId,this.deviceData),this._iframe=this._setupIFrame()}u.getCachedDeviceData=function(p){return l[p]},u.setCachedDeviceData=function(p,E){l[p]=E},u.prototype.teardown=function(){this._isCached||(t.random.stopCollectors(),this._removeIframe())},u.prototype._removeIframe=function(){this._iframe.parentNode.removeChild(this._iframe)},u.prototype._getDeviceData=function(){return a({deviceSessionId:this._deviceSessionId,fraudMerchantId:this._currentEnvironment.id})},u.prototype._generateDeviceSessionId=function(){var p,E;return p=t.random.randomWords(4,0),E=t.codec.hex.fromBits(p),E},u.prototype._setupIFrame=function(){var p,E,v=this;return p="?m="+this._currentEnvironment.id+"&s="+this._deviceSessionId,E=document.createElement("iframe"),E.width=1,E.id=r+this._deviceSessionId,E.height=1,E.frameBorder=0,E.scrolling="no",E.style.position="fixed",E.style.left="-999999px",E.style.top="-999999px",E.title="Braintree-Kount-iframe",E.setAttribute("aria-hidden","true"),document.body.appendChild(E),setTimeout(function(){E.src=v._currentEnvironment.url+"/logo.htm"+p,E.innerHTML='<img src="'+v._currentEnvironment.url+"/logo.gif"+p+'" alt="" />'},10),E},u.prototype._initializeEnvironment=function(p){var E=i[p.environment];if(E==null)throw new Error(p.environment+" is not a valid environment for kount.environment");return{url:E,name:p.environment,id:p.merchantId}},d.exports={setup:o,Kount:u,environmentUrls:i}},{"../lib/camel-case-to-snake-case":125,"./vendor/sjcl":100}],100:[function(e,d,m){"use strict";var t={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(s){this.toString=function(){return"CORRUPT: "+this.message},this.message=s},invalid:function(s){this.toString=function(){return"INVALID: "+this.message},this.message=s},bug:function(s){this.toString=function(){return"BUG: "+this.message},this.message=s},notReady:function(s){this.toString=function(){return"NOT READY: "+this.message},this.message=s}}};t.cipher.aes=function(s){this.l[0][0][0]||this.G();var c,y,h,T,O=this.l[0][4],_=this.l[1];c=s.length;var I=1;if(c!==4&&c!==6&&c!==8)throw new t.exception.invalid("invalid aes key size");for(this.b=[h=s.slice(0),T=[]],s=c;s<4*c+28;s++)y=h[s-1],(s%c===0||c===8&&s%c===4)&&(y=O[y>>>24]<<24^O[y>>16&255]<<16^O[y>>8&255]<<8^O[y&255],s%c===0&&(y=y<<8^y>>>24^I<<24,I=I<<1^283*(I>>7))),h[s]=h[s-c]^y;for(c=0;s;c++,s--)y=h[c&3?s:s-4],T[c]=4>=s||4>c?y:_[0][O[y>>>24]]^_[1][O[y>>16&255]]^_[2][O[y>>8&255]]^_[3][O[y&255]]},t.cipher.aes.prototype={encrypt:function(s){return a(this,s,0)},decrypt:function(s){return a(this,s,1)},l:[[[],[],[],[],[]],[[],[],[],[],[]]],G:function(){var s=this.l[0],c=this.l[1],y=s[4],h=c[4],T,O,_,I=[],f=[],N,P,b,D;for(T=0;256>T;T++)f[(I[T]=T<<1^283*(T>>7))^T]=T;for(O=_=0;!y[O];O^=N||1,_=f[_]||1)for(b=_^_<<1^_<<2^_<<3^_<<4,b=b>>8^b&255^99,y[O]=b,h[b]=O,P=I[T=I[N=I[O]]],D=16843009*P^65537*T^257*N^16843008*O,P=257*I[b]^16843008*b,T=0;4>T;T++)s[T][O]=P=P<<24^P>>>8,c[T][b]=D=D<<24^D>>>8;for(T=0;5>T;T++)s[T]=s[T].slice(0),c[T]=c[T].slice(0)}};function a(s,c,y){if(c.length!==4)throw new t.exception.invalid("invalid aes block size");var h=s.b[y],T=c[0]^h[0],O=c[y?3:1]^h[1],_=c[2]^h[2];c=c[y?1:3]^h[3];var I,f,N,P=h.length/4-2,b,D=4,M=[0,0,0,0];I=s.l[y],s=I[0];var L=I[1],C=I[2],R=I[3],w=I[4];for(b=0;b<P;b++)I=s[T>>>24]^L[O>>16&255]^C[_>>8&255]^R[c&255]^h[D],f=s[O>>>24]^L[_>>16&255]^C[c>>8&255]^R[T&255]^h[D+1],N=s[_>>>24]^L[c>>16&255]^C[T>>8&255]^R[O&255]^h[D+2],c=s[c>>>24]^L[T>>16&255]^C[O>>8&255]^R[_&255]^h[D+3],D+=4,T=I,O=f,_=N;for(b=0;4>b;b++)M[y?3&-b:b]=w[T>>>24]<<24^w[O>>16&255]<<16^w[_>>8&255]<<8^w[c&255]^h[D++],I=T,T=O,O=_,_=c,c=I;return M}t.bitArray={bitSlice:function(s,c,y){return s=t.bitArray.M(s.slice(c/32),32-(c&31)).slice(1),y===void 0?s:t.bitArray.clamp(s,y-c)},extract:function(s,c,y){var h=Math.floor(-c-y&31);return((c+y-1^c)&-32?s[c/32|0]<<32-h^s[c/32+1|0]>>>h:s[c/32|0]>>>h)&(1<<y)-1},concat:function(s,c){if(s.length===0||c.length===0)return s.concat(c);var y=s[s.length-1],h=t.bitArray.getPartial(y);return h===32?s.concat(c):t.bitArray.M(c,h,y|0,s.slice(0,s.length-1))},bitLength:function(s){var c=s.length;return c===0?0:32*(c-1)+t.bitArray.getPartial(s[c-1])},clamp:function(s,c){if(32*s.length<c)return s;s=s.slice(0,Math.ceil(c/32));var y=s.length;return c=c&31,0<y&&c&&(s[y-1]=t.bitArray.partial(c,s[y-1]&2147483648>>c-1,1)),s},partial:function(s,c,y){return s===32?c:(y?c|0:c<<32-s)+1099511627776*s},getPartial:function(s){return Math.round(s/1099511627776)||32},equal:function(s,c){if(t.bitArray.bitLength(s)!==t.bitArray.bitLength(c))return!1;var y=0,h;for(h=0;h<s.length;h++)y|=s[h]^c[h];return y===0},M:function(s,c,y,h){var T;for(T=0,h===void 0&&(h=[]);32<=c;c-=32)h.push(y),y=0;if(c===0)return h.concat(s);for(T=0;T<s.length;T++)h.push(y|s[T]>>>c),y=s[T]<<32-c;return T=s.length?s[s.length-1]:0,s=t.bitArray.getPartial(T),h.push(t.bitArray.partial(c+s&31,32<c+s?y:h.pop(),1)),h},Y:function(s,c){return[s[0]^c[0],s[1]^c[1],s[2]^c[2],s[3]^c[3]]},byteswapM:function(s){var c,y;for(c=0;c<s.length;++c)y=s[c],s[c]=y>>>24|y>>>8&65280|(y&65280)<<8|y<<24;return s}},t.codec.utf8String={fromBits:function(s){var c="",y=t.bitArray.bitLength(s),h,T;for(h=0;h<y/8;h++)!(h&3)&&(T=s[h/4]),c+=String.fromCharCode(T>>>8>>>8>>>8),T<<=8;return decodeURIComponent(escape(c))},toBits:function(s){s=unescape(encodeURIComponent(s));var c=[],y,h=0;for(y=0;y<s.length;y++)h=h<<8|s.charCodeAt(y),(y&3)===3&&(c.push(h),h=0);return y&3&&c.push(t.bitArray.partial(8*(y&3),h)),c}},t.codec.hex={fromBits:function(s){var c="",y;for(y=0;y<s.length;y++)c+=((s[y]|0)+0xf00000000000).toString(16).substr(4);return c.substr(0,t.bitArray.bitLength(s)/4)},toBits:function(s){var c,y=[],h;for(s=s.replace(/\s|0x/g,""),h=s.length,s=s+"00000000",c=0;c<s.length;c+=8)y.push(parseInt(s.substr(c,8),16)^0);return t.bitArray.clamp(y,4*h)}},t.hash.sha256=function(s){this.b[0]||this.G(),s?(this.u=s.u.slice(0),this.o=s.o.slice(0),this.h=s.h):this.reset()},t.hash.sha256.hash=function(s){return new t.hash.sha256().update(s).finalize()},t.hash.sha256.prototype={blockSize:512,reset:function(){return this.u=this.K.slice(0),this.o=[],this.h=0,this},update:function(s){typeof s=="string"&&(s=t.codec.utf8String.toBits(s));var c,y=this.o=t.bitArray.concat(this.o,s);if(c=this.h,s=this.h=c+t.bitArray.bitLength(s),9007199254740991<s)throw new t.exception.invalid("Cannot hash more than 2^53 - 1 bits");if(typeof Uint32Array<"u"){var h=new Uint32Array(y),T=0;for(c=512+c-(512+c&511);c<=s;c+=512)n(this,h.subarray(16*T,16*(T+1))),T+=1;y.splice(0,16*T)}else for(c=512+c-(512+c&511);c<=s;c+=512)n(this,y.splice(0,16));return this},finalize:function(){var s,y=this.o,c=this.u,y=t.bitArray.concat(y,[t.bitArray.partial(1,1)]);for(s=y.length+2;s&15;s++)y.push(0);for(y.push(Math.floor(this.h/4294967296)),y.push(this.h|0);y.length;)n(this,y.splice(0,16));return this.reset(),c},K:[],b:[],G:function(){function s(O){return 4294967296*(O-Math.floor(O))|0}for(var c=0,y=2,h,T;64>c;y++){for(T=!0,h=2;h*h<=y;h++)if(y%h===0){T=!1;break}T&&(8>c&&(this.K[c]=s(Math.pow(y,.5))),this.b[c]=s(Math.pow(y,1/3)),c++)}}};function n(s,c){var y,h,T,O=s.u,_=s.b,I=O[0],f=O[1],N=O[2],P=O[3],b=O[4],D=O[5],M=O[6],L=O[7];for(y=0;64>y;y++)16>y?h=c[y]:(h=c[y+1&15],T=c[y+14&15],h=c[y&15]=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(T>>>17^T>>>19^T>>>10^T<<15^T<<13)+c[y&15]+c[y+9&15]|0),h=h+L+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(M^b&(D^M))+_[y],L=M,M=D,D=b,b=P+h|0,P=N,N=f,f=I,I=h+(f&N^P&(f^N))+(f>>>2^f>>>13^f>>>22^f<<30^f<<19^f<<10)|0;O[0]=O[0]+I|0,O[1]=O[1]+f|0,O[2]=O[2]+N|0,O[3]=O[3]+P|0,O[4]=O[4]+b|0,O[5]=O[5]+D|0,O[6]=O[6]+M|0,O[7]=O[7]+L|0}t.prng=function(s){this.c=[new t.hash.sha256],this.i=[0],this.H=0,this.v={},this.F=0,this.J={},this.L=this.f=this.j=this.T=0,this.b=[0,0,0,0,0,0,0,0],this.g=[0,0,0,0],this.C=void 0,this.D=s,this.s=!1,this.B={progress:{},seeded:{}},this.m=this.S=0,this.w=1,this.A=2,this.O=65536,this.I=[0,48,64,96,128,192,256,384,512,768,1024],this.P=3e4,this.N=80},t.prng.prototype={randomWords:function(s,c){var y=[],h;h=this.isReady(c);var T;if(h===this.m)throw new t.exception.notReady("generator isn't seeded");if(h&this.A){h=!(h&this.w),T=[];var O=0,_;for(this.L=T[0]=new Date().valueOf()+this.P,_=0;16>_;_++)T.push(4294967296*Math.random()|0);for(_=0;_<this.c.length&&(T=T.concat(this.c[_].finalize()),O+=this.i[_],this.i[_]=0,h||!(this.H&1<<_));_++);for(this.H>=1<<this.c.length&&(this.c.push(new t.hash.sha256),this.i.push(0)),this.f-=O,O>this.j&&(this.j=O),this.H++,this.b=t.hash.sha256.hash(this.b.concat(T)),this.C=new t.cipher.aes(this.b),h=0;4>h&&(this.g[h]=this.g[h]+1|0,!this.g[h]);h++);}for(h=0;h<s;h+=4)(h+1)%this.O===0&&l(this),T=o(this),y.push(T[0],T[1],T[2],T[3]);return l(this),y.slice(0,s)},setDefaultParanoia:function(s,c){if(s===0&&c!=="Setting paranoia=0 will ruin your security; use it only for testing")throw new t.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.D=s},addEntropy:function(s,c,y){y=y||"user";var h,T,O=new Date().valueOf(),_=this.v[y],I=this.isReady(),f=0;switch(h=this.J[y],h===void 0&&(h=this.J[y]=this.T++),_===void 0&&(_=this.v[y]=0),this.v[y]=(this.v[y]+1)%this.c.length,typeof s){case"number":c===void 0&&(c=1),this.c[_].update([h,this.F++,1,c,O,1,s|0]);break;case"object":if(y=Object.prototype.toString.call(s),y==="[object Uint32Array]"){for(T=[],y=0;y<s.length;y++)T.push(s[y]);s=T}else for(y!=="[object Array]"&&(f=1),y=0;y<s.length&&!f;y++)typeof s[y]!="number"&&(f=1);if(!f){if(c===void 0)for(y=c=0;y<s.length;y++)for(T=s[y];0<T;)c++,T=T>>>1;this.c[_].update([h,this.F++,2,c,O,s.length].concat(s))}break;case"string":c===void 0&&(c=s.length),this.c[_].update([h,this.F++,3,c,O,s.length]),this.c[_].update(s);break;default:f=1}if(f)throw new t.exception.bug("random: addEntropy only supports number, array of numbers or string");this.i[_]+=c,this.f+=c,I===this.m&&(this.isReady()!==this.m&&r("seeded",Math.max(this.j,this.f)),r("progress",this.getProgress()))},isReady:function(s){return s=this.I[s!==void 0?s:this.D],this.j&&this.j>=s?this.i[0]>this.N&&new Date().valueOf()>this.L?this.A|this.w:this.w:this.f>=s?this.A|this.m:this.m},getProgress:function(s){return s=this.I[s||this.D],this.j>=s||this.f>s?1:this.f/s},startCollectors:function(){if(!this.s){if(this.a={loadTimeCollector:u(this,this.V),mouseCollector:u(this,this.W),keyboardCollector:u(this,this.U),accelerometerCollector:u(this,this.R),touchCollector:u(this,this.X)},window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector);else throw new t.exception.bug("can't attach event");this.s=!0}},stopCollectors:function(){this.s&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.s=!1)},addEventListener:function(s,c){this.B[s][this.S++]=c},removeEventListener:function(s,c){var y,h,T=this.B[s],O=[];for(h in T)T.hasOwnProperty(h)&&T[h]===c&&O.push(h);for(y=0;y<O.length;y++)h=O[y],delete T[h]},U:function(){i(this,1)},W:function(s){var c,y;try{c=s.x||s.clientX||s.offsetX||0,y=s.y||s.clientY||s.offsetY||0}catch{y=c=0}c!=0&&y!=0&&this.addEntropy([c,y],2,"mouse"),i(this,0)},X:function(s){s=s.touches[0]||s.changedTouches[0],this.addEntropy([s.pageX||s.clientX,s.pageY||s.clientY],1,"touch"),i(this,0)},V:function(){i(this,2)},R:function(s){if(s=s.accelerationIncludingGravity.x||s.accelerationIncludingGravity.y||s.accelerationIncludingGravity.z,window.orientation){var c=window.orientation;typeof c=="number"&&this.addEntropy(c,1,"accelerometer")}s&&this.addEntropy(s,2,"accelerometer"),i(this,0)}};function r(s,c){var y,h=t.random.B[s],T=[];for(y in h)h.hasOwnProperty(y)&&T.push(h[y]);for(y=0;y<T.length;y++)T[y](c)}function i(s,c){typeof window<"u"&&window.performance&&typeof window.performance.now=="function"?s.addEntropy(window.performance.now(),c,"loadtime"):s.addEntropy(new Date().valueOf(),c,"loadtime")}function l(s){s.b=o(s).concat(o(s)),s.C=new t.cipher.aes(s.b)}function o(s){for(var c=0;4>c&&(s.g[c]=s.g[c]+1|0,!s.g[c]);c++);return s.C.encrypt(s.g)}function u(s,c){return function(){c.apply(s,arguments)}}t.random=new t.prng(6);e:try{var p,E,v,A;if(A=typeof d<"u"&&d.exports){var g;try{g=e("crypto")}catch{g=null}A=E=g}if(A&&E.randomBytes)p=E.randomBytes(128),p=new Uint32Array(new Uint8Array(p).buffer),t.random.addEntropy(p,1024,"crypto['randomBytes']");else if(typeof window<"u"&&typeof Uint32Array<"u"){if(v=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(v);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(v);else break e;t.random.addEntropy(v,1024,"crypto['getRandomValues']")}}catch(s){typeof window<"u"&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(s))}typeof d<"u"&&d.exports&&(d.exports=t),typeof F=="function"&&F([],function(){return t})},{crypto:void 0}],101:[function(e,d,m){"use strict";var t=e("../lib/braintree-error");d.exports={GOOGLE_PAYMENT_NOT_ENABLED:{type:t.types.MERCHANT,code:"GOOGLE_PAYMENT_NOT_ENABLED",message:"Google Pay is not enabled for this merchant."},GOOGLE_PAYMENT_GATEWAY_ERROR:{code:"GOOGLE_PAYMENT_GATEWAY_ERROR",message:"There was an error when tokenizing the Google Pay payment method.",type:t.types.UNKNOWN},GOOGLE_PAYMENT_UNSUPPORTED_VERSION:{code:"GOOGLE_PAYMENT_UNSUPPORTED_VERSION",type:t.types.MERCHANT}}},{"../lib/braintree-error":124}],102:[function(e,d,m){"use strict";var t=e("../lib/analytics"),a=e("../lib/assign").assign,n=e("../lib/convert-methods-to-error"),r=e("../lib/find"),i=e("../lib/generate-google-pay-configuration"),l=e("../lib/braintree-error"),o=e("./errors"),u=e("../lib/methods"),p=e("@braintree/wrap-promise"),E={1:"_createV1PaymentDataRequest",2:"_createV2PaymentDataRequest"};function v(g){if(this._createPromise=g.createPromise,this._client=g.client,this._useDeferredClient=g.useDeferredClient,this._googlePayVersion=g.googlePayVersion||1,this._googleMerchantId=g.googleMerchantId,this._isUnsupportedGooglePayAPIVersion())throw new l({code:o.GOOGLE_PAYMENT_UNSUPPORTED_VERSION.code,message:"The Braintree SDK does not support Google Pay version "+this._googlePayVersion+". Please upgrade the version of your Braintree SDK and contact support if this error persists.",type:o.GOOGLE_PAYMENT_UNSUPPORTED_VERSION.type})}v.prototype._waitForClient=function(){return this._client?Promise.resolve():this._createPromise.then(function(g){this._client=g}.bind(this))},v.prototype._isUnsupportedGooglePayAPIVersion=function(){return!(this._googlePayVersion in E)},v.prototype._getDefaultConfig=function(){return this._defaultConfig||(this._defaultConfig=i(this._client.getConfiguration(),this._googlePayVersion,this._googleMerchantId)),this._defaultConfig},v.prototype._createV1PaymentDataRequest=function(g){var s=this._getDefaultConfig(),c=g.cardRequirements&&g.cardRequirements.allowedCardNetworks,y=s.cardRequirements.allowedCardNetworks,h=c||y;return g=a({},s,g),g.cardRequirements.allowedCardNetworks=h,g},v.prototype._createV2PaymentDataRequest=function(g){var s=this._getDefaultConfig();return g.allowedPaymentMethods&&g.allowedPaymentMethods.forEach(function(c){var y=r(s.allowedPaymentMethods,"type",c.type);y&&A(c,y)}),g=a({},s,g),g},v.prototype.createPaymentDataRequest=function(g){return this._useDeferredClient?this._waitForClient().then(function(){return this._createPaymentDataRequestSyncronously(g)}.bind(this)):this._createPaymentDataRequestSyncronously(g)},v.prototype._createPaymentDataRequestSyncronously=function(g){var s=a({},g),c=this._googlePayVersion,y=E[c];return t.sendEvent(this._createPromise,"google-payment.v"+c+".createPaymentDataRequest"),this[y](s)},v.prototype.parseResponse=function(g){var s=this;return Promise.resolve().then(function(){var c,y=g.apiVersion===2?g.paymentMethodData.tokenizationData.token:g.paymentMethodToken.token,h=JSON.parse(y),T=h.error;return T?Promise.reject(T):(t.sendEvent(s._createPromise,"google-payment.parseResponse.succeeded"),h.paypalAccounts?(c=h.paypalAccounts[0],t.sendEvent(s._createPromise,"google-payment.parseResponse.succeeded.paypal"),Promise.resolve({nonce:c.nonce,type:c.type,description:c.description})):(c=h.androidPayCards[0],t.sendEvent(s._createPromise,"google-payment.parseResponse.succeeded.google-payment"),Promise.resolve({nonce:c.nonce,type:c.type,description:c.description,details:{cardType:c.details.cardType,lastFour:c.details.lastFour,lastTwo:c.details.lastTwo,isNetworkTokenized:c.details.isNetworkTokenized,bin:c.details.bin},binData:c.binData})))}).catch(function(c){return t.sendEvent(s._createPromise,"google-payment.parseResponse.failed"),Promise.reject(new l({code:o.GOOGLE_PAYMENT_GATEWAY_ERROR.code,message:o.GOOGLE_PAYMENT_GATEWAY_ERROR.message,type:o.GOOGLE_PAYMENT_GATEWAY_ERROR.type,details:{originalError:c}}))})},v.prototype.teardown=function(){return n(this,u(v.prototype)),Promise.resolve()};function A(g,s){Object.keys(s).forEach(function(c){typeof s[c]=="object"?g[c]=a({},s[c],g[c]):g[c]=g[c]||s[c]})}d.exports=p.wrapPrototype(v)},{"../lib/analytics":119,"../lib/assign":121,"../lib/braintree-error":124,"../lib/convert-methods-to-error":127,"../lib/find":137,"../lib/generate-google-pay-configuration":149,"../lib/methods":155,"./errors":101,"@braintree/wrap-promise":43}],103:[function(e,d,m){"use strict";var t=e("./google-payment"),a=e("../lib/braintree-error"),n=e("../lib/create-assets-url"),r=e("../lib/create-deferred-client"),i=e("../lib/basic-component-verification"),l=e("@braintree/wrap-promise"),o="3.102.0",u=e("./errors");function p(E){var v="Google Pay";return i.verify({name:v,client:E.client,authorization:E.authorization}).then(function(){var A,g;return A=r.create({authorization:E.authorization,client:E.client,debug:E.debug,assetsUrl:n.create(E.authorization),name:v}).then(function(s){var c=s.getConfiguration();return E.client=s,c.gatewayConfiguration.androidPay?s:Promise.reject(new a(u.GOOGLE_PAYMENT_NOT_ENABLED))}),E.createPromise=A,g=new t(E),E.useDeferredClient?g:A.then(function(s){return g._client=s,g})})}d.exports={create:l(p),VERSION:o}},{"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./errors":101,"./google-payment":102,"@braintree/wrap-promise":43}],104:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error"),a=e("../shared/errors"),n=e("../shared/constants").allowedAttributes;function r(l,o){var u;return n.hasOwnProperty(l)?o!=null&&!i(l,o)&&(u=new t({type:a.HOSTED_FIELDS_ATTRIBUTE_VALUE_NOT_ALLOWED.type,code:a.HOSTED_FIELDS_ATTRIBUTE_VALUE_NOT_ALLOWED.code,message:'Value "'+o+'" is not allowed for "'+l+'" attribute.'})):u=new t({type:a.HOSTED_FIELDS_ATTRIBUTE_NOT_SUPPORTED.type,code:a.HOSTED_FIELDS_ATTRIBUTE_NOT_SUPPORTED.code,message:'The "'+l+'" attribute is not supported in Hosted Fields.'}),u}function i(l,o){return n[l]==="string"?typeof o=="string"||typeof o=="number":n[l]==="boolean"?String(o)==="true"||String(o)==="false":!1}d.exports=r},{"../../lib/braintree-error":124,"../shared/constants":112,"../shared/errors":113}],105:[function(e,d,m){"use strict";var t=e("../shared/constants"),a=e("../../lib/use-min");d.exports=function(r,i,l){return r+"/web/"+t.VERSION+"/html/hosted-fields-frame"+a(l)+".html#"+i}},{"../../lib/use-min":160,"../shared/constants":112}],106:[function(e,d,m){"use strict";var t=e("../shared/constants").navigationDirections,a=e("../shared/browser-detection"),n=e("../shared/focus-intercept"),r=e("../shared/find-parent-tags"),i=["INPUT","SELECT","TEXTAREA"],l=["hidden","button","reset","submit","checkbox","radio","file"];function o(E){return a.hasSoftwareKeyboard()?i.indexOf(E.tagName)>-1&&l.indexOf(E.type)<0:E.type!=="hidden"}function u(E,v){switch(E){case t.BACK:return{checkIndexBounds:function(A){return A<0},indexChange:-1};case t.FORWARD:return{checkIndexBounds:function(A){return A>v-1},indexChange:1};default:}return{}}function p(E){var v,A;for(v=0;v<E.length;v++)if(A=E[v],o(A))return A;return null}d.exports={removeExtraFocusElements:function(E,v){var A=Array.prototype.slice.call(E.elements),g=p(A),s=p(A.reverse());[g,s].forEach(function(c){c&&n.matchFocusElement(c.getAttribute("id"))&&v(c.getAttribute("id"))})},createFocusChangeHandler:function(E,v){return function(A){var g,s,c,y,h=document.getElementById("bt-"+A.field+"-"+A.direction+"-"+E);if(h){if(c=r(h,"form")[0],document.forms.length<1||!c){v.onRemoveFocusIntercepts();return}c=[].slice.call(c.elements),g=c.indexOf(h),y=u(A.direction,c.length);do{if(g+=y.indexChange,y.checkIndexBounds(g))return;s=c[g]}while(!o(s));n.matchFocusElement(s.getAttribute("id"))?v.onTriggerInputFocus(s.getAttribute("data-braintree-type")):s.focus()}}}}},{"../shared/browser-detection":111,"../shared/constants":112,"../shared/find-parent-tags":114,"../shared/focus-intercept":115}],107:[function(e,d,m){"use strict";var t=e("../shared/constants").allowedStyles;d.exports=function(n){var r=document.createElement("input"),i={},l;return n[0]==="."&&(n=n.substring(1)),r.className=n,r.style.display="none !important",r.style.position="fixed !important",r.style.left="-99999px !important",r.style.top="-99999px !important",document.body.appendChild(r),l=window.getComputedStyle(r),t.forEach(function(o){var u=l[o];u&&(i[o]=u)}),document.body.removeChild(r),i}},{"../shared/constants":112}],108:[function(e,d,m){"use strict";var t=e("../../lib/assign").assign,a=e("../../lib/create-assets-url"),n=e("../../lib/is-verified-domain"),r=e("../../lib/destructor"),i=e("@braintree/iframer"),l=e("framebus"),o=e("../../lib/create-deferred-client"),u=e("../../lib/braintree-error"),p=e("./compose-url"),E=e("./get-styles-from-class"),v=e("../shared/constants"),A=e("../shared/errors"),g=e("../../lib/constants").INTEGRATION_TIMEOUT_MS,s=e("@braintree/uuid"),c=e("../shared/find-parent-tags"),y=e("../shared/browser-detection"),h=v.events,T=e("@braintree/event-emitter"),O=e("./inject-frame"),_=e("../../lib/analytics"),I=v.allowedFields,f=e("../../lib/methods"),N=e("../../lib/shadow"),P=e("../../lib/find-root-node"),b=e("../../lib/convert-methods-to-error"),D=e("../../lib/errors"),M=e("../shared/get-card-types"),L=e("./attribute-validation-error"),C=e("@braintree/wrap-promise"),R=e("./focus-change"),w=e("../shared/focus-intercept").destroy,B=5;function H(U){return function(k){var x,z=k.merchantPayload,X=z.emittedBy,Z=U[X].containerElement;Object.keys(z.fields).forEach(function(j){z.fields[j].container=U[j].containerElement}),x=z.fields[X],Z.classList.toggle(v.externalClasses.FOCUSED,x.isFocused),Z.classList.toggle(v.externalClasses.VALID,x.isValid),Z.classList.toggle(v.externalClasses.INVALID,!x.isPotentiallyValid),this._state={cards:z.cards,fields:z.fields},this._emit(k.type,z)}}function K(U){var k=U.getBoundingClientRect(),x=Math.floor(k.height/2),z=Math.floor(k.width/2);return k.top<(window.innerHeight-x||document.documentElement.clientHeight-x)&&k.right>z&&k.bottom>x&&k.left<(window.innerWidth-z||document.documentElement.clientWidth-z)}function Y(U){var k,x,z,X,Z,j=this,ne={},ce={},ue=[],le=s();if(this._merchantConfigurationOptions=t({},U),U.client?(x=U.client.getConfiguration(),z=x.gatewayConfiguration.assetsUrl,X=x.isDebug):(z=a.create(U.authorization),X=!!U.isDebug),this._clientPromise=o.create({client:U.client,authorization:U.authorization,debug:X,assetsUrl:z,name:"Hosted Fields"}),Z=p(z,le,X),!U.fields||Object.keys(U.fields).length===0)throw new u({type:D.INSTANTIATION_OPTION_REQUIRED.type,code:D.INSTANTIATION_OPTION_REQUIRED.code,message:"options.fields is required when instantiating Hosted Fields."});T.call(this),this._injectedNodes=[],this._destructor=new r,this._fields=ne,this._state={fields:{},cards:M("")},this._bus=new l({channel:le,verifyDomain:n,targetFrames:[window]}),this._destructor.registerFunctionForTeardown(function(){j._bus.teardown()}),U.client?_.sendEvent(this._clientPromise,"custom.hosted-fields.initialized"):_.sendEvent(this._clientPromise,"custom.hosted-fields.initialized.deferred-client"),Object.keys(U.fields).forEach(function(W){var Q,J,ie,ae,Te;if(!v.allowedFields.hasOwnProperty(W))throw new u({type:A.HOSTED_FIELDS_INVALID_FIELD_KEY.type,code:A.HOSTED_FIELDS_INVALID_FIELD_KEY.code,message:'"'+W+'" is not a valid field.'});if(Q=U.fields[W],J=Q.container||Q.selector,typeof J=="string"&&(J=document.querySelector(J)),!J||J.nodeType!==1)throw new u({type:A.HOSTED_FIELDS_INVALID_FIELD_SELECTOR.type,code:A.HOSTED_FIELDS_INVALID_FIELD_SELECTOR.code,message:A.HOSTED_FIELDS_INVALID_FIELD_SELECTOR.message,details:{fieldSelector:Q.selector,fieldContainer:Q.container,fieldKey:W}});if(J.querySelector('iframe[name^="braintree-"]'))throw new u({type:A.HOSTED_FIELDS_FIELD_DUPLICATE_IFRAME.type,code:A.HOSTED_FIELDS_FIELD_DUPLICATE_IFRAME.code,message:A.HOSTED_FIELDS_FIELD_DUPLICATE_IFRAME.message,details:{fieldSelector:Q.selector,fieldContainer:Q.container,fieldKey:W}});if(ie=J,N.isShadowElement(ie)&&(ie=N.transformToSlot(ie,"height: 100%")),Q.maxlength&&typeof Q.maxlength!="number")throw new u({type:A.HOSTED_FIELDS_FIELD_PROPERTY_INVALID.type,code:A.HOSTED_FIELDS_FIELD_PROPERTY_INVALID.code,message:"The value for maxlength must be a number.",details:{fieldKey:W}});if(Q.minlength&&typeof Q.minlength!="number")throw new u({type:A.HOSTED_FIELDS_FIELD_PROPERTY_INVALID.type,code:A.HOSTED_FIELDS_FIELD_PROPERTY_INVALID.code,message:"The value for minlength must be a number.",details:{fieldKey:W}});ae=i({type:W,name:"braintree-hosted-field-"+W,style:v.defaultIFrameStyle,title:Q.iframeTitle||"Secure Credit Card Frame - "+v.allowedFields[W].label}),this._bus.addTargetFrame(ae),this._injectedNodes.push.apply(this._injectedNodes,O(le,ae,ie,function(){j.focus(W)})),this._setupLabelFocus(W,J),ne[W]={frameElement:ae,containerElement:J},Te=new Promise(function(Fe){ce[W]=Fe}),ue.push(Te),this._state.fields[W]={isEmpty:!0,isValid:!1,isPotentiallyValid:!0,isFocused:!1,container:J},setTimeout(function(){ae.src=Z},0)}.bind(this)),this._merchantConfigurationOptions.styles&&Object.keys(this._merchantConfigurationOptions.styles).forEach(function(W){var Q=j._merchantConfigurationOptions.styles[W];typeof Q=="string"&&(j._merchantConfigurationOptions.styles[W]=E(Q))}),this._bus.on(h.REMOVE_FOCUS_INTERCEPTS,function(W){w(W&&W.id)}),this._bus.on(h.TRIGGER_FOCUS_CHANGE,R.createFocusChangeHandler(le,{onRemoveFocusIntercepts:function(W){j._bus.emit(h.REMOVE_FOCUS_INTERCEPTS,{id:W})},onTriggerInputFocus:function(W){j.focus(W)}})),this._bus.on(h.READY_FOR_CLIENT,function(W){j._clientPromise.then(function(Q){W(Q)})}),this._bus.on(h.CARD_FORM_ENTRY_HAS_BEGUN,function(){_.sendEvent(j._clientPromise,"hosted-fields.input.started")}),this._bus.on(h.BIN_AVAILABLE,function(W){j._emit("binAvailable",{bin:W})}),k=setTimeout(function(){_.sendEvent(j._clientPromise,"custom.hosted-fields.load.timed-out"),j._emit("timeout")},g),Promise.all(ue).then(function(W){var Q=W[0];clearTimeout(k),Q(G(j._merchantConfigurationOptions)),j._cleanUpFocusIntercepts(),j._emit("ready")}),this._bus.on(h.FRAME_READY,function(W,Q){ce[W.field](Q)}),this._bus.on(h.INPUT_EVENT,H(ne).bind(this)),this._destructor.registerFunctionForTeardown(function(){var W,Q,J;for(W=0;W<j._injectedNodes.length;W++)Q=j._injectedNodes[W],J=Q.parentNode,J.removeChild(Q),J.classList.remove(v.externalClasses.FOCUSED,v.externalClasses.INVALID,v.externalClasses.VALID)}),this._destructor.registerFunctionForTeardown(function(){w()}),this._destructor.registerFunctionForTeardown(function(){var W=f(Y.prototype).concat(f(T.prototype));b(j,W)})}T.createChild(Y),Y.prototype._setupLabelFocus=function(U,k){var x,z,X=this,Z=P(k);if(k.id==null)return;function j(){X.focus(U)}for(x=Array.prototype.slice.call(document.querySelectorAll('label[for="'+k.id+'"]')),Z!==document&&(x=x.concat(Array.prototype.slice.call(Z.querySelectorAll('label[for="'+k.id+'"]')))),x=x.concat(c(k,"label")),x=x.filter(function(ne,ce,ue){return ue.indexOf(ne)===ce}),z=0;z<x.length;z++)x[z].addEventListener("click",j,!1);this._destructor.registerFunctionForTeardown(function(){for(z=0;z<x.length;z++)x[z].removeEventListener("click",j,!1)})},Y.prototype._getAnyFieldContainer=function(){var U=this;return Object.keys(this._fields).reduce(function(k,x){return k||U._fields[x].containerElement},null)},Y.prototype._cleanUpFocusIntercepts=function(){var U,k;document.forms.length<1?this._bus.emit(h.REMOVE_FOCUS_INTERCEPTS):(U=this._getAnyFieldContainer(),k=c(U,"form")[0],k?R.removeExtraFocusElements(k,function(x){this._bus.emit(h.REMOVE_FOCUS_INTERCEPTS,{id:x})}.bind(this)):this._bus.emit(h.REMOVE_FOCUS_INTERCEPTS))},Y.prototype._attachInvalidFieldContainersToError=function(U){U.details&&U.details.invalidFieldKeys&&U.details.invalidFieldKeys.length>0&&(U.details.invalidFields={},U.details.invalidFieldKeys.forEach(function(k){U.details.invalidFields[k]=this._fields[k].containerElement}.bind(this)))},Y.prototype.getChallenges=function(){return this._clientPromise.then(function(U){return U.getConfiguration().gatewayConfiguration.challenges})},Y.prototype.getSupportedCardTypes=function(){return this._clientPromise.then(function(U){var k=U.getConfiguration().gatewayConfiguration.creditCards.supportedCardTypes.map(function(x){return x==="MasterCard"?"Mastercard":x});return k})},Y.prototype.teardown=function(){var U=this;return new Promise(function(k,x){U._destructor.teardown(function(z){_.sendEvent(U._clientPromise,"custom.hosted-fields.teardown-completed"),z?x(z):k()})})},Y.prototype.tokenize=function(U){var k=this;return U||(U={}),new Promise(function(x,z){k._bus.emit(h.TOKENIZATION_REQUEST,U,function(X){var Z=X[0],j=X[1];Z?(k._attachInvalidFieldContainersToError(Z),z(new u(Z))):x(j)})})},Y.prototype.addClass=function(U,k){var x;return I.hasOwnProperty(U)?this._fields.hasOwnProperty(U)?this._bus.emit(h.ADD_CLASS,{field:U,classname:k}):x=new u({type:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.type,code:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.code,message:'Cannot add class to "'+U+'" field because it is not part of the current Hosted Fields options.'}):x=new u({type:A.HOSTED_FIELDS_FIELD_INVALID.type,code:A.HOSTED_FIELDS_FIELD_INVALID.code,message:'"'+U+'" is not a valid field. You must use a valid field option when adding a class.'}),x?Promise.reject(x):Promise.resolve()},Y.prototype.removeClass=function(U,k){var x;return I.hasOwnProperty(U)?this._fields.hasOwnProperty(U)?this._bus.emit(h.REMOVE_CLASS,{field:U,classname:k}):x=new u({type:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.type,code:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.code,message:'Cannot remove class from "'+U+'" field because it is not part of the current Hosted Fields options.'}):x=new u({type:A.HOSTED_FIELDS_FIELD_INVALID.type,code:A.HOSTED_FIELDS_FIELD_INVALID.code,message:'"'+U+'" is not a valid field. You must use a valid field option when removing a class.'}),x?Promise.reject(x):Promise.resolve()},Y.prototype.setAttribute=function(U){var k,x;return I.hasOwnProperty(U.field)?this._fields.hasOwnProperty(U.field)?(k=L(U.attribute,U.value),k?x=k:this._bus.emit(h.SET_ATTRIBUTE,{field:U.field,attribute:U.attribute,value:U.value})):x=new u({type:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.type,code:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.code,message:'Cannot set attribute for "'+U.field+'" field because it is not part of the current Hosted Fields options.'}):x=new u({type:A.HOSTED_FIELDS_FIELD_INVALID.type,code:A.HOSTED_FIELDS_FIELD_INVALID.code,message:'"'+U.field+'" is not a valid field. You must use a valid field option when setting an attribute.'}),x?Promise.reject(x):Promise.resolve()},Y.prototype.setMonthOptions=function(U){var k=this,x=this._merchantConfigurationOptions.fields,z;return x.expirationMonth?x.expirationMonth.select||(z="Expiration month field must be a select element."):z="Expiration month field must exist to use setMonthOptions.",z?Promise.reject(new u({type:A.HOSTED_FIELDS_FIELD_PROPERTY_INVALID.type,code:A.HOSTED_FIELDS_FIELD_PROPERTY_INVALID.code,message:z})):new Promise(function(X){k._bus.emit(h.SET_MONTH_OPTIONS,U,X)})},Y.prototype.setMessage=function(U){this._bus.emit(h.SET_MESSAGE,{field:U.field,message:U.message})},Y.prototype.removeAttribute=function(U){var k,x;return I.hasOwnProperty(U.field)?this._fields.hasOwnProperty(U.field)?(k=L(U.attribute),k?x=k:this._bus.emit(h.REMOVE_ATTRIBUTE,{field:U.field,attribute:U.attribute})):x=new u({type:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.type,code:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.code,message:'Cannot remove attribute for "'+U.field+'" field because it is not part of the current Hosted Fields options.'}):x=new u({type:A.HOSTED_FIELDS_FIELD_INVALID.type,code:A.HOSTED_FIELDS_FIELD_INVALID.code,message:'"'+U.field+'" is not a valid field. You must use a valid field option when removing an attribute.'}),x?Promise.reject(x):Promise.resolve()},Y.prototype.setPlaceholder=function(U,k){return this.setAttribute({field:U,attribute:"placeholder",value:k})},Y.prototype.clear=function(U){var k;return I.hasOwnProperty(U)?this._fields.hasOwnProperty(U)?this._bus.emit(h.CLEAR_FIELD,{field:U}):k=new u({type:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.type,code:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.code,message:'Cannot clear "'+U+'" field because it is not part of the current Hosted Fields options.'}):k=new u({type:A.HOSTED_FIELDS_FIELD_INVALID.type,code:A.HOSTED_FIELDS_FIELD_INVALID.code,message:'"'+U+'" is not a valid field. You must use a valid field option when clearing a field.'}),k?Promise.reject(k):Promise.resolve()},Y.prototype.focus=function(U){var k,x=this._fields[U];return I.hasOwnProperty(U)?this._fields.hasOwnProperty(U)?(x.frameElement.focus(),this._bus.emit(h.TRIGGER_INPUT_FOCUS,{field:U}),y.isIos()&&setTimeout(function(){K(x.containerElement)||x.containerElement.scrollIntoView()},B)):k=new u({type:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.type,code:A.HOSTED_FIELDS_FIELD_NOT_PRESENT.code,message:'Cannot focus "'+U+'" field because it is not part of the current Hosted Fields options.'}):k=new u({type:A.HOSTED_FIELDS_FIELD_INVALID.type,code:A.HOSTED_FIELDS_FIELD_INVALID.code,message:'"'+U+'" is not a valid field. You must use a valid field option when focusing a field.'}),k?Promise.reject(k):Promise.resolve()},Y.prototype.getState=function(){return this._state};function G(U){var k=t({},U);return k.fields=t({},k.fields),Object.keys(k.fields).forEach(function(x){k.fields[x]=t({},k.fields[x]),delete k.fields[x].container}),k}d.exports=C.wrapPrototype(Y)},{"../../lib/analytics":119,"../../lib/assign":121,"../../lib/braintree-error":124,"../../lib/constants":126,"../../lib/convert-methods-to-error":127,"../../lib/create-assets-url":129,"../../lib/create-deferred-client":131,"../../lib/destructor":133,"../../lib/errors":135,"../../lib/find-root-node":136,"../../lib/is-verified-domain":153,"../../lib/methods":155,"../../lib/shadow":158,"../shared/browser-detection":111,"../shared/constants":112,"../shared/errors":113,"../shared/find-parent-tags":114,"../shared/focus-intercept":115,"../shared/get-card-types":116,"./attribute-validation-error":104,"./compose-url":105,"./focus-change":106,"./get-styles-from-class":107,"./inject-frame":109,"@braintree/event-emitter":33,"@braintree/iframer":35,"@braintree/uuid":39,"@braintree/wrap-promise":43,framebus:52}],109:[function(e,d,m){"use strict";var t=e("../shared/focus-intercept"),a=e("../shared/constants").navigationDirections;d.exports=function(r,i,l,o){var u=i.getAttribute("type"),p=document.createElement("div"),E=document.createDocumentFragment(),v=t.generate(r,u,a.BACK,o),A=t.generate(r,u,a.FORWARD,o);return p.style.clear="both",E.appendChild(v),E.appendChild(i),E.appendChild(A),E.appendChild(p),l.appendChild(E),[i,p]}},{"../shared/constants":112,"../shared/focus-intercept":115}],110:[function(e,d,m){"use strict";var t=e("./external/hosted-fields"),a=e("../lib/basic-component-verification"),n=e("./shared/errors"),r=e("restricted-input/supports-input-formatting"),i=e("@braintree/wrap-promise"),l=e("../lib/braintree-error"),o="3.102.0";function u(p){return a.verify({name:"Hosted Fields",authorization:p.authorization,client:p.client}).then(function(){var E=new t(p);return new Promise(function(v,A){E.on("ready",function(){v(E)}),E.on("timeout",function(){A(new l(n.HOSTED_FIELDS_TIMEOUT))})})})}d.exports={supportsInputFormatting:r,create:i(u),VERSION:o}},{"../lib/basic-component-verification":122,"../lib/braintree-error":124,"./external/hosted-fields":108,"./shared/errors":113,"@braintree/wrap-promise":43,"restricted-input/supports-input-formatting":71}],111:[function(e,d,m){"use strict";var t=e("@braintree/browser-detection/is-android"),a=e("@braintree/browser-detection/is-chrome-os"),n=e("@braintree/browser-detection/is-ios"),r=e("@braintree/browser-detection/is-chrome");function i(){return t()||a()||n()}function l(){return r()&&n()}d.exports={isAndroid:t,isChromeOS:a,isChromeIos:l,isFirefox:e("@braintree/browser-detection/is-firefox"),isIos:n,isIosWebview:e("@braintree/browser-detection/is-ios-webview"),hasSoftwareKeyboard:i}},{"@braintree/browser-detection/is-android":22,"@braintree/browser-detection/is-chrome":24,"@braintree/browser-detection/is-chrome-os":23,"@braintree/browser-detection/is-firefox":25,"@braintree/browser-detection/is-ios":30,"@braintree/browser-detection/is-ios-webview":28}],112:[function(e,d,m){"use strict";var t=e("../../lib/enumerate"),a=e("./errors"),n="3.102.0",r={VERSION:n,maxExpirationYearAge:19,externalEvents:{FOCUS:"focus",BLUR:"blur",EMPTY:"empty",NOT_EMPTY:"notEmpty",VALIDITY_CHANGE:"validityChange",CARD_TYPE_CHANGE:"cardTypeChange"},defaultMaxLengths:{number:19,postalCode:8,expirationDate:7,expirationMonth:2,expirationYear:4,cvv:3},externalClasses:{FOCUSED:"braintree-hosted-fields-focused",INVALID:"braintree-hosted-fields-invalid",VALID:"braintree-hosted-fields-valid"},navigationDirections:{BACK:"before",FORWARD:"after"},defaultIFrameStyle:{border:"none",width:"100%",height:"100%",float:"left"},tokenizationErrorCodes:{81724:a.HOSTED_FIELDS_TOKENIZATION_FAIL_ON_DUPLICATE,81736:a.HOSTED_FIELDS_TOKENIZATION_CVV_VERIFICATION_FAILED},allowedStyles:["-moz-appearance","-moz-box-shadow","-moz-osx-font-smoothing","-moz-tap-highlight-color","-moz-transition","-webkit-appearance","-webkit-box-shadow","-webkit-font-smoothing","-webkit-tap-highlight-color","-webkit-transition","appearance","box-shadow","color","direction","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","letter-spacing","line-height","margin","margin-top","margin-right","margin-bottom","margin-left","opacity","outline","padding","padding-top","padding-right","padding-bottom","padding-left","text-align","text-shadow","transition"],allowedFields:{cardholderName:{name:"cardholder-name",label:"Cardholder Name"},number:{name:"credit-card-number",label:"Credit Card Number"},cvv:{name:"cvv",label:"CVV"},expirationDate:{name:"expiration",label:"Expiration Date"},expirationMonth:{name:"expiration-month",label:"Expiration Month"},expirationYear:{name:"expiration-year",label:"Expiration Year"},postalCode:{name:"postal-code",label:"Postal Code"}},allowedAttributes:{"aria-invalid":"boolean","aria-required":"boolean",disabled:"boolean",placeholder:"string"},autocompleteMappings:{"cardholder-name":"cc-name","credit-card-number":"cc-number",expiration:"cc-exp","expiration-month":"cc-exp-month","expiration-year":"cc-exp-year",cvv:"cc-csc","postal-code":"billing postal-code"}};r.events=t(["ADD_CLASS","AUTOFILL_DATA_AVAILABLE","BIN_AVAILABLE","CARD_FORM_ENTRY_HAS_BEGUN","CLEAR_FIELD","CONFIGURATION","FRAME_READY","INPUT_EVENT","READY_FOR_CLIENT","REMOVE_ATTRIBUTE","REMOVE_CLASS","REMOVE_FOCUS_INTERCEPTS","SET_ATTRIBUTE","SET_MESSAGE","SET_MONTH_OPTIONS","TOKENIZATION_REQUEST","TRIGGER_FOCUS_CHANGE","TRIGGER_INPUT_FOCUS","VALIDATE_STRICT"],"hosted-fields:"),d.exports=r},{"../../lib/enumerate":134,"./errors":113}],113:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error");d.exports={HOSTED_FIELDS_TIMEOUT:{type:t.types.UNKNOWN,code:"HOSTED_FIELDS_TIMEOUT",message:"Hosted Fields timed out when attempting to set up."},HOSTED_FIELDS_INVALID_FIELD_KEY:{type:t.types.MERCHANT,code:"HOSTED_FIELDS_INVALID_FIELD_KEY"},HOSTED_FIELDS_INVALID_FIELD_SELECTOR:{type:t.types.MERCHANT,code:"HOSTED_FIELDS_INVALID_FIELD_SELECTOR",message:"Selector does not reference a valid DOM node."},HOSTED_FIELDS_FIELD_DUPLICATE_IFRAME:{type:t.types.MERCHANT,code:"HOSTED_FIELDS_FIELD_DUPLICATE_IFRAME",message:"Element already contains a Braintree iframe."},HOSTED_FIELDS_FIELD_INVALID:{type:t.types.MERCHANT,code:"HOSTED_FIELDS_FIELD_INVALID"},HOSTED_FIELDS_FIELD_NOT_PRESENT:{type:t.types.MERCHANT,code:"HOSTED_FIELDS_FIELD_NOT_PRESENT"},HOSTED_FIELDS_TOKENIZATION_NETWORK_ERROR:{type:t.types.NETWORK,code:"HOSTED_FIELDS_TOKENIZATION_NETWORK_ERROR",message:"A tokenization network error occurred."},HOSTED_FIELDS_TOKENIZATION_FAIL_ON_DUPLICATE:{type:t.types.CUSTOMER,code:"HOSTED_FIELDS_TOKENIZATION_FAIL_ON_DUPLICATE",message:"This credit card already exists in the merchant's vault."},HOSTED_FIELDS_TOKENIZATION_CVV_VERIFICATION_FAILED:{type:t.types.CUSTOMER,code:"HOSTED_FIELDS_TOKENIZATION_CVV_VERIFICATION_FAILED",message:"CVV verification failed during tokenization."},HOSTED_FIELDS_FAILED_TOKENIZATION:{type:t.types.CUSTOMER,code:"HOSTED_FIELDS_FAILED_TOKENIZATION",message:"The supplied card data failed tokenization."},HOSTED_FIELDS_FIELDS_EMPTY:{type:t.types.CUSTOMER,code:"HOSTED_FIELDS_FIELDS_EMPTY",message:"All fields are empty. Cannot tokenize empty card fields."},HOSTED_FIELDS_FIELDS_INVALID:{type:t.types.CUSTOMER,code:"HOSTED_FIELDS_FIELDS_INVALID",message:"Some payment input fields are invalid. Cannot tokenize invalid card fields."},HOSTED_FIELDS_ATTRIBUTE_NOT_SUPPORTED:{type:t.types.MERCHANT,code:"HOSTED_FIELDS_ATTRIBUTE_NOT_SUPPORTED"},HOSTED_FIELDS_ATTRIBUTE_VALUE_NOT_ALLOWED:{type:t.types.MERCHANT,code:"HOSTED_FIELDS_ATTRIBUTE_VALUE_NOT_ALLOWED"},HOSTED_FIELDS_FIELD_PROPERTY_INVALID:{type:t.types.MERCHANT,code:"HOSTED_FIELDS_FIELD_PROPERTY_INVALID"}}},{"../../lib/braintree-error":124}],114:[function(e,d,m){"use strict";function t(a,n){for(var r=a.parentNode,i=[];r!=null;)r.tagName!=null&&r.tagName.toLowerCase()===n&&i.push(r),r=r.parentNode;return i}d.exports=t},{}],115:[function(e,d,m){"use strict";var t=e("./browser-detection"),a=e("./constants"),n=Object.keys(a.allowedFields),r=a.navigationDirections,i={generate:function(l,o,u,p){var E=document.createElement("input"),v={border:"none !important",display:"block !important",height:"1px !important",left:"-1px !important",opacity:"0 !important",position:"absolute !important",top:"-1px !important",width:"1px !important"},A=t.hasSoftwareKeyboard()||t.isFirefox();return A?(E.setAttribute("aria-hidden","true"),E.setAttribute("autocomplete","off"),E.setAttribute("data-braintree-direction",u),E.setAttribute("data-braintree-type",o),E.setAttribute("id","bt-"+o+"-"+u+"-"+l),E.setAttribute("style",JSON.stringify(v).replace(/[{}"]/g,"").replace(/,/g,";")),E.classList.add("focus-intercept"),E.addEventListener("focus",function(g){p(g),t.hasSoftwareKeyboard()||E.blur()}),E):document.createDocumentFragment()},destroy:function(l){var o;l?o=[document.getElementById(l)]:(o=document.querySelectorAll("[data-braintree-direction]"),o=[].slice.call(o)),o.forEach(function(u){u&&u.nodeType===1&&i.matchFocusElement(u.getAttribute("id"))&&u.parentNode.removeChild(u)})},matchFocusElement:function(l){var o,u,p,E;return!l||(o=l.split("-"),o.length<4)?!1:(u=o[0]==="bt",p=n.indexOf(o[1])>-1,E=o[2]===r.BACK||o[2]===r.FORWARD,!!(u&&p&&E))}};d.exports=i},{"./browser-detection":111,"./constants":112}],116:[function(e,d,m){"use strict";var t=e("credit-card-type");d.exports=function(a){var n=t(a);return n.forEach(function(r){r.type==="mastercard"&&(r.type="master-card")}),n}},{"credit-card-type":44}],117:[function(e,d,m){"use strict";var t=e("./american-express"),a=e("./apple-pay"),n=e("./client"),r=e("./data-collector"),i=e("./hosted-fields"),l=e("./local-payment"),o=e("./masterpass"),u=e("./payment-request"),p=e("./paypal"),E=e("./paypal-checkout"),v=e("./google-payment"),A=e("./sepa"),g=e("./three-d-secure"),s=e("./unionpay"),c=e("./us-bank-account"),y=e("./vault-manager"),h=e("./venmo"),T=e("./visa-checkout"),O=e("./preferred-payment-methods"),_="3.102.0";d.exports={americanExpress:t,applePay:a,client:n,dataCollector:r,hostedFields:i,localPayment:l,masterpass:o,googlePayment:v,paymentRequest:u,paypal:p,paypalCheckout:E,threeDSecure:g,unionpay:s,usBankAccount:c,vaultManager:y,venmo:h,visaCheckout:T,sepa:A,preferredPaymentMethods:O,VERSION:_}},{"./american-express":74,"./apple-pay":77,"./client":82,"./data-collector":98,"./google-payment":103,"./hosted-fields":110,"./local-payment":164,"./masterpass":167,"./payment-request":172,"./paypal":179,"./paypal-checkout":176,"./preferred-payment-methods":182,"./sepa":186,"./three-d-secure":198,"./unionpay":202,"./us-bank-account":208,"./vault-manager":211,"./venmo":216,"./visa-checkout":226}],118:[function(e,d,m){"use strict";var t=e("./create-authorization-data"),a=e("./json-clone"),n=e("./constants");function r(i,l){var o,u=l?a(l):{},p=t(i.authorization).attrs,E=a(i.analyticsMetadata);u.braintreeLibraryVersion=n.BRAINTREE_LIBRARY_VERSION;for(o in u._meta)u._meta.hasOwnProperty(o)&&(E[o]=u._meta[o]);return u._meta=E,p.tokenizationKey?u.tokenizationKey=p.tokenizationKey:u.authorizationFingerprint=p.authorizationFingerprint,u}d.exports=r},{"./constants":126,"./create-authorization-data":130,"./json-clone":154}],119:[function(e,d,m){"use strict";var t=e("./constants"),a=e("./add-metadata");function n(r,i,l){var o=Date.now();return Promise.resolve(r).then(function(u){var p=Date.now(),E=u.getConfiguration(),v=u._request,A=E.gatewayConfiguration.analytics.url,g={analytics:[{kind:t.ANALYTICS_PREFIX+i,isAsync:Math.floor(p/1e3)!==Math.floor(o/1e3),timestamp:o}]};v({url:A,method:"post",data:a(E,g),timeout:t.ANALYTICS_REQUEST_TIMEOUT_MS},l)}).catch(function(u){l&&l(u)})}d.exports={sendEvent:n}},{"./add-metadata":118,"./constants":126}],120:[function(e,d,m){"use strict";var t=e("@braintree/asset-loader/load-script");d.exports={loadScript:t}},{"@braintree/asset-loader/load-script":3}],121:[function(e,d,m){"use strict";var t=typeof Object.assign=="function"?Object.assign:a;function a(n){var r,i,l;for(r=1;r<arguments.length;r++){i=arguments[r];for(l in i)i.hasOwnProperty(l)&&(n[l]=i[l])}return n}d.exports={assign:t,_assign:a}},{}],122:[function(e,d,m){"use strict";var t=e("./braintree-error"),a=e("./errors"),n="3.102.0";function r(i){var l,o,u;return i?(u=i.name,l=i.client,o=i.authorization,!l&&!o?Promise.reject(new t({type:a.INSTANTIATION_OPTION_REQUIRED.type,code:a.INSTANTIATION_OPTION_REQUIRED.code,message:"options.client is required when instantiating "+u+"."})):!o&&l.getVersion()!==n?Promise.reject(new t({type:a.INCOMPATIBLE_VERSIONS.type,code:a.INCOMPATIBLE_VERSIONS.code,message:"Client (version "+l.getVersion()+") and "+u+" (version "+n+") components must be from the same SDK version."})):Promise.resolve()):Promise.reject(new t({type:a.INVALID_USE_OF_INTERNAL_FUNCTION.type,code:a.INVALID_USE_OF_INTERNAL_FUNCTION.code,message:"Options must be passed to basicComponentVerification function."}))}d.exports={verify:r}},{"./braintree-error":124,"./errors":135}],123:[function(e,d,m){"use strict";var t=e("./once");function a(n,r){var i=n.length===0;i?(n(),r(null)):n(r)}d.exports=function(n,r){var i,l=n.length,o=l,u=t(r);if(l===0){u(null);return}function p(E){if(E){u(E);return}o-=1,o===0&&u(null)}for(i=0;i<l;i++)a(n[i],p)}},{"./once":156}],124:[function(e,d,m){"use strict";var t=e("./enumerate");function a(n){if(!a.types.hasOwnProperty(n.type))throw new Error(n.type+" is not a valid type.");if(!n.code)throw new Error("Error code required.");if(!n.message)throw new Error("Error message required.");this.name="BraintreeError",this.code=n.code,this.message=n.message,this.type=n.type,this.details=n.details}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a.types=t(["CUSTOMER","MERCHANT","NETWORK","INTERNAL","UNKNOWN"]),a.findRootError=function(n){return n instanceof a&&n.details&&n.details.originalError?a.findRootError(n.details.originalError):n},d.exports=a},{"./enumerate":134}],125:[function(e,d,m){"use strict";function t(a){return a.replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1_$2").toLowerCase()}d.exports=function(a){return Object.keys(a).reduce(function(n,r){var i=t(r);return n[i]=a[r],n},{})}},{}],126:[function(e,d,m){"use strict";var t="3.102.0",a="web",n={production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"},r={production:"https://assets.braintreegateway.com",sandbox:"https://assets.braintreegateway.com"},i={production:"https://payments.braintree-api.com/graphql",sandbox:"https://payments.sandbox.braintree-api.com/graphql"};d.exports={ANALYTICS_PREFIX:a+".",ANALYTICS_REQUEST_TIMEOUT_MS:2e3,ASSETS_URLS:r,CLIENT_API_URLS:n,FRAUDNET_SOURCE:"BRAINTREE_SIGNIN",FRAUDNET_FNCLS:"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99",FRAUDNET_URL:"https://c.paypal.com/da/r/fb.js",BUS_CONFIGURATION_REQUEST_EVENT:"BUS_CONFIGURATION_REQUEST",GRAPHQL_URLS:i,INTEGRATION_TIMEOUT_MS:6e4,VERSION:t,INTEGRATION:"custom",SOURCE:"client",PLATFORM:a,BRAINTREE_LIBRARY_VERSION:"braintree/"+a+"/"+t}},{}],127:[function(e,d,m){"use strict";var t=e("./braintree-error"),a=e("./errors");d.exports=function(n,r){r.forEach(function(i){n[i]=function(){throw new t({type:a.METHOD_CALLED_AFTER_TEARDOWN.type,code:a.METHOD_CALLED_AFTER_TEARDOWN.code,message:i+" cannot be called after teardown."})}})}},{"./braintree-error":124,"./errors":135}],128:[function(e,d,m){"use strict";var t=e("./braintree-error");function a(n,r){return n instanceof t?n:new t({type:r.type,code:r.code,message:r.message,details:{originalError:n}})}d.exports=a},{"./braintree-error":124}],129:[function(e,d,m){"use strict";var t=e("./constants").ASSETS_URLS;function a(n){return t.production}d.exports={create:a}},{"./constants":126}],130:[function(e,d,m){"use strict";var t=e("../lib/vendor/polyfill").atob,a=e("../lib/constants").CLIENT_API_URLS;function n(l){return/^[a-zA-Z0-9]+_[a-zA-Z0-9]+_[a-zA-Z0-9_]+$/.test(l)}function r(l){var o=l.split("_"),u=o[0],p=o.slice(2).join("_");return{merchantId:p,environment:u}}function i(l){var o,u,p={attrs:{},configUrl:""};return n(l)?(u=r(l),p.environment=u.environment,p.attrs.tokenizationKey=l,p.configUrl=a[u.environment]+"/merchants/"+u.merchantId+"/client_api/v1/configuration"):(o=JSON.parse(t(l)),p.environment=o.environment,p.attrs.authorizationFingerprint=o.authorizationFingerprint,p.configUrl=o.configUrl,p.graphQL=o.graphQL),p}d.exports=i},{"../lib/constants":126,"../lib/vendor/polyfill":161}],131:[function(e,d,m){"use strict";var t=e("./braintree-error"),a=e("./assets"),n=e("./errors"),r="3.102.0";function i(l){var o=Promise.resolve();return l.client?Promise.resolve(l.client):(window.braintree&&window.braintree.client||(o=a.loadScript({src:l.assetsUrl+"/web/"+r+"/js/client.min.js"}).catch(function(u){return Promise.reject(new t({type:n.CLIENT_SCRIPT_FAILED_TO_LOAD.type,code:n.CLIENT_SCRIPT_FAILED_TO_LOAD.code,message:n.CLIENT_SCRIPT_FAILED_TO_LOAD.message,details:{originalError:u}}))})),o.then(function(){return window.braintree.client.VERSION!==r?Promise.reject(new t({type:n.INCOMPATIBLE_VERSIONS.type,code:n.INCOMPATIBLE_VERSIONS.code,message:"Client (version "+window.braintree.client.VERSION+") and "+l.name+" (version "+r+") components must be from the same SDK version."})):window.braintree.client.create({authorization:l.authorization,debug:l.debug})}))}d.exports={create:i}},{"./assets":120,"./braintree-error":124,"./errors":135}],132:[function(e,d,m){"use strict";d.exports=function(t){return function(){var a=arguments;setTimeout(function(){t.apply(null,a)},1)}}},{}],133:[function(e,d,m){"use strict";var t=e("./batch-execute-functions");function a(){this._teardownRegistry=[],this._isTearingDown=!1}a.prototype.registerFunctionForTeardown=function(n){typeof n=="function"&&this._teardownRegistry.push(n)},a.prototype.teardown=function(n){if(this._isTearingDown){n(new Error("Destructor is already tearing down"));return}this._isTearingDown=!0,t(this._teardownRegistry,function(r){this._teardownRegistry=[],this._isTearingDown=!1,typeof n=="function"&&n(r)}.bind(this))},d.exports=a},{"./batch-execute-functions":123}],134:[function(e,d,m){"use strict";function t(a,n){return n=n??"",a.reduce(function(r,i){return r[i]=n+i,r},{})}d.exports=t},{}],135:[function(e,d,m){"use strict";var t=e("./braintree-error");d.exports={INVALID_USE_OF_INTERNAL_FUNCTION:{type:t.types.INTERNAL,code:"INVALID_USE_OF_INTERNAL_FUNCTION"},INSTANTIATION_OPTION_REQUIRED:{type:t.types.MERCHANT,code:"INSTANTIATION_OPTION_REQUIRED"},INCOMPATIBLE_VERSIONS:{type:t.types.MERCHANT,code:"INCOMPATIBLE_VERSIONS"},CLIENT_SCRIPT_FAILED_TO_LOAD:{type:t.types.NETWORK,code:"CLIENT_SCRIPT_FAILED_TO_LOAD",message:"Braintree client script could not be loaded."},METHOD_CALLED_AFTER_TEARDOWN:{type:t.types.MERCHANT,code:"METHOD_CALLED_AFTER_TEARDOWN"}}},{"./braintree-error":124}],136:[function(e,d,m){"use strict";d.exports=function(a){for(;a.parentNode;)a=a.parentNode;return a}},{}],137:[function(e,d,m){"use strict";d.exports=function(t,a,n){var r;for(r=0;r<t.length;r++)if(t[r].hasOwnProperty(a)&&t[r][a]===n)return t[r];return null}},{}],138:[function(e,d,m){"use strict";var t=e("./strategies/popup"),a=e("./strategies/popup-bridge"),n=e("./strategies/modal"),r=e("framebus"),i=e("../shared/events"),l=e("../shared/errors"),o=e("../shared/constants"),u=e("@braintree/uuid"),p=e("@braintree/iframer"),E=e("../../braintree-error"),v=e("../shared/browser-detection"),A=e("./../../assign").assign,g=e("../../constants").BUS_CONFIGURATION_REQUEST_EVENT,s=["name","dispatchFrameUrl","openFrameUrl"];function c(){}function y(T){if(!T)throw new Error("Valid configuration is required");if(s.forEach(function(O){if(!T.hasOwnProperty(O))throw new Error("A valid frame "+O+" must be provided")}),!/^[\w_]+$/.test(T.name))throw new Error("A valid frame name must be provided")}function h(T){y(T),this._serviceId=u().replace(/-/g,""),this._options={name:T.name+"_"+this._serviceId,dispatchFrameUrl:T.dispatchFrameUrl,openFrameUrl:T.openFrameUrl,height:T.height,width:T.width,top:T.top,left:T.left},this.state=T.state||{},this._bus=new r({channel:this._serviceId}),this._setBusEvents()}h.prototype.initialize=function(T){var O=function(){T(),this._bus.off(i.DISPATCH_FRAME_READY,O)}.bind(this);this._bus.on(i.DISPATCH_FRAME_READY,O),this._writeDispatchFrame()},h.prototype._writeDispatchFrame=function(){var T=o.DISPATCH_FRAME_NAME+"_"+this._serviceId,O=this._options.dispatchFrameUrl;this._dispatchFrame=p({"aria-hidden":!0,name:T,title:T,src:O,class:o.DISPATCH_FRAME_CLASS,height:0,width:0,style:{position:"absolute",left:"-9999px"}}),document.body.appendChild(this._dispatchFrame)},h.prototype._setBusEvents=function(){this._bus.on(i.DISPATCH_FRAME_REPORT,function(T,O){this._onCompleteCallback&&this._onCompleteCallback.call(null,T.err,T.payload),this._frame.close(),this._onCompleteCallback=null,O&&O()}.bind(this)),this._bus.on(g,function(T){T(this.state)}.bind(this))},h.prototype.open=function(T,O){if(T=T||{},this._frame=this._getFrameForEnvironment(T),this._frame.initialize(O),!(this._frame instanceof a)){if(A(this.state,T.state),this._onCompleteCallback=O,this._frame.open(),this.isFrameClosed()){this._cleanupFrame(),O&&O(new E(l.FRAME_SERVICE_FRAME_OPEN_FAILED));return}this._pollForPopupClose()}},h.prototype.redirect=function(T){this._frame&&!this.isFrameClosed()&&this._frame.redirect(T)},h.prototype.close=function(){this.isFrameClosed()||this._frame.close()},h.prototype.focus=function(){this.isFrameClosed()||this._frame.focus()},h.prototype.createHandler=function(T){return T=T||{},{close:function(){T.beforeClose&&T.beforeClose(),this.close()}.bind(this),focus:function(){T.beforeFocus&&T.beforeFocus(),this.focus()}.bind(this)}},h.prototype.createNoopHandler=function(){return{close:c,focus:c}},h.prototype.teardown=function(){this.close(),this._dispatchFrame.parentNode.removeChild(this._dispatchFrame),this._dispatchFrame=null,this._cleanupFrame()},h.prototype.isFrameClosed=function(){return this._frame==null||this._frame.isClosed()},h.prototype._cleanupFrame=function(){this._frame=null,clearInterval(this._popupInterval),this._popupInterval=null},h.prototype._pollForPopupClose=function(){return this._popupInterval=setInterval(function(){this.isFrameClosed()&&(this._cleanupFrame(),this._onCompleteCallback&&this._onCompleteCallback(new E(l.FRAME_SERVICE_FRAME_CLOSED)))}.bind(this),o.POPUP_POLL_INTERVAL),this._popupInterval},h.prototype._getFrameForEnvironment=function(T){var O=v.supportsPopups(),_=!!window.popupBridge,I=A({},this._options,T);return _?new a(I):O?new t(I):new n(I)},d.exports=h},{"../../braintree-error":124,"../../constants":126,"../shared/browser-detection":145,"../shared/constants":146,"../shared/errors":147,"../shared/events":148,"./../../assign":121,"./strategies/modal":140,"./strategies/popup":143,"./strategies/popup-bridge":141,"@braintree/iframer":35,"@braintree/uuid":39,framebus:52}],139:[function(e,d,m){"use strict";var t=e("./frame-service");d.exports={create:function(n,r){var i=new t(n);i.initialize(function(){r(i)})}}},{"./frame-service":138}],140:[function(e,d,m){"use strict";var t=e("@braintree/iframer"),a=e("../../../assign").assign,n=e("../../shared/browser-detection"),r={position:"fixed",top:0,left:0,bottom:0,padding:0,margin:0,border:0,outline:"none",zIndex:20001,background:"#FFFFFF"};function i(){}function l(o){this._closed=null,this._frame=null,this._options=o||{},this._container=this._options.container||document.body}l.prototype.initialize=i,l.prototype.open=function(){var o={src:this._options.openFrameUrl,name:this._options.name,scrolling:"yes",height:"100%",width:"100%",style:a({},r),title:"Lightbox Frame"};n.isIos()?(n.isIosWKWebview()&&(this._lockScrolling(),o.style={}),this._el=document.createElement("div"),a(this._el.style,r,{height:"100%",width:"100%",overflow:"auto","-webkit-overflow-scrolling":"touch"}),this._frame=t(o),this._el.appendChild(this._frame)):this._el=this._frame=t(o),this._closed=!1,this._container.appendChild(this._el)},l.prototype.focus=i,l.prototype.close=function(){this._container.removeChild(this._el),this._frame=null,this._closed=!0,n.isIosWKWebview()&&this._unlockScrolling()},l.prototype.isClosed=function(){return!!this._closed},l.prototype.redirect=function(o){this._frame.src=o},l.prototype._unlockScrolling=function(){document.body.style.overflow=this._savedBodyProperties.overflowStyle,document.body.style.position=this._savedBodyProperties.positionStyle,window.scrollTo(this._savedBodyProperties.left,this._savedBodyProperties.top),delete this._savedBodyProperties},l.prototype._lockScrolling=function(){var o=document.documentElement;this._savedBodyProperties={left:(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0),top:(window.pageYOffset||o.scrollTop)-(o.clientTop||0),overflowStyle:document.body.style.overflow,positionStyle:document.body.style.position},document.body.style.overflow="hidden",document.body.style.position="fixed",window.scrollTo(0,0)},d.exports=l},{"../../../assign":121,"../../shared/browser-detection":145,"@braintree/iframer":35}],141:[function(e,d,m){"use strict";var t=e("../../../braintree-error"),a=e("../../shared/errors");function n(){}function r(i){this._closed=null,this._options=i}r.prototype.initialize=function(i){var l=this;window.popupBridge.onComplete=function(o,u){var p=!u&&!o;if(l._closed=!0,o||p){i(new t(a.FRAME_SERVICE_FRAME_CLOSED));return}i(null,u)}},r.prototype.open=function(i){var l;i=i||{},l=i.openFrameUrl||this._options.openFrameUrl,this._closed=!1,window.popupBridge.open(l)},r.prototype.focus=n,r.prototype.close=n,r.prototype.isClosed=function(){return!!this._closed},r.prototype.redirect=function(i){this.open({openFrameUrl:i})},d.exports=r},{"../../../braintree-error":124,"../../shared/errors":147}],142:[function(e,d,m){"use strict";var t=e("../../../shared/constants"),a=e("./position");function n(r,i,l){return typeof i<"u"?i:a[r](l)}d.exports=function(i){var l=i.height||t.DEFAULT_POPUP_HEIGHT,o=i.width||t.DEFAULT_POPUP_WIDTH,u=n("top",i.top,l),p=n("left",i.left,o);return[t.POPUP_BASE_OPTIONS,"height="+l,"width="+o,"top="+u,"left="+p].join(",")}},{"../../../shared/constants":146,"./position":144}],143:[function(e,d,m){"use strict";var t=e("./compose-options");function a(){}function n(r){this._frame=null,this._options=r||{}}n.prototype.initialize=a,n.prototype.open=function(){this._frame=window.open(this._options.openFrameUrl,this._options.name,t(this._options))},n.prototype.focus=function(){this._frame.focus()},n.prototype.close=function(){this._frame.closed||this._frame.close()},n.prototype.isClosed=function(){return!this._frame||!!this._frame.closed},n.prototype.redirect=function(r){this._frame.location.href=r},d.exports=n},{"./compose-options":142}],144:[function(e,d,m){"use strict";function t(r){var i=window.outerHeight||document.documentElement.clientHeight,l=window.screenY==null?window.screenTop:window.screenY;return n(i,r,l)}function a(r){var i=window.outerWidth||document.documentElement.clientWidth,l=window.screenX==null?window.screenLeft:window.screenX;return n(i,r,l)}function n(r,i,l){return(r-i)/2+l}d.exports={top:t,left:a,center:n}},{}],145:[function(e,d,m){"use strict";d.exports={isIos:e("@braintree/browser-detection/is-ios"),isIosWKWebview:e("@braintree/browser-detection/is-ios-wkwebview"),supportsPopups:e("@braintree/browser-detection/supports-popups")}},{"@braintree/browser-detection/is-ios":30,"@braintree/browser-detection/is-ios-wkwebview":29,"@braintree/browser-detection/supports-popups":32}],146:[function(e,d,m){"use strict";d.exports={DISPATCH_FRAME_NAME:"dispatch",DISPATCH_FRAME_CLASS:"braintree-dispatch-frame",POPUP_BASE_OPTIONS:"resizable,scrollbars",DEFAULT_POPUP_WIDTH:450,DEFAULT_POPUP_HEIGHT:535,POPUP_POLL_INTERVAL:100,POPUP_CLOSE_TIMEOUT:100}},{}],147:[function(e,d,m){"use strict";var t=e("../../braintree-error");d.exports={FRAME_SERVICE_FRAME_CLOSED:{type:t.types.INTERNAL,code:"FRAME_SERVICE_FRAME_CLOSED",message:"Frame closed before tokenization could occur."},FRAME_SERVICE_FRAME_OPEN_FAILED:{type:t.types.INTERNAL,code:"FRAME_SERVICE_FRAME_OPEN_FAILED",message:"Frame failed to open."}}},{"../../braintree-error":124}],148:[function(e,d,m){"use strict";var t=e("../../enumerate");d.exports=t(["DISPATCH_FRAME_READY","DISPATCH_FRAME_REPORT"],"frameService:")},{"../../enumerate":134}],149:[function(e,d,m){"use strict";var t="3.102.0",a=e("./assign").assign;function n(r,i){var l=r.analyticsMetadata,o={gateway:"braintree","braintree:merchantId":r.gatewayConfiguration.merchantId,"braintree:apiVersion":"v1","braintree:sdkVersion":t,"braintree:metadata":JSON.stringify({source:l.source,integration:l.integration,sessionId:l.sessionId,version:t,platform:l.platform})};return a({},o,i)}d.exports=function(r,i,l){var o,u,p=r.gatewayConfiguration.androidPay,E=r.gatewayConfiguration.environment==="production"?"PRODUCTION":"TEST";return i===2?(o={apiVersion:2,apiVersionMinor:0,environment:E,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:p.supportedNetworks.map(function(v){return v.toUpperCase()})},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:n(r,{"braintree:authorizationFingerprint":p.googleAuthorizationFingerprint})}}]},l&&(o.merchantInfo={merchantId:l}),p.paypalClientId&&(u={type:"PAYPAL",parameters:{purchase_context:{purchase_units:[{payee:{client_id:p.paypalClientId},recurring_payment:!0}]}},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:n(r,{"braintree:paypalClientId":p.paypalClientId})}},o.allowedPaymentMethods.push(u))):(o={environment:E,allowedPaymentMethods:["CARD","TOKENIZED_CARD"],paymentMethodTokenizationParameters:{tokenizationType:"PAYMENT_GATEWAY",parameters:n(r,{"braintree:authorizationFingerprint":p.googleAuthorizationFingerprint})},cardRequirements:{allowedCardNetworks:p.supportedNetworks.map(function(v){return v.toUpperCase()})}},r.authorizationType==="TOKENIZATION_KEY"&&(o.paymentMethodTokenizationParameters.parameters["braintree:clientKey"]=r.authorization),l&&(o.merchantId=l),i&&(o.apiVersion=i)),o}},{"./assign":121}],150:[function(e,d,m){"use strict";d.exports=function(a){a=a||window;try{return a.self!==a.top}catch{return!0}}},{}],151:[function(e,d,m){"use strict";function t(n){var r=n.split("-");return new Date(r[0],r[1],r[2])}function a(n,r){return t(n)<=t(r)}d.exports=a},{}],152:[function(e,d,m){"use strict";function t(a){return a=a||window.location.protocol,a==="https:"}d.exports={isHTTPS:t}},{}],153:[function(e,d,m){"use strict";var t,a={"paypal.com":1,"braintreepayments.com":1,"braintreegateway.com":1,"braintree-api.com":1};function n(i){return i.split(".").slice(-2).join(".")}function r(i){var l;return i=i.toLowerCase(),/^https:/.test(i)?(t=t||document.createElement("a"),t.href=i,l=n(t.hostname),a.hasOwnProperty(l)):!1}d.exports=r},{}],154:[function(e,d,m){"use strict";d.exports=function(t){return JSON.parse(JSON.stringify(t))}},{}],155:[function(e,d,m){"use strict";d.exports=function(t){return Object.keys(t).filter(function(a){return typeof t[a]=="function"})}},{}],156:[function(e,d,m){"use strict";function t(a){var n=!1;return function(){n||(n=!0,a.apply(null,arguments))}}d.exports=t},{}],157:[function(e,d,m){"use strict";function t(o){var u;for(u in o)if(o.hasOwnProperty(u))return!0;return!1}function a(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.toString.call(o)==="[object Array]"||!1}function n(o){return o=o||window.location.href,/\?/.test(o)}function r(o){var u,p;return o=o||window.location.href,n(o)?(u=o.split("?")[1]||"",u=u.replace(/#.*$/,"").split("&"),p=u.reduce(function(E,v){var A=v.split("="),g=decodeURIComponent(A[0]),s=decodeURIComponent(A[1]);return E[g]=s,E},{}),p):{}}function i(o,u){var p,E,v,A=[];for(v in o)o.hasOwnProperty(v)&&(E=o[v],u?a(o)?p=u+"[]":p=u+"["+v+"]":p=v,typeof E=="object"?A.push(i(E,p)):A.push(encodeURIComponent(p)+"="+encodeURIComponent(E)));return A.join("&")}function l(o,u){return o=o||"",u!=null&&typeof u=="object"&&t(u)&&(o+=o.indexOf("?")===-1?"?":"",o+=o.indexOf("=")!==-1?"&":"",o+=i(u)),o}d.exports={parse:r,stringify:i,queryify:l,hasQueryParams:n}},{}],158:[function(e,d,m){"use strict";var t=e("@braintree/uuid"),a=e("./find-root-node");function n(l){return l=a(l),l.toString()==="[object ShadowRoot]"}function r(l){return l=a(l),n(l)?l.host:null}function i(l,o){var u=a(l).querySelector("style"),p=r(l),E="shadow-slot-"+t(),v=document.createElement("slot"),A=document.createElement("div");return v.setAttribute("name",E),l.appendChild(v),A.setAttribute("slot",E),p.appendChild(A),o&&(u||(u=document.createElement("style"),l.appendChild(u)),u.sheet.insertRule('::slotted([slot="'+E+'"]) { '+o+" }")),n(p)?i(A,o):A}d.exports={isShadowElement:n,getShadowHost:r,transformToSlot:i}},{"./find-root-node":136,"@braintree/uuid":39}],159:[function(e,d,m){"use strict";d.exports=function(t){return t.indexOf("_")===-1?t:t.toLowerCase().replace(/(\_\w)/g,function(a){return a[1].toUpperCase()})}},{}],160:[function(e,d,m){"use strict";function t(a){return a?"":".min"}d.exports=t},{}],161:[function(e,d,m){"use strict";var t=typeof atob=="function"?atob:a;function a(n){var r,i,l,o,u,p,E,v,A=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="";if(!A.test(n))throw new Error("Non base64 encoded input passed to window.atob polyfill");v=0;do o=g.indexOf(n.charAt(v++)),u=g.indexOf(n.charAt(v++)),p=g.indexOf(n.charAt(v++)),E=g.indexOf(n.charAt(v++)),r=(o&63)<<2|u>>4&3,i=(u&15)<<4|p>>2&15,l=(p&3)<<6|E&63,s+=String.fromCharCode(r)+(i?String.fromCharCode(i):"")+(l?String.fromCharCode(l):"");while(v<n.length);return s}d.exports={atob:function(n){return t.call(window,n)},_atob:a}},{}],162:[function(e,d,m){"use strict";d.exports={REQUIRED_OPTIONS_FOR_START_PAYMENT:["givenName","surname","currencyCode","onPaymentStart","paymentType","amount","fallback"],REQUIRED_OPTIONS_FOR_PAY_UPON_INVOICE_PAYMENT_TYPE:["givenName","surname","currencyCode","onPaymentStart","paymentType","amount","address","billingAddress","birthDate","email","locale","customerServiceInstructions","correlationId","phone","phoneCountryCode","lineItems"],REQUIRED_OPTIONS_FOR_ADDRESS:["streetAddress","locality","postalCode","countryCode"],REQUIRED_OPTIONS_FOR_LINE_ITEMS:["category","name","quantity","unitAmount","unitTaxAmount"],REQUIRED_OPTIONS_FOR_BLIK_SEAMLESS_PAYMENT_TYPE:["givenName","surname","currencyCode","onPaymentStart","paymentType","amount"],REQUIRED_OPTIONS_FOR_BLIK_OPTIONS_LEVEL_0:["authCode"],REQUIRED_OPTIONS_FOR_BLIK_OPTIONS_ONE_CLICK_FIRST:["authCode","consumerReference","aliasLabel"],REQUIRED_OPTIONS_FOR_BLIK_OPTIONS_ONE_CLICK_SUBSEQUENT:["consumerReference","aliasKey"]}},{}],163:[function(e,d,m){"use strict";var t=e("../../lib/frame-service/external"),a=e("../../lib/braintree-error"),n=e("../../lib/use-min"),r="3.102.0",i=e("../../lib/constants").INTEGRATION_TIMEOUT_MS,l=e("../../lib/analytics"),o=e("../../lib/methods"),u=e("../../lib/convert-methods-to-error"),p=e("../../lib/convert-to-braintree-error"),E=e("@braintree/extended-promise"),v=e("../../lib/querystring"),A=e("@braintree/wrap-promise"),g=e("./constants"),s=e("../shared/errors"),c=1282,y=720;E.suppressUnhandledPromiseMessage=!0;function h(N){this._client=N.client,this._assetsUrl=N.client.getConfiguration().gatewayConfiguration.assetsUrl+"/web/"+r,this._isDebug=N.client.getConfiguration().isDebug,this._loadingFrameUrl=this._assetsUrl+"/html/local-payment-landing-frame"+n(this._isDebug)+".html",this._authorizationInProgress=!1,this._paymentType="unknown",this._merchantAccountId=N.merchantAccountId}h.prototype._initialize=function(){var N=this,P=this._client,b=setTimeout(function(){l.sendEvent(P,"local-payment.load.timed-out")},i);return new Promise(function(D){t.create({name:"localpaymentlandingpage",dispatchFrameUrl:N._assetsUrl+"/html/dispatch-frame"+n(N._isDebug)+".html",openFrameUrl:N._loadingFrameUrl},function(M){N._frameService=M,clearTimeout(b),l.sendEvent(P,"local-payment.load.succeeded"),D(N)})})},h.prototype.startPayment=function(N){var P,b,D,M,L,C,R,w,B,H=this,K=this._frameService._serviceId;return P=f(N),P?(b=new a(s.LOCAL_PAYMENT_START_PAYMENT_MISSING_REQUIRED_OPTION),typeof P=="string"&&(b.details="Missing required '"+P+"' option."),Promise.reject(b)):(w=N.windowOptions||{},D=N.address||{},M=N.fallback||{},R=N.billingAddress||{},L={amount:N.amount,bic:N.bic,billingAddress:{line1:R.streetAddress,line2:R.extendedAddress,city:R.locality,state:R.region,postalCode:R.postalCode,countryCode:R.countryCode},birthDate:N.birthDate,blikOptions:N.blikOptions,cancelUrl:v.queryify(H._assetsUrl+"/html/local-payment-redirect-frame"+n(H._isDebug)+".html",{channel:K,r:M.cancelUrl||M.url,t:M.cancelButtonText||M.buttonText,c:1}),city:D.locality,correlationId:N.correlationId,countryCode:D.countryCode,currencyIsoCode:N.currencyCode,discountAmount:N.discountAmount,experienceProfile:{brandName:N.displayName,customerServiceInstructions:N.customerServiceInstructions,locale:N.locale,noShipping:!N.shippingAddressRequired},firstName:N.givenName,fundingSource:N.paymentType,intent:"sale",lastName:N.surname,line1:D.streetAddress,line2:D.extendedAddress,lineItems:N.lineItems,merchantAccountId:H._merchantAccountId,merchantOrPartnerCustomerId:N.customerId,payerEmail:N.email,paymentTypeCountryCode:N.paymentTypeCountryCode,phone:N.phone,phoneCountryCode:N.phoneCountryCode,postalCode:D.postalCode,recurrent:N.recurrent,returnUrl:v.queryify(H._assetsUrl+"/html/local-payment-redirect-frame"+n(H._isDebug)+".html",{channel:K,r:M.url,t:M.buttonText}),shippingAmount:N.shippingAmount,state:D.region},H._paymentType=N.paymentType.toLowerCase(),H._authorizationInProgress?(l.sendEvent(H._client,H._paymentType+".local-payment.start-payment.error.already-opened"),Promise.reject(new a(s.LOCAL_PAYMENT_ALREADY_IN_PROGRESS))):(H._authorizationInProgress=!0,C=new E,T(N)||(H._startPaymentCallback=H._createStartPaymentCallback(function(Y){C.resolve(Y)},function(Y){C.reject(Y)}),H._frameService.open({width:w.width||c,height:w.height||y},H._startPaymentCallback)),H._client.request({method:"post",endpoint:"local_payments/create",data:L}).then(function(Y){var G=Y.paymentResource.redirectUrl;l.sendEvent(H._client,H._paymentType+".local-payment.start-payment.opened"),H._startPaymentOptions=N,T(N)?(H._authorizationInProgress=!1,typeof G=="string"&&G.length?C.reject(new a(s.LOCAL_PAYMENT_START_PAYMENT_DEFERRED_PAYMENT_FAILED)):(B=N.onPaymentStart({paymentId:Y.paymentResource.paymentToken}),B instanceof Promise?B.then(function(){C.resolve()}):C.resolve())):N.onPaymentStart({paymentId:Y.paymentResource.paymentToken},function(){H._frameService.redirect(Y.paymentResource.redirectUrl)})}).catch(function(Y){var G=Y.details&&Y.details.httpStatus;if(H._frameService.close(),H._authorizationInProgress=!1,G===422){C.reject(new a({type:s.LOCAL_PAYMENT_INVALID_PAYMENT_OPTION.type,code:s.LOCAL_PAYMENT_INVALID_PAYMENT_OPTION.code,message:s.LOCAL_PAYMENT_INVALID_PAYMENT_OPTION.message,details:{originalError:Y}}));return}C.reject(p(Y,{type:s.LOCAL_PAYMENT_START_PAYMENT_FAILED.type,code:s.LOCAL_PAYMENT_START_PAYMENT_FAILED.code,message:s.LOCAL_PAYMENT_START_PAYMENT_FAILED.message}))}),C))},h.prototype.tokenize=function(N){var P=this,b=this._client;return N=N||v.parse(),N.queryItems&&(N=N.queryItems),N.c||N.wasCanceled?Promise.reject(new a({type:s.LOCAL_PAYMENT_CANCELED.type,code:s.LOCAL_PAYMENT_CANCELED.code,message:s.LOCAL_PAYMENT_CANCELED.message,details:{originalError:{errorcode:N.errorcode,token:N.btLpToken}}})):N.errorcode?Promise.reject(new a({type:s.LOCAL_PAYMENT_START_PAYMENT_FAILED.type,code:s.LOCAL_PAYMENT_START_PAYMENT_FAILED.code,message:s.LOCAL_PAYMENT_START_PAYMENT_FAILED.message,details:{originalError:{errorcode:N.errorcode,token:N.btLpToken}}})):b.request({endpoint:"payment_methods/paypal_accounts",method:"post",data:this._formatTokenizeData(N)}).then(function(D){var M=P._formatTokenizePayload(D);return window.popupBridge?l.sendEvent(b,P._paymentType+".local-payment.tokenization.success-popupbridge"):l.sendEvent(b,P._paymentType+".local-payment.tokenization.success"),M}).catch(function(D){return l.sendEvent(b,P._paymentType+".local-payment.tokenization.failed"),Promise.reject(p(D,{type:s.LOCAL_PAYMENT_TOKENIZATION_FAILED.type,code:s.LOCAL_PAYMENT_TOKENIZATION_FAILED.code,message:s.LOCAL_PAYMENT_TOKENIZATION_FAILED.message}))})},h.prototype.closeWindow=function(){this._authoriztionInProgress&&l.sendEvent(this._client,this._paymentType+".local-payment.start-payment.closed.by-merchant"),this._frameService.close()},h.prototype.focusWindow=function(){this._frameService.focus()},h.prototype._createStartPaymentCallback=function(N,P){var b=this,D=this._client;return function(M,L){if(b._authorizationInProgress=!1,M)if(M.code==="FRAME_SERVICE_FRAME_CLOSED"){if(L&&L.errorcode==="processing_error"){l.sendEvent(D,b._paymentType+".local-payment.failed-in-window"),P(new a(s.LOCAL_PAYMENT_START_PAYMENT_FAILED));return}l.sendEvent(D,b._paymentType+".local-payment.tokenization.closed.by-user"),P(new a(s.LOCAL_PAYMENT_WINDOW_CLOSED))}else M.code&&M.code.indexOf("FRAME_SERVICE_FRAME_OPEN_FAILED")>-1&&P(new a({code:s.LOCAL_PAYMENT_WINDOW_OPEN_FAILED.code,type:s.LOCAL_PAYMENT_WINDOW_OPEN_FAILED.type,message:s.LOCAL_PAYMENT_WINDOW_OPEN_FAILED.message,details:{originalError:M}}));else L&&(window.popupBridge||b._frameService.redirect(b._loadingFrameUrl),b.tokenize(L).then(N).catch(P).then(function(){b._frameService.close()}))}},h.prototype._formatTokenizePayload=function(N){var P,b={};return N.paypalAccounts&&(b=N.paypalAccounts[0]),P={nonce:b.nonce,details:{},type:b.type},b.details&&(b.details.payerInfo&&(P.details=b.details.payerInfo),b.details.correlationId&&(P.correlationId=b.details.correlationId)),P},h.prototype.hasTokenizationParams=function(){var N=v.parse();return N.errorcode?!0:!!(N.btLpToken&&N.btLpPaymentId&&N.btLpPayerId)},h.prototype._formatTokenizeData=function(N){var P=this._client.getConfiguration(),b=P.gatewayConfiguration,D={merchantAccountId:this._merchantAccountId,paypalAccount:{correlationId:N.btLpToken||N.token,paymentToken:N.btLpPaymentId||N.paymentId,payerId:N.btLpPayerId||N.PayerID,unilateral:b.paypal.unvettedMerchant,intent:"sale"}};return D};function T(N){var P=N.blikOptions||{},b=typeof N.paymentType=="string"?N.paymentType.toLowerCase():N.paymentType;return b==="pay_upon_invoice"?!0:b==="blik"?P.hasOwnProperty("level_0")||P.hasOwnProperty("oneClick"):!1}function O(N){var P,b;for(P=0;P<g.REQUIRED_OPTIONS_FOR_ADDRESS.length;P++)if(b=g.REQUIRED_OPTIONS_FOR_ADDRESS[P],!N.hasOwnProperty(b))return b;return!1}function _(N){var P,b,D,M;for(b=0;b<N.length;b++)for(D=N[b],P=0;P<g.REQUIRED_OPTIONS_FOR_LINE_ITEMS.length;P++)if(M=g.REQUIRED_OPTIONS_FOR_LINE_ITEMS[P],!D.hasOwnProperty(M))return M;return!1}function I(N){var P,b,D,M=N.blikOptions||{};for(P=0;P<g.REQUIRED_OPTIONS_FOR_BLIK_SEAMLESS_PAYMENT_TYPE.length;P++)if(b=g.REQUIRED_OPTIONS_FOR_BLIK_SEAMLESS_PAYMENT_TYPE[P],!N.hasOwnProperty(b))return b;if(M.hasOwnProperty("level_0")){for(P=0;P<g.REQUIRED_OPTIONS_FOR_BLIK_OPTIONS_LEVEL_0.length;P++)if(b=g.REQUIRED_OPTIONS_FOR_BLIK_OPTIONS_LEVEL_0[P],!M.level_0.hasOwnProperty(b))return"blikOptions.level_0."+b}else if(M.hasOwnProperty("oneClick")){if(D=M.oneClick||{},D.hasOwnProperty("aliasKey")){for(P=0;P<g.REQUIRED_OPTIONS_FOR_BLIK_OPTIONS_ONE_CLICK_SUBSEQUENT.length;P++)if(b=g.REQUIRED_OPTIONS_FOR_BLIK_OPTIONS_ONE_CLICK_SUBSEQUENT[P],!D.hasOwnProperty(b))return"blikOptions.oneClick."+b}else for(P=0;P<g.REQUIRED_OPTIONS_FOR_BLIK_OPTIONS_ONE_CLICK_FIRST.length;P++)if(b=g.REQUIRED_OPTIONS_FOR_BLIK_OPTIONS_ONE_CLICK_FIRST[P],!D.hasOwnProperty(b))return"blikOptions.oneClick."+b}return!1}function f(N){var P,b,D,M,L;if(!N)return!0;if(T(N)){if(L=N.paymentType||"",L.toLowerCase()==="pay_upon_invoice")for(P=0;P<g.REQUIRED_OPTIONS_FOR_PAY_UPON_INVOICE_PAYMENT_TYPE.length;P++){if(b=g.REQUIRED_OPTIONS_FOR_PAY_UPON_INVOICE_PAYMENT_TYPE[P],!N.hasOwnProperty(b))return b;if(b==="address"||b==="billingAddress"){if(D=O(N[b]),D)return b+"."+D}else if(b==="lineItems"&&(M=_(N[b]),M))return b+"."+M}else if(L.toLowerCase()==="blik")return I(N)}else{for(P=0;P<g.REQUIRED_OPTIONS_FOR_START_PAYMENT.length;P++)if(b=g.REQUIRED_OPTIONS_FOR_START_PAYMENT[P],!N.hasOwnProperty(b))return b;if(!N.fallback.url)return"fallback.url";if(!N.fallback.buttonText)return"fallback.buttonText";if(N.recurrent===!0&&!N.customerId)return"customerId"}return!1}h.prototype.teardown=function(){var N=this;return N._frameService.teardown(),u(N,o(h.prototype)),l.sendEvent(N._client,"local-payment.teardown-completed"),Promise.resolve()},d.exports=A.wrapPrototype(h)},{"../../lib/analytics":119,"../../lib/braintree-error":124,"../../lib/constants":126,"../../lib/convert-methods-to-error":127,"../../lib/convert-to-braintree-error":128,"../../lib/frame-service/external":139,"../../lib/methods":155,"../../lib/querystring":157,"../../lib/use-min":160,"../shared/errors":165,"./constants":162,"@braintree/extended-promise":34,"@braintree/wrap-promise":43}],164:[function(e,d,m){"use strict";var t=e("../lib/analytics"),a=e("../lib/basic-component-verification"),n=e("../lib/create-deferred-client"),r=e("../lib/create-assets-url"),i=e("./external/local-payment"),l="3.102.0",o=e("@braintree/wrap-promise"),u=e("../lib/braintree-error"),p=e("./shared/errors");function E(v){var A="Local Payment";return a.verify({name:A,client:v.client,authorization:v.authorization}).then(function(){return n.create({authorization:v.authorization,client:v.client,debug:v.debug,assetsUrl:r.create(v.authorization),name:A})}).then(function(g){var s,c=g.getConfiguration();return v.client=g,c.gatewayConfiguration.paypalEnabled!==!0?Promise.reject(new u(p.LOCAL_PAYMENT_NOT_ENABLED)):(t.sendEvent(g,"local-payment.initialized"),s=new i(v),s._initialize())})}d.exports={create:o(E),VERSION:l}},{"../lib/analytics":119,"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./external/local-payment":163,"./shared/errors":165,"@braintree/wrap-promise":43}],165:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error");d.exports={LOCAL_PAYMENT_NOT_ENABLED:{type:t.types.MERCHANT,code:"LOCAL_PAYMENT_NOT_ENABLED",message:"LocalPayment is not enabled for this merchant."},LOCAL_PAYMENT_ALREADY_IN_PROGRESS:{type:t.types.MERCHANT,code:"LOCAL_PAYMENT_ALREADY_IN_PROGRESS",message:"LocalPayment payment is already in progress."},LOCAL_PAYMENT_CANCELED:{type:t.types.CUSTOMER,code:"LOCAL_PAYMENT_CANCELED",message:"Customer canceled the LocalPayment before authorizing."},LOCAL_PAYMENT_WINDOW_CLOSED:{type:t.types.CUSTOMER,code:"LOCAL_PAYMENT_WINDOW_CLOSED",message:"Customer closed LocalPayment window before authorizing."},LOCAL_PAYMENT_WINDOW_OPEN_FAILED:{type:t.types.MERCHANT,code:"LOCAL_PAYMENT_WINDOW_OPEN_FAILED",message:"LocalPayment window failed to open; make sure startPayment was called in response to a user action."},LOCAL_PAYMENT_START_PAYMENT_FAILED:{type:t.types.NETWORK,code:"LOCAL_PAYMENT_START_PAYMENT_FAILED",message:"LocalPayment startPayment failed."},LOCAL_PAYMENT_START_PAYMENT_MISSING_REQUIRED_OPTION:{type:t.types.MERCHANT,code:"LOCAL_PAYMENT_START_PAYMENT_MISSING_REQUIRED_OPTION",message:"Missing required option for startPayment."},LOCAL_PAYMENT_START_PAYMENT_DEFERRED_PAYMENT_FAILED:{type:t.types.UNKNOWN,code:"LOCAL_PAYMENT_START_PAYMENT_DEFERRED_PAYMENT_FAILED",message:"LocalPayment startPayment deferred payment failed."},LOCAL_PAYMENT_TOKENIZATION_FAILED:{type:t.types.NETWORK,code:"LOCAL_PAYMENT_TOKENIZATION_FAILED",message:"Could not tokenize user's local payment method."},LOCAL_PAYMENT_INVALID_PAYMENT_OPTION:{type:t.types.MERCHANT,code:"LOCAL_PAYMENT_INVALID_PAYMENT_OPTION",message:"Local payment options are invalid."}}},{"../../lib/braintree-error":124}],166:[function(e,d,m){"use strict";var t=e("../../lib/frame-service/external"),a=e("../../lib/braintree-error"),n=e("../shared/errors"),r="3.102.0",i=e("../../lib/methods"),l=e("@braintree/wrap-promise"),o=e("../../lib/analytics"),u=e("../../lib/convert-methods-to-error"),p=e("../../lib/convert-to-braintree-error"),E=e("../shared/constants"),v=e("../../lib/constants").INTEGRATION_TIMEOUT_MS;function A(c){var y=c.client.getConfiguration();this._client=c.client,this._assetsUrl=y.gatewayConfiguration.assetsUrl+"/web/"+r,this._isDebug=y.isDebug,this._authInProgress=!1,window.popupBridge&&typeof window.popupBridge.getReturnUrlPrefix=="function"?this._callbackUrl=window.popupBridge.getReturnUrlPrefix()+"return":this._callbackUrl=this._assetsUrl+"/html/redirect-frame"+(this._isDebug?"":".min")+".html"}A.prototype._initialize=function(){var c=this;return new Promise(function(y){var h=setTimeout(function(){o.sendEvent(c._client,"masterpass.load.timed-out")},v);t.create({name:E.LANDING_FRAME_NAME,height:E.POPUP_HEIGHT,width:E.POPUP_WIDTH,dispatchFrameUrl:c._assetsUrl+"/html/dispatch-frame"+(c._isDebug?"":".min")+".html",openFrameUrl:c._assetsUrl+"/html/masterpass-landing-frame"+(c._isDebug?"":".min")+".html"},function(T){c._frameService=T,clearTimeout(h),o.sendEvent(c._client,"masterpass.load.succeeded"),y(c)})})},A.prototype.tokenize=function(c){var y=this;return!c||s(c)?Promise.reject(new a(n.MASTERPASS_TOKENIZE_MISSING_REQUIRED_OPTION)):y._authInProgress?Promise.reject(new a(n.MASTERPASS_TOKENIZATION_ALREADY_IN_PROGRESS)):new Promise(function(h,T){y._navigateFrameToLoadingPage(c).catch(T),y._frameService.open(c.frameOptions,y._createFrameOpenHandler(h,T))})},A.prototype._navigateFrameToLoadingPage=function(c){var y=this;return this._authInProgress=!0,this._client.request({method:"post",endpoint:"masterpass/request_token",data:{requestToken:{originUrl:window.location.protocol+"//"+window.location.hostname,subtotal:c.subtotal,currencyCode:c.currencyCode,callbackUrl:this._callbackUrl}}}).then(function(h){var T=y._assetsUrl+"/html/masterpass-loading-frame"+(y._isDebug?"":".min")+".html?",O=y._client.getConfiguration().gatewayConfiguration,_=c.config||{},I;I={environment:O.environment,requestToken:h.requestToken,callbackUrl:y._callbackUrl,merchantCheckoutId:O.masterpass.merchantCheckoutId,allowedCardTypes:O.masterpass.supportedNetworks,version:E.MASTERPASS_VERSION},Object.keys(_).forEach(function(f){typeof _[f]!="function"&&(I[f]=_[f])}),T+=Object.keys(I).map(function(f){return f+"="+I[f]}).join("&"),y._frameService.redirect(T)}).catch(function(h){var T=h.details&&h.details.httpStatus;return y._closeWindow(),T===422?Promise.reject(p(h,n.MASTERPASS_INVALID_PAYMENT_OPTION)):Promise.reject(p(h,n.MASTERPASS_FLOW_FAILED))})},A.prototype._createFrameOpenHandler=function(c,y){var h=this;return window.popupBridge?function(T,O){if(h._authInProgress=!1,T){o.sendEvent(h._client,"masterpass.tokenization.closed-popupbridge.by-user"),y(p(T,n.MASTERPASS_POPUP_CLOSED));return}else if(!O.queryItems){o.sendEvent(h._client,"masterpass.tokenization.failed-popupbridge"),y(new a(n.MASTERPASS_FLOW_FAILED));return}h._tokenizeMasterpass(O.queryItems).then(c).catch(y)}:function(T,O){if(T){if(h._authInProgress=!1,T.code==="FRAME_SERVICE_FRAME_CLOSED"){o.sendEvent(h._client,"masterpass.tokenization.closed.by-user"),y(new a(n.MASTERPASS_POPUP_CLOSED));return}if(T.code&&T.code.indexOf("FRAME_SERVICE_FRAME_OPEN_FAILED")>-1){o.sendEvent(h._client,"masterpass.tokenization.failed.to-open"),y(new a({code:n.MASTERPASS_POPUP_OPEN_FAILED.code,type:n.MASTERPASS_POPUP_OPEN_FAILED.type,message:n.MASTERPASS_POPUP_OPEN_FAILED.message,details:{originalError:T}}));return}o.sendEvent(h._client,"masterpass.tokenization.failed"),h._closeWindow(),y(p(T,n.MASTERPASS_FLOW_FAILED));return}h._tokenizeMasterpass(O).then(c).catch(y)}},A.prototype._tokenizeMasterpass=function(c){var y=this;return c.mpstatus!=="success"?(o.sendEvent(y._client,"masterpass.tokenization.closed.by-user"),y._closeWindow(),Promise.reject(new a(n.MASTERPASS_POPUP_CLOSED))):g(c)?(o.sendEvent(y._client,"masterpass.tokenization.closed.missing-payload"),y._closeWindow(),Promise.reject(new a(n.MASTERPASS_POPUP_MISSING_REQUIRED_PARAMETERS))):y._client.request({endpoint:"payment_methods/masterpass_cards",method:"post",data:{masterpassCard:{checkoutResourceUrl:c.checkout_resource_url,requestToken:c.oauth_token,verifierToken:c.oauth_verifier}}}).then(function(h){return y._closeWindow(),window.popupBridge?o.sendEvent(y._client,"masterpass.tokenization.success-popupbridge"):o.sendEvent(y._client,"masterpass.tokenization.success"),h.masterpassCards[0]}).catch(function(h){return y._closeWindow(),window.popupBridge?o.sendEvent(y._client,"masterpass.tokenization.failed-popupbridge"):o.sendEvent(y._client,"masterpass.tokenization.failed"),Promise.reject(p(h,n.MASTERPASS_ACCOUNT_TOKENIZATION_FAILED))})};function g(c){return[c.oauth_verifier,c.oauth_token,c.checkout_resource_url].some(function(y){return y==null||y==="null"})}A.prototype._closeWindow=function(){this._authInProgress=!1,this._frameService.close()},A.prototype.teardown=function(){var c=this;return new Promise(function(y){c._frameService.teardown(),u(c,i(A.prototype)),o.sendEvent(c._client,"masterpass.teardown-completed"),y()})};function s(c){var y,h;for(y=0;y<E.REQUIRED_OPTIONS_FOR_TOKENIZE.length;y++)if(h=E.REQUIRED_OPTIONS_FOR_TOKENIZE[y],!c.hasOwnProperty(h))return!0;return!1}d.exports=l.wrapPrototype(A)},{"../../lib/analytics":119,"../../lib/braintree-error":124,"../../lib/constants":126,"../../lib/convert-methods-to-error":127,"../../lib/convert-to-braintree-error":128,"../../lib/frame-service/external":139,"../../lib/methods":155,"../shared/constants":169,"../shared/errors":170,"@braintree/wrap-promise":43}],167:[function(e,d,m){"use strict";var t=e("../lib/braintree-error"),a=e("../lib/basic-component-verification"),n=e("./shared/browser-detection"),r=e("./external/masterpass"),i=e("../lib/create-deferred-client"),l=e("../lib/create-assets-url"),o="3.102.0",u=e("./shared/errors"),p=e("@braintree/wrap-promise");function E(A){var g="Masterpass";return a.verify({name:g,client:A.client,authorization:A.authorization}).then(function(){return v()?Promise.resolve():Promise.reject(new t(u.MASTERPASS_BROWSER_NOT_SUPPORTED))}).then(function(){return i.create({authorization:A.authorization,client:A.client,debug:A.debug,assetsUrl:l.create(A.authorization),name:g})}).then(function(s){var c,y;return A.client=s,y=A.client.getConfiguration().gatewayConfiguration,y.masterpass?(c=new r(A),c._initialize()):Promise.reject(new t(u.MASTERPASS_NOT_ENABLED))})}function v(){return!!(window.popupBridge||n.supportsPopups())}d.exports={create:p(E),isSupported:v,VERSION:o}},{"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./external/masterpass":166,"./shared/browser-detection":168,"./shared/errors":170,"@braintree/wrap-promise":43}],168:[function(e,d,m){"use strict";d.exports={supportsPopups:e("@braintree/browser-detection/supports-popups")}},{"@braintree/browser-detection/supports-popups":32}],169:[function(e,d,m){"use strict";d.exports={LANDING_FRAME_NAME:"braintreemasterpasslanding",POPUP_WIDTH:450,POPUP_HEIGHT:660,MASTERPASS_VERSION:"v6",REQUIRED_OPTIONS_FOR_TOKENIZE:["subtotal","currencyCode"]}},{}],170:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error");d.exports={MASTERPASS_BROWSER_NOT_SUPPORTED:{type:t.types.CUSTOMER,code:"MASTERPASS_BROWSER_NOT_SUPPORTED",message:"Browser is not supported."},MASTERPASS_NOT_ENABLED:{type:t.types.MERCHANT,code:"MASTERPASS_NOT_ENABLED",message:"Masterpass is not enabled for this merchant."},MASTERPASS_TOKENIZE_MISSING_REQUIRED_OPTION:{type:t.types.MERCHANT,code:"MASTERPASS_TOKENIZE_MISSING_REQUIRED_OPTION",message:"Missing required option for tokenize."},MASTERPASS_TOKENIZATION_ALREADY_IN_PROGRESS:{type:t.types.MERCHANT,code:"MASTERPASS_TOKENIZATION_ALREADY_IN_PROGRESS",message:"Masterpass tokenization is already in progress."},MASTERPASS_ACCOUNT_TOKENIZATION_FAILED:{type:t.types.NETWORK,code:"MASTERPASS_ACCOUNT_TOKENIZATION_FAILED",message:"Could not tokenize user's Masterpass account."},MASTERPASS_POPUP_OPEN_FAILED:{type:t.types.MERCHANT,code:"MASTERPASS_POPUP_OPEN_FAILED",message:"Masterpass popup failed to open. Make sure to tokenize in response to a user action, such as a click."},MASTERPASS_POPUP_MISSING_REQUIRED_PARAMETERS:{type:t.types.MERCHANT,code:"MASTERPASS_POPUP_MISSING_REQUIRED_PARAMETERS",message:"Masterpass popup failed to return all required parameters needed to continue tokenization."},MASTERPASS_POPUP_CLOSED:{type:t.types.CUSTOMER,code:"MASTERPASS_POPUP_CLOSED",message:"Customer closed Masterpass popup before authorizing."},MASTERPASS_INVALID_PAYMENT_OPTION:{type:t.types.MERCHANT,code:"MASTERPASS_INVALID_PAYMENT_OPTION",message:"Masterpass payment options are invalid."},MASTERPASS_FLOW_FAILED:{type:t.types.NETWORK,code:"MASTERPASS_FLOW_FAILED",message:"Could not initialize Masterpass flow."}}},{"../../lib/braintree-error":124}],171:[function(e,d,m){"use strict";var t=e("../../lib/analytics"),a=e("../../lib/assign").assign,n=e("framebus"),r=e("../../lib/convert-methods-to-error"),i=e("../../lib/generate-google-pay-configuration"),l=e("@braintree/iframer"),o=e("@braintree/uuid"),u=e("../../lib/use-min"),p=e("../../lib/methods"),E=e("@braintree/event-emitter"),v=e("../../lib/braintree-error"),A="3.102.0",g=e("../shared/constants"),s=g.events,c=g.errors,y=e("@braintree/wrap-promise"),h={Visa:"visa",MasterCard:"mastercard","American Express":"amex","Diners Club":"diners",Discover:"discover",JCB:"jcb",UnionPay:"unionpay",Maestro:"maestro"},T="18278000977346790994";function O(I,f,N){var P=I;return P+"/web/"+A+"/html/payment-request-frame"+u(N)+".html#"+f}function _(I){var f=I.enabledPaymentMethods||{};E.call(this),this._componentId=o(),this._client=I.client,this._enabledPaymentMethods={basicCard:f.basicCard!==!1,googlePay:f.googlePay!==!1},this._googlePayVersion=I.googlePayVersion===2?2:1,this._googleMerchantId=T,this._supportedPaymentMethods=this._constructDefaultSupportedPaymentMethods(),this._defaultSupportedPaymentMethods=Object.keys(this._supportedPaymentMethods).map(function(N){return this._supportedPaymentMethods[N]}.bind(this)),this._bus=new n({channel:this._componentId})}E.createChild(_),_.prototype._constructDefaultSupportedPaymentMethods=function(){var I=this._client.getConfiguration(),f=I.gatewayConfiguration.androidPay,N=I.gatewayConfiguration.creditCards,P={};return this._enabledPaymentMethods.basicCard&&N&&N.supportedCardTypes.length>0&&(P.basicCard={supportedMethods:"basic-card",data:{supportedNetworks:N.supportedCardTypes.reduce(function(b,D){return D in h&&b.push(h[D]),b},[])}}),this._enabledPaymentMethods.googlePay&&f&&f.enabled&&(P.googlePay={supportedMethods:"https://google.com/pay",data:i(I,this._googlePayVersion,this._googleMerchantId)}),P},_.prototype.initialize=function(){var I=this._client.getConfiguration(),f=this;return this._frame=l({allowPaymentRequest:!0,name:"braintree-payment-request-frame",class:"braintree-payment-request-frame",height:0,width:0,style:{position:"absolute",left:"-9999px"},title:"Secure Payment Frame"}),this._defaultSupportedPaymentMethods.length===0?Promise.reject(new v(c.PAYMENT_REQUEST_NO_VALID_SUPPORTED_PAYMENT_METHODS)):new Promise(function(N){f._bus.on(s.FRAME_READY,function(P){P(f._client)}),f._bus.on(s.FRAME_CAN_MAKE_REQUESTS,function(){t.sendEvent(f._client,"payment-request.initialized"),f._bus.on(s.SHIPPING_ADDRESS_CHANGE,function(P){var b={target:{shippingAddress:P},updateWith:function(D){f._bus.emit(s.UPDATE_SHIPPING_ADDRESS,D)}};f._emit("shippingAddressChange",b),f._emit("shippingaddresschange",b)}),f._bus.on(s.SHIPPING_OPTION_CHANGE,function(P){var b={target:{shippingOption:P},updateWith:function(D){f._bus.emit(s.UPDATE_SHIPPING_OPTION,D)}};f._emit("shippingOptionChange",b),f._emit("shippingoptionchange",b)}),N(f)}),f._frame.src=O(I.gatewayConfiguration.assetsUrl,f._componentId,I.isDebug),document.body.appendChild(f._frame)})},_.prototype.createSupportedPaymentMethodsConfiguration=function(I,f){var N;if(!I)throw new v(c.PAYMENT_REQUEST_CREATE_SUPPORTED_PAYMENT_METHODS_CONFIGURATION_MUST_INCLUDE_TYPE);if(!this._enabledPaymentMethods[I])throw new v(c.PAYMENT_REQUEST_CREATE_SUPPORTED_PAYMENT_METHODS_CONFIGURATION_TYPE_NOT_ENABLED);return N=a({},this._supportedPaymentMethods[I]),N.data=a({},N.data,f),N},_.prototype.tokenize=function(I){var f=this;return new Promise(function(N,P){f._bus.emit(s.PAYMENT_REQUEST_INITIALIZED,{supportedPaymentMethods:I.supportedPaymentMethods||f._defaultSupportedPaymentMethods,details:I.details,options:I.options},function(b){var D=b[0],M=b[1];if(D){P(f._formatTokenizationError(D));return}t.sendEvent(f._client,"payment-request.tokenize.succeeded"),N({nonce:M.nonce,type:M.type,description:M.description,details:{rawPaymentResponse:M.details.rawPaymentResponse,cardType:M.details.cardType,lastFour:M.details.lastFour,lastTwo:M.details.lastTwo},binData:M.binData})})})},_.prototype.canMakePayment=function(I){var f=this,N;return window.PaymentRequest?I.supportedPaymentMethods&&(I.supportedPaymentMethods.forEach(function(P){var b=P.supportedMethods;b in g.SUPPORTED_METHODS||(N=b)}),N)?Promise.reject(new v({type:c.PAYMENT_REQUEST_UNSUPPORTED_PAYMENT_METHOD.type,code:c.PAYMENT_REQUEST_UNSUPPORTED_PAYMENT_METHOD.code,message:N+" is not a supported payment method."})):new Promise(function(P,b){f._bus.emit(s.CAN_MAKE_PAYMENT,{supportedPaymentMethods:I.supportedPaymentMethods||f._defaultSupportedPaymentMethods,details:I.details,options:I.options},function(D){var M=D[0],L=D[1];if(M){b(f._formatCanMakePaymentError(M));return}t.sendEvent(f._client,"payment-request.can-make-payment."+L),P(L)})}):(t.sendEvent(f._client,"payment-request.can-make-payment.not-available"),Promise.resolve(!1))},_.prototype.teardown=function(){return this._bus.teardown(),this._frame.parentNode.removeChild(this._frame),r(this,p(_.prototype)),t.sendEvent(this._client,"payment-request.teardown-completed"),Promise.resolve()},_.prototype._formatTokenizationError=function(I){var f;switch(I.name){case"AbortError":return f=new v({type:c.PAYMENT_REQUEST_CANCELED.type,code:c.PAYMENT_REQUEST_CANCELED.code,message:c.PAYMENT_REQUEST_CANCELED.message,details:{originalError:I}}),t.sendEvent(this._client,"payment-request.tokenize.canceled"),f;case"PAYMENT_REQUEST_INITIALIZATION_FAILED":f=new v({type:c.PAYMENT_REQUEST_INITIALIZATION_MISCONFIGURED.type,code:c.PAYMENT_REQUEST_INITIALIZATION_MISCONFIGURED.code,message:c.PAYMENT_REQUEST_INITIALIZATION_MISCONFIGURED.message,details:{originalError:I}});break;case"BRAINTREE_GATEWAY_GOOGLE_PAYMENT_TOKENIZATION_ERROR":f=new v({type:c.PAYMENT_REQUEST_GOOGLE_PAYMENT_FAILED_TO_TOKENIZE.type,code:c.PAYMENT_REQUEST_GOOGLE_PAYMENT_FAILED_TO_TOKENIZE.code,message:c.PAYMENT_REQUEST_GOOGLE_PAYMENT_FAILED_TO_TOKENIZE.message,details:{originalError:I}});break;case"BRAINTREE_GATEWAY_GOOGLE_PAYMENT_PARSING_ERROR":f=new v({type:c.PAYMENT_REQUEST_GOOGLE_PAYMENT_PARSING_ERROR.type,code:c.PAYMENT_REQUEST_GOOGLE_PAYMENT_PARSING_ERROR.code,message:c.PAYMENT_REQUEST_GOOGLE_PAYMENT_PARSING_ERROR.message,details:{originalError:I}});break;default:f=new v({code:c.PAYMENT_REQUEST_NOT_COMPLETED.code,type:I.type||v.types.CUSTOMER,message:c.PAYMENT_REQUEST_NOT_COMPLETED.message,details:{originalError:I}})}return t.sendEvent(this._client,"payment-request.tokenize.failed"),f},_.prototype._formatCanMakePaymentError=function(I){var f;switch(I.name){case"PAYMENT_REQUEST_INITIALIZATION_FAILED":f=new v({type:c.PAYMENT_REQUEST_INITIALIZATION_MISCONFIGURED.type,code:c.PAYMENT_REQUEST_INITIALIZATION_MISCONFIGURED.code,message:c.PAYMENT_REQUEST_INITIALIZATION_MISCONFIGURED.message,details:{originalError:I}});break;case"NotAllowedError":f=new v({type:c.PAYMENT_REQUEST_CAN_MAKE_PAYMENT_NOT_ALLOWED.type,code:c.PAYMENT_REQUEST_CAN_MAKE_PAYMENT_NOT_ALLOWED.code,message:c.PAYMENT_REQUEST_CAN_MAKE_PAYMENT_NOT_ALLOWED.message,details:{originalError:I}});break;default:f=new v({code:c.PAYMENT_REQUEST_CAN_MAKE_PAYMENT_FAILED.code,type:c.PAYMENT_REQUEST_CAN_MAKE_PAYMENT_FAILED.type,message:c.PAYMENT_REQUEST_CAN_MAKE_PAYMENT_FAILED.message,details:{originalError:I}})}return t.sendEvent(this._client,"payment-request.can-make-payment.failed"),f},d.exports=y.wrapPrototype(_)},{"../../lib/analytics":119,"../../lib/assign":121,"../../lib/braintree-error":124,"../../lib/convert-methods-to-error":127,"../../lib/generate-google-pay-configuration":149,"../../lib/methods":155,"../../lib/use-min":160,"../shared/constants":173,"@braintree/event-emitter":33,"@braintree/iframer":35,"@braintree/uuid":39,"@braintree/wrap-promise":43,framebus:52}],172:[function(e,d,m){"use strict";var t=e("./external/payment-request"),a=e("../lib/basic-component-verification"),n=e("../lib/create-deferred-client"),r=e("../lib/create-assets-url"),i=e("@braintree/wrap-promise"),l="3.102.0";function o(u){var p="Payment Request";return a.verify({name:p,client:u.client,authorization:u.authorization}).then(function(){return n.create({authorization:u.authorization,client:u.client,debug:u.debug,assetsUrl:r.create(u.authorization),name:p})}).then(function(E){var v;return u.client=E,v=new t(u),v.initialize()})}d.exports={create:i(o),VERSION:l}},{"../lib/basic-component-verification":122,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./external/payment-request":171,"@braintree/wrap-promise":43}],173:[function(e,d,m){"use strict";var t=e("../../lib/enumerate"),a=e("./errors"),n={};n.events=t(["CAN_MAKE_PAYMENT","FRAME_READY","FRAME_CAN_MAKE_REQUESTS","PAYMENT_REQUEST_INITIALIZED","SHIPPING_ADDRESS_CHANGE","UPDATE_SHIPPING_ADDRESS","SHIPPING_OPTION_CHANGE","UPDATE_SHIPPING_OPTION"],"payment-request:"),n.errors=a,n.SUPPORTED_METHODS={"basic-card":!0,"https://google.com/pay":!0},d.exports=n},{"../../lib/enumerate":134,"./errors":174}],174:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error");d.exports={PAYMENT_REQUEST_NO_VALID_SUPPORTED_PAYMENT_METHODS:{type:t.types.MERCHANT,code:"PAYMENT_REQUEST_NO_VALID_SUPPORTED_PAYMENT_METHODS",message:"There are no supported payment methods associated with this account."},PAYMENT_REQUEST_CANCELED:{type:t.types.CUSTOMER,code:"PAYMENT_REQUEST_CANCELED",message:"Payment request was canceled."},PAYMENT_REQUEST_INITIALIZATION_MISCONFIGURED:{type:t.types.MERCHANT,code:"PAYMENT_REQUEST_INITIALIZATION_MISCONFIGURED",message:"Something went wrong when configuring the payment request."},PAYMENT_REQUEST_CAN_MAKE_PAYMENT_FAILED:{type:t.types.UNKNOWN,code:"PAYMENT_REQUEST_CAN_MAKE_PAYMENT_FAILED",message:"Something went wrong when calling `canMakePayment`"},PAYMENT_REQUEST_CAN_MAKE_PAYMENT_NOT_ALLOWED:{type:t.types.MERCHANT,code:"PAYMENT_REQUEST_CAN_MAKE_PAYMENT_NOT_ALLOWED",message:"Something went wrong when calling `canMakePayment`. Most likely, `canMakePayment` was called multiple times with different supportedMethods configurations."},PAYMENT_REQUEST_UNSUPPORTED_PAYMENT_METHOD:{type:t.types.MERCHANT,code:"PAYMENT_REQUEST_UNSUPPORTED_PAYMENT_METHOD"},PAYMENT_REQUEST_GOOGLE_PAYMENT_FAILED_TO_TOKENIZE:{type:t.types.MERCHANT,code:"PAYMENT_REQUEST_GOOGLE_PAYMENT_FAILED_TO_TOKENIZE",message:"Something went wrong when tokenizing the Google Pay card."},PAYMENT_REQUEST_GOOGLE_PAYMENT_PARSING_ERROR:{type:t.types.UNKNOWN,code:"PAYMENT_REQUEST_GOOGLE_PAYMENT_PARSING_ERROR",message:"Something went wrong when tokenizing the Google Pay card."},PAYMENT_REQUEST_NOT_COMPLETED:{code:"PAYMENT_REQUEST_NOT_COMPLETED",message:"Payment request could not be completed."},PAYMENT_REQUEST_CREATE_SUPPORTED_PAYMENT_METHODS_CONFIGURATION_MUST_INCLUDE_TYPE:{type:t.types.MERCHANT,code:"PAYMENT_REQUEST_CREATE_SUPPORTED_PAYMENT_METHODS_CONFIGURATION_MUST_INCLUDE_TYPE",message:"createSupportedPaymentMethodsConfiguration must include a type parameter."},PAYMENT_REQUEST_CREATE_SUPPORTED_PAYMENT_METHODS_CONFIGURATION_TYPE_NOT_ENABLED:{type:t.types.MERCHANT,code:"PAYMENT_REQUEST_CREATE_SUPPORTED_PAYMENT_METHODS_CONFIGURATION_TYPE_NOT_ENABLED",message:"createSupportedPaymentMethodsConfiguration type parameter must be valid or enabled."}}},{"../../lib/braintree-error":124}],175:[function(e,d,m){"use strict";var t=e("../lib/braintree-error");d.exports={PAYPAL_NOT_ENABLED:{type:t.types.MERCHANT,code:"PAYPAL_NOT_ENABLED",message:"PayPal is not enabled for this merchant."},PAYPAL_SANDBOX_ACCOUNT_NOT_LINKED:{type:t.types.MERCHANT,code:"PAYPAL_SANDBOX_ACCOUNT_NOT_LINKED",message:"A linked PayPal Sandbox account is required to use PayPal Checkout in Sandbox. See https://developer.paypal.com/braintree/docs/guides/paypal/testing-go-live#linked-paypal-testing for details on linking your PayPal sandbox with Braintree."},PAYPAL_ACCOUNT_TOKENIZATION_FAILED:{type:t.types.NETWORK,code:"PAYPAL_ACCOUNT_TOKENIZATION_FAILED",message:"Could not tokenize user's PayPal account."},PAYPAL_FLOW_FAILED:{type:t.types.NETWORK,code:"PAYPAL_FLOW_FAILED",message:"Could not initialize PayPal flow."},PAYPAL_FLOW_OPTION_REQUIRED:{type:t.types.MERCHANT,code:"PAYPAL_FLOW_OPTION_REQUIRED",message:"PayPal flow property is invalid or missing."},PAYPAL_START_VAULT_INITIATED_CHECKOUT_PARAM_REQUIRED:{type:t.types.MERCHANT,code:"PAYPAL_START_VAULT_INITIATED_CHECKOUT_PARAM_REQUIRED"},PAYPAL_START_VAULT_INITIATED_CHECKOUT_SETUP_FAILED:{type:t.types.NETWORK,code:"PAYPAL_START_VAULT_INITIATED_CHECKOUT_SETUP_FAILED",message:"Something went wrong when setting up the checkout workflow."},PAYPAL_START_VAULT_INITIATED_CHECKOUT_POPUP_OPEN_FAILED:{type:t.types.MERCHANT,code:"PAYPAL_START_VAULT_INITIATED_CHECKOUT_POPUP_OPEN_FAILED",message:"PayPal popup failed to open, make sure to initiate the vault checkout in response to a user action."},PAYPAL_START_VAULT_INITIATED_CHECKOUT_CANCELED:{type:t.types.CUSTOMER,code:"PAYPAL_START_VAULT_INITIATED_CHECKOUT_CANCELED",message:"Customer closed PayPal popup before authorizing."},PAYPAL_START_VAULT_INITIATED_CHECKOUT_IN_PROGRESS:{type:t.types.MERCHANT,code:"PAYPAL_START_VAULT_INITIATED_CHECKOUT_IN_PROGRESS",message:"Vault initiated checkout already in progress."},PAYPAL_INVALID_PAYMENT_OPTION:{type:t.types.MERCHANT,code:"PAYPAL_INVALID_PAYMENT_OPTION",message:"PayPal payment options are invalid."},PAYPAL_MISSING_REQUIRED_OPTION:{type:t.types.MERCHANT,code:"PAYPAL_MISSING_REQUIRED_OPTION",message:"Missing required option."}}},{"../lib/braintree-error":124}],176:[function(e,d,m){"use strict";var t=e("../lib/basic-component-verification"),a=e("@braintree/wrap-promise"),n=e("./paypal-checkout"),r="3.102.0";function i(o){var u="PayPal Checkout";return t.verify({name:u,client:o.client,authorization:o.authorization}).then(function(){var p=new n(o);return p._initialize(o)})}function l(){return!0}d.exports={create:a(i),isSupported:l,VERSION:r}},{"../lib/basic-component-verification":122,"./paypal-checkout":177,"@braintree/wrap-promise":43}],177:[function(e,d,m){"use strict";var t=e("../lib/analytics"),a=e("../lib/assign").assign,n=e("../lib/create-deferred-client"),r=e("../lib/create-assets-url"),i=e("@braintree/extended-promise"),l=e("@braintree/wrap-promise"),o=e("../lib/braintree-error"),u=e("../lib/convert-to-braintree-error"),p=e("./errors"),E=e("../paypal/shared/constants"),v=e("../lib/frame-service/external"),A=e("../lib/create-authorization-data"),g=e("../lib/methods"),s=e("../lib/use-min"),c=e("../lib/convert-methods-to-error"),y=e("../lib/querystring"),h="3.102.0",T=e("../lib/constants").INTEGRATION_TIMEOUT_MS,O=["amount","currency","vaultInitiatedCheckoutPaymentMethodToken"],_="https://www.{ENV}paypal.com/smart/buttons/preload";i.suppressUnhandledPromiseMessage=!0;function I(f){this._merchantAccountId=f.merchantAccountId,this._autoSetDataUserIdToken=!!f.autoSetDataUserIdToken}I.prototype._initialize=function(f){var N;return f.client?(N=f.client.getConfiguration(),this._authorizationInformation={fingerprint:N.authorizationFingerprint,environment:N.gatewayConfiguration.environment}):(N=A(f.authorization),this._authorizationInformation={fingerprint:N.attrs.authorizationFingerprint,environment:N.environment}),this._clientPromise=n.create({authorization:f.authorization,client:f.client,debug:f.debug,assetsUrl:r.create(f.authorization),name:"PayPal Checkout"}).then(function(P){return this._configuration=P.getConfiguration(),this._merchantAccountId||(this._configuration.gatewayConfiguration.paypalEnabled?this._configuration.gatewayConfiguration.paypal.environmentNoNetwork===!0&&(this._setupError=new o(p.PAYPAL_SANDBOX_ACCOUNT_NOT_LINKED)):this._setupError=new o(p.PAYPAL_NOT_ENABLED)),this._setupError?Promise.reject(this._setupError):(t.sendEvent(P,"paypal-checkout.initialized"),this._frameServicePromise=this._setupFrameService(P),P)}.bind(this)),f.client?this._clientPromise.then(function(){return this}.bind(this)):Promise.resolve(this)},I.prototype._setupFrameService=function(f){var N=new i,P=f.getConfiguration(),b=setTimeout(function(){t.sendEvent(f,"paypal-checkout.frame-service.timed-out"),N.reject(new o(p.PAYPAL_START_VAULT_INITIATED_CHECKOUT_SETUP_FAILED))},T);return this._assetsUrl=P.gatewayConfiguration.paypal.assetsUrl+"/web/"+h,this._isDebug=P.isDebug,this._loadingFrameUrl=this._assetsUrl+"/html/paypal-landing-frame"+s(this._isDebug)+".html",v.create({name:"braintreepaypallanding",dispatchFrameUrl:this._assetsUrl+"/html/dispatch-frame"+s(this._isDebug)+".html",openFrameUrl:this._loadingFrameUrl},function(D){this._frameService=D,clearTimeout(b),N.resolve()}.bind(this)),N},I.prototype.createPayment=function(f){return!f||!E.FLOW_ENDPOINTS.hasOwnProperty(f.flow)?Promise.reject(new o(p.PAYPAL_FLOW_OPTION_REQUIRED)):(t.sendEvent(this._clientPromise,"paypal-checkout.createPayment"),this._createPaymentResource(f).then(function(N){var P,b;return f.flow==="checkout"?(b=y.parse(N.paymentResource.redirectUrl),P=b.token):P=N.agreementSetup.tokenId,P}))},I.prototype._createPaymentResource=function(f,N){var P=this,b="paypal_hermes/"+E.FLOW_ENDPOINTS[f.flow];return delete this.intentFromCreatePayment,N=N||{},f.offerCredit===!0&&t.sendEvent(this._clientPromise,"paypal-checkout.credit.offered"),this._clientPromise.then(function(D){return D.request({endpoint:b,method:"post",data:P._formatPaymentResourceData(f,N)}).then(function(M){return P.intentFromCreatePayment=f.intent,M})}).catch(function(D){var M;return P._setupError?Promise.reject(P._setupError):(M=D.details&&D.details.httpStatus,M===422?Promise.reject(new o({type:p.PAYPAL_INVALID_PAYMENT_OPTION.type,code:p.PAYPAL_INVALID_PAYMENT_OPTION.code,message:p.PAYPAL_INVALID_PAYMENT_OPTION.message,details:{originalError:D}})):Promise.reject(u(D,{type:p.PAYPAL_FLOW_FAILED.type,code:p.PAYPAL_FLOW_FAILED.code,message:p.PAYPAL_FLOW_FAILED.message})))})},I.prototype.updatePayment=function(f){var N=this,P="paypal_hermes/patch_payment_resource";return!f||this._hasMissingOption(f,E.REQUIRED_OPTIONS)?(t.sendEvent(N._clientPromise,"paypal-checkout.updatePayment.missing-options"),Promise.reject(new o(p.PAYPAL_MISSING_REQUIRED_OPTION))):this._verifyConsistentCurrency(f)?(t.sendEvent(this._clientPromise,"paypal-checkout.updatePayment"),this._clientPromise.then(function(b){return b.request({endpoint:P,method:"post",data:N._formatUpdatePaymentData(f)})}).catch(function(b){var D=b.details&&b.details.httpStatus;return D===422?(t.sendEvent(N._clientPromise,"paypal-checkout.updatePayment.invalid"),Promise.reject(new o({type:p.PAYPAL_INVALID_PAYMENT_OPTION.type,code:p.PAYPAL_INVALID_PAYMENT_OPTION.code,message:p.PAYPAL_INVALID_PAYMENT_OPTION.message,details:{originalError:b}}))):(t.sendEvent(N._clientPromise,"paypal-checkout.updatePayment."+p.PAYPAL_FLOW_FAILED.code),Promise.reject(u(b,{type:p.PAYPAL_FLOW_FAILED.type,code:p.PAYPAL_FLOW_FAILED.code,message:p.PAYPAL_FLOW_FAILED.message})))})):(t.sendEvent(N._clientPromise,"paypal-checkout.updatePayment.inconsistent-currencies"),Promise.reject(new o({type:p.PAYPAL_INVALID_PAYMENT_OPTION.type,code:p.PAYPAL_INVALID_PAYMENT_OPTION.code,message:p.PAYPAL_INVALID_PAYMENT_OPTION.message,details:{originalError:new Error("One or more shipping option currencies differ from checkout currency.")}})))},I.prototype.startVaultInitiatedCheckout=function(f){var N,P=this;return this._vaultInitiatedCheckoutInProgress?(t.sendEvent(this._clientPromise,"paypal-checkout.startVaultInitiatedCheckout.error.already-in-progress"),Promise.reject(new o(p.PAYPAL_START_VAULT_INITIATED_CHECKOUT_IN_PROGRESS))):(O.forEach(function(b){f.hasOwnProperty(b)||(N=b)}),N?Promise.reject(new o({type:p.PAYPAL_START_VAULT_INITIATED_CHECKOUT_PARAM_REQUIRED.type,code:p.PAYPAL_START_VAULT_INITIATED_CHECKOUT_PARAM_REQUIRED.code,message:"Required param "+N+" is missing."})):(this._vaultInitiatedCheckoutInProgress=!0,this._addModalBackdrop(f),f=a({},f,{flow:"checkout"}),t.sendEvent(this._clientPromise,"paypal-checkout.startVaultInitiatedCheckout.started"),this._waitForVaultInitiatedCheckoutDependencies().then(function(){var b=new i,D=P._createPaymentResource(f,{returnUrl:P._constructVaultCheckutUrl("redirect-frame"),cancelUrl:P._constructVaultCheckutUrl("cancel-frame")}).then(function(M){var L=M.paymentResource.redirectUrl;return P._frameService.redirect(L),b});return P._frameService.open({},P._createFrameServiceCallback(b)),D}).catch(function(b){return P._vaultInitiatedCheckoutInProgress=!1,P._removeModalBackdrop(),b.code==="FRAME_SERVICE_FRAME_CLOSED"?(t.sendEvent(P._clientPromise,"paypal-checkout.startVaultInitiatedCheckout.canceled.by-customer"),Promise.reject(new o(p.PAYPAL_START_VAULT_INITIATED_CHECKOUT_CANCELED))):(P._frameService&&P._frameService.close(),b.code&&b.code.indexOf("FRAME_SERVICE_FRAME_OPEN_FAILED")>-1?(t.sendEvent(P._clientPromise,"paypal-checkout.startVaultInitiatedCheckout.failed.popup-not-opened"),Promise.reject(new o({code:p.PAYPAL_START_VAULT_INITIATED_CHECKOUT_POPUP_OPEN_FAILED.code,type:p.PAYPAL_START_VAULT_INITIATED_CHECKOUT_POPUP_OPEN_FAILED.type,message:p.PAYPAL_START_VAULT_INITIATED_CHECKOUT_POPUP_OPEN_FAILED.message,details:{originalError:b}}))):Promise.reject(b))}).then(function(b){return P._frameService.close(),P._vaultInitiatedCheckoutInProgress=!1,P._removeModalBackdrop(),t.sendEvent(P._clientPromise,"paypal-checkout.startVaultInitiatedCheckout.succeeded"),Promise.resolve(b)})))},I.prototype._addModalBackdrop=function(f){f.optOutOfModalBackdrop||(this._modalBackdrop||(this._modalBackdrop=document.createElement("div"),this._modalBackdrop.setAttribute("data-braintree-paypal-vault-initiated-checkout-modal",!0),this._modalBackdrop.style.position="fixed",this._modalBackdrop.style.top=0,this._modalBackdrop.style.bottom=0,this._modalBackdrop.style.left=0,this._modalBackdrop.style.right=0,this._modalBackdrop.style.zIndex=9999,this._modalBackdrop.style.background="black",this._modalBackdrop.style.opacity="0.7",this._modalBackdrop.addEventListener("click",function(){this.focusVaultInitiatedCheckoutWindow()}.bind(this))),document.body.appendChild(this._modalBackdrop))},I.prototype._removeModalBackdrop=function(){this._modalBackdrop&&this._modalBackdrop.parentNode&&this._modalBackdrop.parentNode.removeChild(this._modalBackdrop)},I.prototype.closeVaultInitiatedCheckoutWindow=function(){return this._vaultInitiatedCheckoutInProgress&&t.sendEvent(this._clientPromise,"paypal-checkout.startVaultInitiatedCheckout.canceled.by-merchant"),this._waitForVaultInitiatedCheckoutDependencies().then(function(){this._frameService.close()}.bind(this))},I.prototype.focusVaultInitiatedCheckoutWindow=function(){return this._waitForVaultInitiatedCheckoutDependencies().then(function(){this._frameService.focus()}.bind(this))},I.prototype._createFrameServiceCallback=function(f){var N=this;return function(P,b){P?f.reject(P):b&&(N._frameService.redirect(N._loadingFrameUrl),N.tokenizePayment({paymentToken:b.token,payerID:b.PayerID,paymentID:b.paymentId,orderID:b.orderId}).then(function(D){f.resolve(D)}).catch(function(D){f.reject(D)}))}},I.prototype._waitForVaultInitiatedCheckoutDependencies=function(){var f=this;return this._clientPromise.then(function(){return f._frameServicePromise})},I.prototype._constructVaultCheckutUrl=function(f){var N=this._frameService._serviceId;return this._assetsUrl+"/html/"+f+s(this._isDebug)+".html?channel="+N},I.prototype.tokenizePayment=function(f){var N=this,P=!0,b,D={flow:f.billingToken&&!f.paymentID?"vault":"checkout",intent:f.intent||this.intentFromCreatePayment},M={ecToken:f.paymentToken,billingToken:f.billingToken,payerId:f.payerID,paymentId:f.paymentID,orderId:f.orderID,shippingOptionsId:f.shippingOptionsId};return f.hasOwnProperty("vault")&&(P=f.vault),D.vault=P,t.sendEvent(this._clientPromise,"paypal-checkout.tokenization.started"),this._clientPromise.then(function(L){return L.request({endpoint:"payment_methods/paypal_accounts",method:"post",data:N._formatTokenizeData(D,M)})}).then(function(L){return b=N._formatTokenizePayload(L),t.sendEvent(N._clientPromise,"paypal-checkout.tokenization.success"),b.creditFinancingOffered&&t.sendEvent(N._clientPromise,"paypal-checkout.credit.accepted"),b}).catch(function(L){return N._setupError?Promise.reject(N._setupError):(t.sendEvent(N._clientPromise,"paypal-checkout.tokenization.failed"),Promise.reject(u(L,{type:p.PAYPAL_ACCOUNT_TOKENIZATION_FAILED.type,code:p.PAYPAL_ACCOUNT_TOKENIZATION_FAILED.code,message:p.PAYPAL_ACCOUNT_TOKENIZATION_FAILED.message})))})},I.prototype.getClientId=function(){return this._clientPromise.then(function(f){return f.getConfiguration().gatewayConfiguration.paypal.clientId})},I.prototype.loadPayPalSDK=function(f){var N,P,b=new i,D=f&&f.dataAttributes||{},M=D["user-id-token"]||D["data-user-id-token"];return M||(M=this._authorizationInformation.fingerprint&&this._authorizationInformation.fingerprint.split("?")[0]),this._paypalScript=document.createElement("script"),f=a({},{components:"buttons"},f),delete f.dataAttributes,f.vault?f.intent=f.intent||"tokenize":(f.intent=f.intent||"authorize",f.currency=f.currency||"USD"),P="https://www.paypal.com/sdk/js?",this._paypalScript.onload=function(){b.resolve()},Object.keys(D).forEach(function(L){this._paypalScript.setAttribute("data-"+L.replace(/^data\-/,""),D[L])}.bind(this)),f["client-id"]?N=Promise.resolve(f["client-id"]):N=this.getClientId(),N.then(function(L){f["client-id"]=L,this._autoSetDataUserIdToken&&M&&(this._paypalScript.setAttribute("data-user-id-token",M),this._attachPreloadPixel({id:L,userIdToken:M,amount:D.amount,currency:f.currency,merchantId:f["merchant-id"]})),this._paypalScript.src=y.queryify(P,f),document.head.insertBefore(this._paypalScript,document.head.firstElementChild)}.bind(this)),b.then(function(){return this}.bind(this))},I.prototype._attachPreloadPixel=function(f){var N,P=f.id,b=f.userIdToken,D=this._authorizationInformation.environment,M=D==="production"?"":"sandbox.",L=_.replace("{ENV}",M),C={"client-id":P,"user-id-token":b};f.amount&&(C.amount=f.amount),f.currency&&(C.currency=f.currency),f.merchantId&&(C["merchant-id"]=f.merchantId),N=new XMLHttpRequest,N.open("GET",y.queryify(L,C)),N.send()},I.prototype._formatPaymentResourceData=function(f,N){var P,b=this._configuration.gatewayConfiguration,D=f.intent,M={returnUrl:N.returnUrl||"https://www.paypal.com/checkoutnow/error",cancelUrl:N.cancelUrl||"https://www.paypal.com/checkoutnow/error",offerPaypalCredit:f.offerCredit===!0,merchantAccountId:this._merchantAccountId,experienceProfile:{brandName:f.displayName||b.paypal.displayName,localeCode:f.locale,noShipping:(!f.enableShippingAddress).toString(),addressOverride:f.shippingAddressEditable===!1,landingPageType:f.landingPageType},shippingOptions:f.shippingOptions};if(f.flow==="checkout"){M.amount=f.amount,M.currencyIsoCode=f.currency,M.requestBillingAgreement=f.requestBillingAgreement,D&&(D==="capture"&&(D="sale"),M.intent=D),f.hasOwnProperty("lineItems")&&(M.lineItems=f.lineItems),f.hasOwnProperty("vaultInitiatedCheckoutPaymentMethodToken")&&(M.vaultInitiatedCheckoutPaymentMethodToken=f.vaultInitiatedCheckoutPaymentMethodToken),f.hasOwnProperty("shippingOptions")&&(M.shippingOptions=f.shippingOptions);for(P in f.shippingAddressOverride)f.shippingAddressOverride.hasOwnProperty(P)&&(M[P]=f.shippingAddressOverride[P]);f.hasOwnProperty("billingAgreementDetails")&&(M.billingAgreementDetails=f.billingAgreementDetails)}else M.shippingAddress=f.shippingAddressOverride,f.billingAgreementDescription&&(M.description=f.billingAgreementDescription);return this._riskCorrelationId=f.riskCorrelationId,f.riskCorrelationId&&(M.correlationId=this._riskCorrelationId),M},I.prototype._verifyConsistentCurrency=function(f){return f.currency&&f.hasOwnProperty("shippingOptions")&&Array.isArray(f.shippingOptions)?f.shippingOptions.every(function(N){return N.amount&&N.amount.currency&&f.currency.toLowerCase()===N.amount.currency.toLowerCase()}):!0},I.prototype._hasMissingOption=function(f,N){var P,b;if(N=N||[],!f.hasOwnProperty("amount")&&!f.hasOwnProperty("lineItems"))return!0;for(P=0;P<N.length;P++)if(b=N[P],!f.hasOwnProperty(b))return!0;return!1},I.prototype._formatUpdatePaymentData=function(f){var N=this,P={merchantAccountId:this._merchantAccountId,paymentId:f.paymentId||f.orderId,currencyIsoCode:f.currency};return f.hasOwnProperty("amount")&&(P.amount=f.amount),f.hasOwnProperty("lineItems")&&(P.lineItems=f.lineItems),f.hasOwnProperty("shippingOptions")&&(P.shippingOptions=f.shippingOptions),f.hasOwnProperty("amountBreakdown")&&(P.amountBreakdown=f.amountBreakdown),f.hasOwnProperty("shippingAddress")&&(t.sendEvent(N._clientPromise,"paypal-checkout.updatePayment.shippingAddress.provided.by-the-merchant"),P.line1=f.shippingAddress.line1,f.shippingAddress.hasOwnProperty("line2")&&(P.line2=f.shippingAddress.line2),P.city=f.shippingAddress.city,P.state=f.shippingAddress.state,P.postalCode=f.shippingAddress.postalCode,P.countryCode=f.shippingAddress.countryCode,f.shippingAddress.hasOwnProperty("phone")&&(P.phone=f.shippingAddress.phone),f.shippingAddress.hasOwnProperty("recipientName")&&(P.recipientName=f.shippingAddress.recipientName)),P},I.prototype._formatTokenizeData=function(f,N){var P=this._configuration,b=P.gatewayConfiguration,D=P.authorizationType==="TOKENIZATION_KEY",M=f.flow==="vault",L=this._riskCorrelationId||N.billingToken||N.ecToken,C={paypalAccount:{correlationId:L,options:{validate:M&&!D&&f.vault}}};return M?C.paypalAccount.billingAgreementToken=N.billingToken:(C.paypalAccount.paymentToken=N.paymentId||N.orderId,C.paypalAccount.payerId=N.payerId,C.paypalAccount.unilateral=b.paypal.unvettedMerchant,f.intent&&(C.paypalAccount.intent=f.intent)),this._merchantAccountId&&(C.merchantAccountId=this._merchantAccountId),C},I.prototype._formatTokenizePayload=function(f){var N,P={};return f.paypalAccounts&&(P=f.paypalAccounts[0]),N={nonce:P.nonce,details:{},type:P.type},P.details&&P.details.payerInfo&&(N.details=P.details.payerInfo),P.details&&P.details.creditFinancingOffered&&(N.creditFinancingOffered=P.details.creditFinancingOffered),P.details&&P.details.shippingOptionId&&(N.shippingOptionId=P.details.shippingOptionId),P.details&&P.details.cobrandedCardLabel&&(N.cobrandedCardLabel=P.details.cobrandedCardLabel),N},I.prototype.teardown=function(){var f=this;return c(this,g(I.prototype)),this._paypalScript&&this._paypalScript.parentNode&&this._paypalScript.parentNode.removeChild(this._paypalScript),this._frameServicePromise.catch(function(){}).then(function(){return f._frameService?f._frameService.teardown():Promise.resolve()})},d.exports=l.wrapPrototype(I)},{"../lib/analytics":119,"../lib/assign":121,"../lib/braintree-error":124,"../lib/constants":126,"../lib/convert-methods-to-error":127,"../lib/convert-to-braintree-error":128,"../lib/create-assets-url":129,"../lib/create-authorization-data":130,"../lib/create-deferred-client":131,"../lib/frame-service/external":139,"../lib/methods":155,"../lib/querystring":157,"../lib/use-min":160,"../paypal/shared/constants":180,"./errors":175,"@braintree/extended-promise":34,"@braintree/wrap-promise":43}],178:[function(e,d,m){"use strict";var t=e("../../lib/frame-service/external"),a=e("../../lib/braintree-error"),n=e("../../lib/convert-to-braintree-error"),r=e("../../lib/use-min"),i=e("../../lib/once"),l="3.102.0",o=e("../shared/constants"),u=e("../../lib/constants").INTEGRATION_TIMEOUT_MS,p=e("../../lib/analytics"),E=e("../../lib/methods"),v=e("../../lib/deferred"),A=e("../shared/errors"),g=e("../../lib/convert-methods-to-error"),s=e("../../lib/querystring"),c=e("@braintree/wrap-promise");function y(h){this._client=h.client,this._assetsUrl=h.client.getConfiguration().gatewayConfiguration.paypal.assetsUrl+"/web/"+l,this._isDebug=h.client.getConfiguration().isDebug,this._loadingFrameUrl=this._assetsUrl+"/html/paypal-landing-frame"+r(this._isDebug)+".html",this._authorizationInProgress=!1}y.prototype._initialize=function(){var h=this,T=this._client,O=setTimeout(function(){p.sendEvent(T,"paypal.load.timed-out")},u);return new Promise(function(_){t.create({name:o.LANDING_FRAME_NAME,dispatchFrameUrl:h._assetsUrl+"/html/dispatch-frame"+r(h._isDebug)+".html",openFrameUrl:h._loadingFrameUrl},function(I){h._frameService=I,clearTimeout(O),p.sendEvent(T,"paypal.load.succeeded"),_(h)})})},y.prototype.tokenize=function(h,T){var O=this,_=this._client,I,f;return T&&(T=i(v(T))),!h||!o.FLOW_ENDPOINTS.hasOwnProperty(h.flow)?(f=new a(A.PAYPAL_FLOW_OPTION_REQUIRED),T?(T(f),this._frameService.createNoopHandler()):Promise.reject(f)):(I=new Promise(function(N,P){O._authorizationInProgress?(p.sendEvent(_,"paypal.tokenization.error.already-opened"),P(new a(A.PAYPAL_TOKENIZATION_REQUEST_ACTIVE))):(O._authorizationInProgress=!0,window.popupBridge||p.sendEvent(_,"paypal.tokenization.opened"),h.offerCredit===!0&&p.sendEvent(_,"paypal.credit.offered"),h.offerPayLater===!0&&p.sendEvent(_,"paypal.paylater.offered"),O._navigateFrameToAuth(h).catch(P),O._frameService.open({},O._createFrameServiceCallback(h,N,P)))}),T?(I.then(function(N){T(null,N)}).catch(T),this._frameService.createHandler({beforeClose:function(){p.sendEvent(_,"paypal.tokenization.closed.by-merchant")}})):I)},y.prototype._createFrameServiceCallback=function(h,T,O){var _=this,I=this._client;return window.popupBridge?function(f,N){var P=N&&N.path&&N.path.substring(0,7)==="/cancel";_._authorizationInProgress=!1,f||P?(p.sendEvent(I,"paypal.tokenization.closed-popupbridge.by-user"),O(new a(A.PAYPAL_POPUP_CLOSED))):N&&_._tokenizePayPal(h,N.queryItems).then(T).catch(O)}:function(f,N){_._authorizationInProgress=!1,f?f.code==="FRAME_SERVICE_FRAME_CLOSED"?(p.sendEvent(I,"paypal.tokenization.closed.by-user"),O(new a(A.PAYPAL_POPUP_CLOSED))):f.code&&f.code.indexOf("FRAME_SERVICE_FRAME_OPEN_FAILED")>-1&&O(new a({code:A.PAYPAL_POPUP_OPEN_FAILED.code,type:A.PAYPAL_POPUP_OPEN_FAILED.type,message:A.PAYPAL_POPUP_OPEN_FAILED.message,details:{originalError:f}})):N&&_._tokenizePayPal(h,N).then(T).catch(O)}},y.prototype._tokenizePayPal=function(h,T){var O=this,_=this._client;return window.popupBridge||this._frameService.redirect(this._loadingFrameUrl),_.request({endpoint:"payment_methods/paypal_accounts",method:"post",data:this._formatTokenizeData(h,T)}).then(function(I){var f=O._formatTokenizePayload(I);return window.popupBridge?p.sendEvent(_,"paypal.tokenization.success-popupbridge"):p.sendEvent(_,"paypal.tokenization.success"),f.creditFinancingOffered&&p.sendEvent(_,"paypal.credit.accepted"),O._frameService.close(),f}).catch(function(I){return window.popupBridge?p.sendEvent(_,"paypal.tokenization.failed-popupbridge"):p.sendEvent(_,"paypal.tokenization.failed"),O._frameService.close(),Promise.reject(n(I,{type:A.PAYPAL_ACCOUNT_TOKENIZATION_FAILED.type,code:A.PAYPAL_ACCOUNT_TOKENIZATION_FAILED.code,message:A.PAYPAL_ACCOUNT_TOKENIZATION_FAILED.message}))})},y.prototype._formatTokenizePayload=function(h){var T,O={};return h.paypalAccounts&&(O=h.paypalAccounts[0]),T={nonce:O.nonce,details:{},type:O.type},O.details&&O.details.payerInfo&&(T.details=O.details.payerInfo),O.details&&O.details.creditFinancingOffered&&(T.creditFinancingOffered=O.details.creditFinancingOffered),T},y.prototype._formatTokenizeData=function(h,T){var O=this._client.getConfiguration(),_=O.gatewayConfiguration,I=O.authorizationType==="TOKENIZATION_KEY",f={paypalAccount:{correlationId:T.ba_token||T.token,options:{validate:h.flow==="vault"&&!I}}};return T.ba_token?f.paypalAccount.billingAgreementToken=T.ba_token:(f.paypalAccount.paymentToken=T.paymentId,f.paypalAccount.payerId=T.PayerID,f.paypalAccount.unilateral=_.paypal.unvettedMerchant,h.hasOwnProperty("intent")&&(f.paypalAccount.intent=h.intent)),f},y.prototype._navigateFrameToAuth=function(h){var T=this,O=this._client,_="paypal_hermes/"+o.FLOW_ENDPOINTS[h.flow];return O.request({endpoint:_,method:"post",data:this._formatPaymentResourceData(h)}).then(function(I){var f;h.flow==="checkout"?f=I.paymentResource.redirectUrl:f=I.agreementSetup.approvalUrl,h.useraction==="commit"&&(f=s.queryify(f,{useraction:"commit"})),window.popupBridge&&p.sendEvent(O,"paypal.tokenization.opened-popupbridge"),T._frameService.redirect(f)}).catch(function(I){var f=I.details&&I.details.httpStatus;return T._frameService.close(),T._authorizationInProgress=!1,f===422?Promise.reject(new a({type:A.PAYPAL_INVALID_PAYMENT_OPTION.type,code:A.PAYPAL_INVALID_PAYMENT_OPTION.code,message:A.PAYPAL_INVALID_PAYMENT_OPTION.message,details:{originalError:I}})):Promise.reject(n(I,{type:A.PAYPAL_FLOW_FAILED.type,code:A.PAYPAL_FLOW_FAILED.code,message:A.PAYPAL_FLOW_FAILED.message}))})},y.prototype._formatPaymentResourceData=function(h){var T,O=this._client.getConfiguration().gatewayConfiguration,_=this._frameService._serviceId,I={returnUrl:O.paypal.assetsUrl+"/web/"+l+"/html/redirect-frame"+r(this._isDebug)+".html?channel="+_,cancelUrl:O.paypal.assetsUrl+"/web/"+l+"/html/cancel-frame"+r(this._isDebug)+".html?channel="+_,offerPaypalCredit:h.offerCredit===!0,offerPayLater:h.offerPayLater===!0,experienceProfile:{brandName:h.displayName||O.paypal.displayName,localeCode:h.locale,noShipping:(!h.enableShippingAddress).toString(),addressOverride:h.shippingAddressEditable===!1,landingPageType:h.landingPageType}};if(window.popupBridge&&typeof window.popupBridge.getReturnUrlPrefix=="function"&&(I.returnUrl=window.popupBridge.getReturnUrlPrefix()+"return",I.cancelUrl=window.popupBridge.getReturnUrlPrefix()+"cancel"),h.flow==="checkout"){I.amount=h.amount,I.currencyIsoCode=h.currency,h.hasOwnProperty("intent")&&(I.intent=h.intent);for(T in h.shippingAddressOverride)h.shippingAddressOverride.hasOwnProperty(T)&&(I[T]=h.shippingAddressOverride[T])}else I.shippingAddress=h.shippingAddressOverride,h.billingAgreementDescription&&(I.description=h.billingAgreementDescription);return I},y.prototype.closeWindow=function(){this._authorizationInProgress&&p.sendEvent(this._client,"paypal.tokenize.closed.by-merchant"),this._frameService.close()},y.prototype.focusWindow=function(){this._frameService.focus()},y.prototype.teardown=c(function(){var h=this;return h._frameService.teardown(),g(h,E(y.prototype)),p.sendEvent(h._client,"paypal.teardown-completed"),Promise.resolve()}),d.exports=y},{"../../lib/analytics":119,"../../lib/braintree-error":124,"../../lib/constants":126,"../../lib/convert-methods-to-error":127,"../../lib/convert-to-braintree-error":128,"../../lib/deferred":132,"../../lib/frame-service/external":139,"../../lib/methods":155,"../../lib/once":156,"../../lib/querystring":157,"../../lib/use-min":160,"../shared/constants":180,"../shared/errors":181,"@braintree/wrap-promise":43}],179:[function(e,d,m){"use strict";var t=e("../lib/analytics"),a=e("../lib/basic-component-verification"),n=e("../lib/create-deferred-client"),r=e("../lib/create-assets-url"),i=e("../lib/braintree-error"),l=e("./shared/errors"),o=e("./external/paypal"),u="3.102.0",p=e("@braintree/wrap-promise");function E(A){var g="PayPal";return a.verify({name:g,client:A.client,authorization:A.authorization}).then(function(){return n.create({authorization:A.authorization,client:A.client,debug:A.debug,assetsUrl:r.create(A.authorization),name:g})}).then(function(s){var c,y=s.getConfiguration();return A.client=s,y.gatewayConfiguration.paypalEnabled!==!0?Promise.reject(new i(l.PAYPAL_NOT_ENABLED)):(t.sendEvent(A.client,"paypal.initialized"),c=new o(A),c._initialize())})}function v(){return!0}d.exports={create:p(E),isSupported:v,VERSION:u}},{"../lib/analytics":119,"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./external/paypal":178,"./shared/errors":181,"@braintree/wrap-promise":43}],180:[function(e,d,m){"use strict";d.exports={LANDING_FRAME_NAME:"braintreepaypallanding",FLOW_ENDPOINTS:{checkout:"create_payment_resource",vault:"setup_billing_agreement"},REQUIRED_OPTIONS:["paymentId","currency"]}},{}],181:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error");d.exports={PAYPAL_NOT_ENABLED:{type:t.types.MERCHANT,code:"PAYPAL_NOT_ENABLED",message:"PayPal is not enabled for this merchant."},PAYPAL_TOKENIZATION_REQUEST_ACTIVE:{type:t.types.MERCHANT,code:"PAYPAL_TOKENIZATION_REQUEST_ACTIVE",message:"Another tokenization request is active."},PAYPAL_ACCOUNT_TOKENIZATION_FAILED:{type:t.types.NETWORK,code:"PAYPAL_ACCOUNT_TOKENIZATION_FAILED",message:"Could not tokenize user's PayPal account."},PAYPAL_FLOW_FAILED:{type:t.types.NETWORK,code:"PAYPAL_FLOW_FAILED",message:"Could not initialize PayPal flow."},PAYPAL_FLOW_OPTION_REQUIRED:{type:t.types.MERCHANT,code:"PAYPAL_FLOW_OPTION_REQUIRED",message:"PayPal flow property is invalid or missing."},PAYPAL_POPUP_OPEN_FAILED:{type:t.types.MERCHANT,code:"PAYPAL_POPUP_OPEN_FAILED",message:"PayPal popup failed to open, make sure to tokenize in response to a user action."},PAYPAL_POPUP_CLOSED:{type:t.types.CUSTOMER,code:"PAYPAL_POPUP_CLOSED",message:"Customer closed PayPal popup before authorizing."},PAYPAL_INVALID_PAYMENT_OPTION:{type:t.types.MERCHANT,code:"PAYPAL_INVALID_PAYMENT_OPTION",message:"PayPal payment options are invalid."}}},{"../../lib/braintree-error":124}],182:[function(e,d,m){"use strict";var t=e("@braintree/wrap-promise"),a=e("../lib/basic-component-verification"),n=e("./preferred-payment-methods"),r="3.102.0";function i(l){var o="PreferredPaymentMethods";return a.verify({name:o,client:l.client,authorization:l.authorization}).then(function(){var u=new n;return u.initialize(l)})}d.exports={create:t(i),VERSION:r}},{"../lib/basic-component-verification":122,"./preferred-payment-methods":183,"@braintree/wrap-promise":43}],183:[function(e,d,m){"use strict";var t=e("@braintree/wrap-promise"),a=e("../lib/analytics"),n=e("../lib/create-assets-url"),r=e("../lib/create-deferred-client");function i(){}i.prototype.initialize=function(l){var o=this;return this._clientPromise=r.create({authorization:l.authorization,client:l.client,debug:l.debug,assetsUrl:n.create(l.authorization),name:"PreferredPaymentMethods"}).catch(function(u){return o._setupError=u,Promise.reject(u)}),a.sendEvent(this._clientPromise,"preferred-payment-methods.initialized"),Promise.resolve(this)},i.prototype.fetchPreferredPaymentMethods=function(){var l,o=this;return this._clientPromise.then(function(u){return l=u,l.request({api:"graphQLApi",data:{query:"query PreferredPaymentMethods { preferredPaymentMethods { paypalPreferred venmoPreferred } }"}})}).then(function(u){var p=u.data.preferredPaymentMethods.paypalPreferred,E=u.data.preferredPaymentMethods.venmoPreferred;return a.sendEvent(l,"preferred-payment-methods.paypal.api-detected."+p),a.sendEvent(l,"preferred-payment-methods.venmo.api-detected."+E),{paypalPreferred:p,venmoPreferred:E}}).catch(function(){return o._setupError?Promise.reject(o._setupError):(a.sendEvent(l,"preferred-payment-methods.api-error"),{paypalPreferred:!1,venmoPreferred:!1})})},d.exports=t.wrapPrototype(i)},{"../lib/analytics":119,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"@braintree/wrap-promise":43}],184:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error"),a=e("../shared/errors"),n=e("../../lib/frame-service/external"),r=e("../../lib/analytics"),i=e("../../lib/use-min"),l=e("../shared/constants").BILLING_ADDRESS_OPTIONS,o=e("../../lib/snake-case-to-camel-case"),u=400,p=570;function E(y,h){var T={sepa_debit:{account_holder_name:h.accountHolderName,billing_address:{country_code:h.countryCode},iban:h.iban,merchant_or_partner_customer_id:h.customerId,mandate_type:h.mandateType},locale:h.locale,cancel_url:h.cancelUrl,return_url:h.returnUrl,merchant_account_id:h.merchantAccountId};return h.billingAddress&&l.forEach(function(O){var _=o(O);_ in h.billingAddress&&(T.sepa_debit.billing_address[O]=h.billingAddress[_])}),y.request({api:"clientApi",method:"post",endpoint:"sepa_debit",data:T}).then(function(O){var _=O.message.body.sepaDebitAccount;if(!_)throw new t(a.SEPA_CREATE_MANDATE_FAILED);return{approvalUrl:_.approvalUrl,last4:_.last4,bankReferenceToken:_.bankReferenceToken}}).catch(function(){throw new t(a.SEPA_CREATE_MANDATE_FAILED)})}function v(y,h){var T="sepadirectdebit",O=h.assetsUrl+"/html",_=h.debug||!1;return new Promise(function(I,f){var N=s();n.create({name:T,dispatchFrameUrl:O+"/dispatch-frame"+i(_)+".html",openFrameUrl:O+"/sepa-landing-frame"+i(_)+".html",top:N.top,left:N.left,height:p,width:u},function(P){r.sendEvent(y,"sepa.popup.initialized"),P.open({},function(b,D){return A(D)?(P.close(),I()):g(D,b)?(P.close(),f(new t(a.SEPA_CUSTOMER_CANCELED))):(P.close(),f(new t(a.SEPA_TOKENIZATION_FAILED)))}),P.redirect(h.approvalUrl)})})}function A(y){return y&&y.success}function g(y,h){return y&&y.cancel||h&&h.code==="FRAME_SERVICE_FRAME_CLOSED"}function s(){var y=Math.round((window.outerHeight-p)/2)+window.screenTop,h=Math.round((window.outerWidth-u)/2)+window.screenLeft;return{top:y,left:h}}function c(y,h){var T={sepa_debit_account:{last_4:h.last4,merchant_or_partner_customer_id:h.customerId,bank_reference_token:h.bankReferenceToken,mandate_type:h.mandateType},merchant_account_id:h.merchantAccountId};return y.request({api:"clientApi",method:"post",endpoint:"payment_methods/sepa_debit_accounts",data:T}).then(function(O){if(!O.nonce)throw new t(a.SEPA_TRANSACTION_FAILED);return{nonce:O.nonce,ibanLastFour:h.last4,customerId:h.customerId,mandateType:h.mandateType}}).catch(function(){throw new t(a.SEPA_TRANSACTION_FAILED)})}d.exports={createMandate:E,openPopup:v,handleApproval:c,POPUP_WIDTH:u,POPUP_HEIGHT:p}},{"../../lib/analytics":119,"../../lib/braintree-error":124,"../../lib/frame-service/external":139,"../../lib/snake-case-to-camel-case":159,"../../lib/use-min":160,"../shared/constants":187,"../shared/errors":188}],185:[function(e,d,m){"use strict";var t=e("@braintree/wrap-promise"),a=e("../../lib/braintree-error"),n=e("../shared/errors"),r=e("../shared/constants"),i=e("./mandate"),l=e("../shared/has-missing-option"),o=e("../../lib/analytics"),u="3.102.0",p=e("../../lib/assign").assign;function E(v){var A=v.client.getConfiguration();this._client=v.client,this._assetsUrl=A.gatewayConfiguration.assetsUrl+"/web/"+u,this._isDebug=A.isDebug,this._returnUrl=this._assetsUrl+"/html/redirect-frame.html?success=1",this._cancelUrl=this._assetsUrl+"/html/redirect-frame.html?cancel=1",o.sendEvent(this._client,"sepa.component.initialized")}E.prototype.tokenize=function(v){var A=this,g=p({cancelUrl:A._cancelUrl,returnUrl:A._returnUrl},v);return!v||l(v,r.REQUIRED_OPTIONS)?(o.sendEvent(A._client,"sepa.input-validation.missing-options"),Promise.reject(new a(n.SEPA_TOKENIZE_MISSING_REQUIRED_OPTION))):r.MANDATE_TYPE_ENUM.includes(v.mandateType)?i.createMandate(A._client,g).then(function(s){return o.sendEvent(A._client,"sepa.create-mandate.success"),v.last4=s.last4,v.bankReferenceToken=s.bankReferenceToken,i.openPopup(A._client,{approvalUrl:s.approvalUrl,assetsUrl:A._assetsUrl})}).then(function(){return o.sendEvent(A._client,"sepa.mandate.approved"),i.handleApproval(A._client,{bankReferenceToken:v.bankReferenceToken,last4:v.last4,customerId:v.customerId,mandateType:v.mandateType,merchantAccountId:v.merchantAccountId})}).then(function(s){return o.sendEvent(A._client,"sepa.tokenization.success"),Promise.resolve(s)}).catch(function(s){return o.sendEvent(A._client,"sepa."+s.details+".failed"),Promise.reject(s)}):(o.sendEvent(A._client,"sepa.input-validation.invalid-mandate"),Promise.reject(new a(n.SEPA_INVALID_MANDATE_TYPE)))},d.exports=t.wrapPrototype(E)},{"../../lib/analytics":119,"../../lib/assign":121,"../../lib/braintree-error":124,"../shared/constants":187,"../shared/errors":188,"../shared/has-missing-option":189,"./mandate":184,"@braintree/wrap-promise":43}],186:[function(e,d,m){"use strict";var t=e("../lib/analytics"),a=e("./external/sepa"),n=e("../lib/create-assets-url"),r=e("../lib/create-deferred-client"),i=e("../lib/basic-component-verification"),l=e("@braintree/wrap-promise"),o="3.102.0";function u(p){var E="SEPA";return i.verify({name:E,client:p.client,authorization:p.authorization}).then(function(){return r.create({authorization:p.authorization,client:p.client,debug:p.debug,assetsUrl:n.create(p.authorization),name:E})}).then(function(v){return p.client=v,t.sendEvent(p.client,"sepa.client.initialized"),new a(p)})}d.exports={create:l(u),VERSION:o}},{"../lib/analytics":119,"../lib/basic-component-verification":122,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./external/sepa":185,"@braintree/wrap-promise":43}],187:[function(e,d,m){"use strict";d.exports={REQUIRED_OPTIONS:["iban","merchantAccountId","mandateType","customerId","accountHolderName","countryCode"],BILLING_ADDRESS_OPTIONS:["address_line_1","address_line_2","admin_area_1","admin_area_2","postal_code"],MANDATE_TYPE_ENUM:["ONE_OFF","RECURRENT"]}},{}],188:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error");d.exports={SEPA_CREATE_MANDATE_FAILED:{type:t.types.MERCHANT,code:"SEPA_CREATE_MANDATE_FAILED",message:"SEPA create mandate failed.",details:"create-mandate"},SEPA_CUSTOMER_CANCELED:{type:t.types.CUSTOMER,code:"SEPA_CUSTOMER_CANCELED",message:"User canceled SEPA authorization",details:"customer-canceled"},SEPA_INVALID_MANDATE_TYPE:{type:t.types.MERCHANT,code:"SEPA_INVALID_MANDATE_TYPE",message:"SEPA mandate type is invalid"},SEPA_TOKENIZATION_FAILED:{type:t.types.UNKNOWN,code:"SEPA_TOKENIZATION_FAILED",message:"SEPA encountered a problem",details:"open-popup"},SEPA_TOKENIZE_MISSING_REQUIRED_OPTION:{type:t.types.MERCHANT,code:"SEPA_TOKENIZE_MISSING_REQUIRED_OPTION",message:"Missing required option for tokenize."},SEPA_TRANSACTION_FAILED:{type:t.types.UNKNOWN,code:"SEPA_TRANSACTION_FAILED",message:"SEPA transaction failed",details:"handle-approval"}}},{"../../lib/braintree-error":124}],189:[function(e,d,m){"use strict";function t(a,n){var r,i;for(n=n||[],r=0;r<n.length;r++)if(i=n[r],!a.hasOwnProperty(i))return!0;return!1}d.exports=t},{}],190:[function(e,d,m){"use strict";var t=e("../../../lib/assign").assign,a=e("../../../lib/analytics"),n=e("../../../lib/braintree-error"),r=e("../../../lib/is-verified-domain"),i=e("@braintree/extended-promise"),l=e("@braintree/event-emitter"),o=e("../../shared/errors"),u=e("@braintree/iframer"),p=e("framebus"),E=e("../../shared/constants"),v=e("@braintree/uuid"),A=e("../../shared/events"),g=e("../../../lib/use-min"),s=e("../../../lib/constants").BUS_CONFIGURATION_REQUEST_EVENT,c="3.102.0",y=400,h=400;i.suppressUnhandledPromiseMessage=!0;function T(O){l.call(this),this._client=O.client,this._createPromise=O.createPromise,this._createOptions=O,this._client?(this._isDebug=this._client.getConfiguration().isDebug,this._assetsUrl=this._client.getConfiguration().gatewayConfiguration.assetsUrl):(this._isDebug=!!O.isDebug,this._assetsUrl=O.assetsUrl),this._assetsUrl=this._assetsUrl+"/web/"+c}l.createChild(T),T.prototype._waitForClient=function(){return this._client?Promise.resolve():this._createPromise.then(function(O){this._client=O}.bind(this))},T.prototype.setUpEventListeners=function(){throw new n(o.THREEDS_FRAMEWORK_METHOD_NOT_IMPLEMENTED)},T.prototype.verifyCard=function(O,_){var I,f,N=this;return _=_||{},f=this._checkForVerifyCardError(O,_),f?Promise.reject(f):(this._verifyCardInProgress=!0,I=this._formatVerifyCardOptions(O),this._formatLookupData(I).then(function(P){return a.sendEvent(N._createPromise,"three-d-secure.verification-flow.started"),N._performLookup(I.nonce,P)}).then(function(P){return a.sendEvent(N._createPromise,"three-d-secure.verification-flow.3ds-version."+P.lookup.threeDSecureVersion),N._onLookupComplete(P,I)}).then(function(P){return N.initializeChallengeWithLookupResponse(P,I)}).then(function(P){return N._resetVerificationState(),a.sendEvent(N._createPromise,"three-d-secure.verification-flow.completed"),P}).catch(function(P){return N._resetVerificationState(),a.sendEvent(N._createPromise,"three-d-secure.verification-flow.failed"),Promise.reject(P)}))},T.prototype._checkForFrameworkSpecificVerifyCardErrors=function(){throw new n(o.THREEDS_FRAMEWORK_METHOD_NOT_IMPLEMENTED)},T.prototype._presentChallenge=function(){throw new n(o.THREEDS_FRAMEWORK_METHOD_NOT_IMPLEMENTED)},T.prototype.prepareLookup=function(){throw new n(o.THREEDS_FRAMEWORK_METHOD_NOT_IMPLEMENTED)},T.prototype._resetVerificationState=function(){this._verifyCardInProgress=!1,this._verifyCardPromisePlus=null,typeof this._reloadThreeDSecure=="function"&&this._reloadThreeDSecure()},T.prototype._performLookup=function(O,_){var I=this,f="payment_methods/"+O+"/three_d_secure/lookup";return this._waitForClient().then(function(){return I._client.request({endpoint:f,method:"post",data:_}).catch(function(N){var P=N&&N.details&&N.details.httpStatus,b="three-d-secure.verification-flow.lookup-failed",D;return P===404?(D=o.THREEDS_LOOKUP_TOKENIZED_CARD_NOT_FOUND_ERROR,b+=".404"):P===422?(D=o.THREEDS_LOOKUP_VALIDATION_ERROR,b+=".422"):D=o.THREEDS_LOOKUP_ERROR,a.sendEvent(I._createPromise,b),Promise.reject(new n({type:D.type,code:D.code,message:D.message,details:{originalError:N}}))})})},T.prototype._checkForVerifyCardError=function(O,_){var I;return this._verifyCardInProgress===!0?new n(o.THREEDS_AUTHENTICATION_IN_PROGRESS):(O.nonce?O.amount||(I="an amount"):I="a nonce",I||(I=this._checkForFrameworkSpecificVerifyCardErrors(O,_)),I?new n({type:o.THREEDS_MISSING_VERIFY_CARD_OPTION.type,code:o.THREEDS_MISSING_VERIFY_CARD_OPTION.code,message:"verifyCard options must include "+I+"."}):null)},T.prototype.initializeChallengeWithLookupResponse=function(O,_){var I=this;return _=_||{},this._lookupPaymentMethod=O.paymentMethod,I._verifyCardPromisePlus=I._verifyCardPromisePlus||new i,I._handleLookupResponse(O,_),I._verifyCardPromisePlus.then(function(f){return a.sendEvent(I._createPromise,"three-d-secure.verification-flow.liability-shifted."+String(f.liabilityShifted)),a.sendEvent(I._createPromise,"three-d-secure.verification-flow.liability-shift-possible."+String(f.liabilityShiftPossible)),f})},T.prototype._handleLookupResponse=function(O,_){var I=!!(O.lookup&&O.lookup.acsUrl),f;a.sendEvent(this._createPromise,"three-d-secure.verification-flow.challenge-presented."+String(I)),I?this._presentChallenge(O,_):(f=this._formatAuthResponse(O.paymentMethod,O.threeDSecureInfo),f.verificationDetails=O.threeDSecureInfo,this._verifyCardPromisePlus.resolve(f))},T.prototype._onLookupComplete=function(O){return this._lookupPaymentMethod=O.paymentMethod,this._verifyCardPromisePlus=new i,Promise.resolve(O)},T.prototype._formatAuthResponse=function(O,_){return{nonce:O.nonce,type:O.type,binData:O.binData,details:O.details,description:O.description&&O.description.replace(/\+/g," "),liabilityShifted:_&&_.liabilityShifted,liabilityShiftPossible:_&&_.liabilityShiftPossible,threeDSecureInfo:O.threeDSecureInfo}},T.prototype._formatVerifyCardOptions=function(O){return t({},O)},T.prototype._formatLookupData=function(O){var _={amount:O.amount};return O.collectDeviceData===!0&&(_.browserColorDepth=window.screen.colorDepth,_.browserJavaEnabled=window.navigator.javaEnabled(),_.browserJavascriptEnabled=!0,_.browserLanguage=window.navigator.language,_.browserScreenHeight=window.screen.height,_.browserScreenWidth=window.screen.width,_.browserTimeZone=new Date().getTimezoneOffset(),_.deviceChannel="Browser"),Promise.resolve(_)},T.prototype._handleV1AuthResponse=function(O){var _=JSON.parse(O.auth_response);_.success?this._verifyCardPromisePlus.resolve(this._formatAuthResponse(_.paymentMethod,_.threeDSecureInfo)):_.threeDSecureInfo&&_.threeDSecureInfo.liabilityShiftPossible?this._verifyCardPromisePlus.resolve(this._formatAuthResponse(this._lookupPaymentMethod,_.threeDSecureInfo)):this._verifyCardPromisePlus.reject(new n({type:n.types.UNKNOWN,code:"UNKNOWN_AUTH_RESPONSE",message:_.error.message}))},T.prototype.cancelVerifyCard=function(){var O,_;return this._verifyCardInProgress=!1,this._lookupPaymentMethod?(_=this._lookupPaymentMethod.threeDSecureInfo,O=t({},this._lookupPaymentMethod,{liabilityShiftPossible:_&&_.liabilityShiftPossible,liabilityShifted:_&&_.liabilityShifted,verificationDetails:_&&_.verificationDetails}),Promise.resolve(O)):Promise.reject(new n(o.THREEDS_NO_VERIFICATION_PAYLOAD))},T.prototype._setupV1Bus=function(O){var _=this._client.getConfiguration(),I=window.location.href.split("#")[0],f=O.lookupResponse,N=v(),P=new p({channel:N,verifyDomain:r}),b=this._assetsUrl+"/html/three-d-secure-authentication-complete-frame.html?channel="+encodeURIComponent(N)+"&";return P.on(s,function(D){D({clientConfiguration:_,nonce:O.nonce,acsUrl:f.acsUrl,pareq:f.pareq,termUrl:f.termUrl+"&three_d_secure_version="+c+"&authentication_complete_base_url="+encodeURIComponent(b),md:f.md,parentUrl:I})}),P.on(A.AUTHENTICATION_COMPLETE,O.handleAuthResponse),P},T.prototype._setupV1Iframe=function(O){var _=this._assetsUrl+"/html/three-d-secure-bank-frame"+g(this._isDebug)+".html?showLoader="+O.showLoader,I=u({src:_,height:y,width:h,name:E.LANDING_FRAME_NAME+"_"+this._v1Bus.channel,title:"3D Secure Authorization Frame"});return I},T.prototype._setupV1Elements=function(O){this._v1Bus=this._setupV1Bus(O),this._v1Iframe=this._setupV1Iframe(O)},T.prototype._teardownV1Elements=function(){this._v1Bus&&(this._v1Bus.teardown(),this._v1Bus=null),this._v1Iframe&&this._v1Iframe.parentNode&&(this._v1Iframe.parentNode.removeChild(this._v1Iframe),this._v1Iframe=null),this._onV1Keyup&&(document.removeEventListener("keyup",this._onV1Keyup),this._onV1Keyup=null)},T.prototype.teardown=function(){return a.sendEvent(this._createPromise,"three-d-secure.teardown-completed"),this._teardownV1Elements(),Promise.resolve()},d.exports=T},{"../../../lib/analytics":119,"../../../lib/assign":121,"../../../lib/braintree-error":124,"../../../lib/constants":126,"../../../lib/is-verified-domain":153,"../../../lib/use-min":160,"../../shared/constants":199,"../../shared/errors":200,"../../shared/events":201,"@braintree/event-emitter":33,"@braintree/extended-promise":34,"@braintree/iframer":35,"@braintree/uuid":39,framebus:52}],191:[function(e,d,m){"use strict";var t=e("./songbird");function a(n){t.call(this,n)}a.prototype=Object.create(t.prototype,{constructor:t}),a.prototype._createV1IframeModalElement=function(n){var r=document.createElement("div");return r.innerHTML='<div class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="CCAFrameModal-label" aria-hidden="true" style="display: block;"><div class="modal-dialog" style="width:440px;z-index:999999;"><div class="modal-content"><div class="modal-body" data-braintree-v1-fallback-iframe-container><button type="button" data-braintree-v1-fallback-close-button class="close" data-dismiss="modal" aria-hidden="true">\xD7</button></div></div></div><div data-braintree-v1-fallback-backdrop style="position: fixed;cursor: pointer;z-index: 999998;top: 0;left: 0;width: 100%;height: 100%;"></div></div>',r.querySelector("[data-braintree-v1-fallback-iframe-container]").appendChild(n),r},a.prototype._createCardinalConfigurationOptions=function(n){var r=t.prototype._createCardinalConfigurationOptions.call(this,n);return r.payment.framework="bootstrap3",r},d.exports=a},{"./songbird":196}],192:[function(e,d,m){"use strict";var t=e("./songbird");function a(n){t.call(this,n)}a.prototype=Object.create(t.prototype,{constructor:t}),a.prototype._createV1IframeModalElement=function(n){var r=document.createElement("div"),i=!!(this._createOptions&&this._createOptions.cardinalSDKConfig&&this._createOptions.cardinalSDKConfig.payment&&this._createOptions.cardinalSDKConfig.payment.displayExitButton);return r.innerHTML=`<div style="position: fixed;z-index: 999999;top: 50%;left: 50%;padding: 24px 20px;transform: translate(-50%,-50%);border-radius: 2px;background: #fff;max-width: 100%;overflow: auto;"><div><button data-braintree-v1-fallback-close-button style="font-family: Helvetica,Arial,sans-serif;font-size: 25px;line-height: 12px;position: absolute;top: 2px;right: 0px;cursor: pointer;color: #999;border: 0;outline: none;background: none;" onMouseOver="this.style.color='#000'" onMouseOut="this.style.color='#999'">\xD7</button></div><div data-braintree-v1-fallback-iframe-container style="height: 400px;"></div></div><div data-braintree-v1-fallback-backdrop style="position: fixed;z-index: 999998;cursor: pointer;top: 0;left: 0;width: 100%;height: 100%;transition: opacity 1ms ease;background: rgba(0,0,0,.6);"></div>`,i||(r.querySelector("[data-braintree-v1-fallback-close-button]").style.display="none"),r.querySelector("[data-braintree-v1-fallback-iframe-container]").appendChild(n),r},d.exports=a},{"./songbird":196}],193:[function(e,d,m){"use strict";var t=e("./legacy"),a=e("./cardinal-modal"),n=e("./bootstrap3-modal"),r=e("./inline-iframe");d.exports={legacy:t,"cardinal-modal":a,"bootstrap3-modal":n,"inline-iframe":r}},{"./bootstrap3-modal":191,"./cardinal-modal":192,"./inline-iframe":194,"./legacy":195}],194:[function(e,d,m){"use strict";var t=e("./songbird"),a=e("../../../lib/braintree-error"),n=e("../../shared/errors"),r=e("../../../lib/enumerate");function i(l){t.call(this,l)}i.prototype=Object.create(t.prototype,{constructor:t}),i.events=r(["AUTHENTICATION_IFRAME_AVAILABLE"],"inline-iframe-framework:"),i.prototype.setUpEventListeners=function(l){t.prototype.setUpEventListeners.call(this,l),this.on(i.events.AUTHENTICATION_IFRAME_AVAILABLE,function(o,u){l("authentication-iframe-available",o,u)})},i.prototype._createCardinalConfigurationOptions=function(l){var o=t.prototype._createCardinalConfigurationOptions.call(this,l);return o.payment.framework="inline",o},i.prototype._addV1IframeToPage=function(){this._emit(i.events.AUTHENTICATION_IFRAME_AVAILABLE,{element:this._v1Modal},function(){})},i.prototype._setupFrameworkSpecificListeners=function(){this.setCardinalListener("ui.inline.setup",this._onInlineSetup.bind(this))},i.prototype._onInlineSetup=function(l,o,u,p){var E,v;if(!l||!o||o.paymentType!=="CCA"?v=!0:o.data.mode==="suppress"||o.data.mode==="static"||(v=!0),v){p(new a(n.THREEDS_INLINE_IFRAME_DETAILS_INCORRECT));return}E=document.createElement("div"),E.innerHTML=l,o.data.mode==="suppress"?(E.style.display="none",document.body.appendChild(E),u()):o.data.mode==="static"&&this._emit(i.events.AUTHENTICATION_IFRAME_AVAILABLE,{element:E},function(){u()})},d.exports=i},{"../../../lib/braintree-error":124,"../../../lib/enumerate":134,"../../shared/errors":200,"./songbird":196}],195:[function(e,d,m){"use strict";var t=e("./base"),a=e("../../../lib/deferred");function n(r){t.call(this,r)}n.prototype=Object.create(t.prototype,{constructor:n}),n.prototype.setUpEventListeners=function(){},n.prototype.transformV1CustomerBillingAddress=function(r){return r.billingAddress.line1=r.billingAddress.streetAddress,r.billingAddress.line2=r.billingAddress.extendedAddress,r.billingAddress.city=r.billingAddress.locality,r.billingAddress.state=r.billingAddress.region,r.billingAddress.countryCode=r.billingAddress.countryCodeAlpha2,delete r.billingAddress.streetAddress,delete r.billingAddress.extendedAddress,delete r.billingAddress.locality,delete r.billingAddress.region,delete r.billingAddress.countryCodeAlpha2,r},n.prototype._createIframe=function(r){var i=this;return this._setupV1Elements({nonce:r.nonce,lookupResponse:r.lookupResponse,showLoader:r.showLoader,handleAuthResponse:function(l){i._handleAuthResponse(l,r)}}),this._v1Iframe},n.prototype._handleAuthResponse=function(r,i){this._v1Bus.teardown(),i.removeFrame(),a(function(){this._handleV1AuthResponse(r)}.bind(this))()},n.prototype._checkForFrameworkSpecificVerifyCardErrors=function(r){var i;return typeof r.addFrame!="function"?i="an addFrame function":typeof r.removeFrame!="function"&&(i="a removeFrame function"),i},n.prototype._formatVerifyCardOptions=function(r){var i=t.prototype._formatVerifyCardOptions.call(this,r);return i.addFrame=a(r.addFrame),i.removeFrame=a(r.removeFrame),i.showLoader=r.showLoader!==!1,i},n.prototype._formatLookupData=function(r){var i=this;return t.prototype._formatLookupData.call(this,r).then(function(l){return r.customer&&r.customer.billingAddress&&(l.customer=i.transformV1CustomerBillingAddress(r.customer)),l})},n.prototype._presentChallenge=function(r,i){i.addFrame(null,this._createIframe({showLoader:i.showLoader,lookupResponse:r.lookup,nonce:r.paymentMethod.nonce,removeFrame:i.removeFrame}))},d.exports=n},{"../../../lib/deferred":132,"./base":190}],196:[function(e,d,m){"use strict";var t=e("./base"),a=e("../../../lib/assign").assign,n=e("../../../lib/deferred"),r=e("../../../lib/braintree-error"),i=e("../../../lib/convert-to-braintree-error"),l=e("../../../lib/analytics"),o=e("../../../lib/assets"),u=e("../../shared/errors"),p=e("../../../lib/enumerate"),E=e("../../shared/constants"),v=e("@braintree/extended-promise"),A=e("../../../lib/constants").INTEGRATION_TIMEOUT_MS,g=e("../../../lib/constants").PLATFORM,s="3.102.0",c="01",y=["ui.close","ui.render","ui.renderHidden","ui.loading.close","ui.loading.render"],h=["low_value","transaction_risk_analysis"];v.suppressUnhandledPromiseMessage=!0;function T(_){t.call(this,_),this._songbirdInitFailed=!1,this._clientMetadata={requestedThreeDSecureVersion:"2",sdkVersion:g+"/"+s},this.originalSetupOptions=_,this._getDfReferenceIdPromisePlus=new v,this.setupSongbird(_),this._cardinalEvents=[]}T.prototype=Object.create(t.prototype,{constructor:T}),T.events=p(["LOOKUP_COMPLETE","CUSTOMER_CANCELED","UI.CLOSE","UI.RENDER","UI.RENDERHIDDEN","UI.LOADING.CLOSE","UI.LOADING.RENDER"],"songbird-framework:"),T.prototype.setUpEventListeners=function(_){this.on(T.events.LOOKUP_COMPLETE,function(I,f){_("lookup-complete",I,f)}),this.on(T.events.CUSTOMER_CANCELED,function(){_("customer-canceled")}),this.on(T.events["UI.CLOSE"],function(){_("authentication-modal-close")}),this.on(T.events["UI.RENDER"],function(){_("authentication-modal-render")}),this.on(T.events["UI.RENDERHIDDEN"],function(){_("authentication-modal-render-hidden")}),this.on(T.events["UI.LOADING.CLOSE"],function(){_("authentication-modal-loader-close")}),this.on(T.events["UI.LOADING.RENDER"],function(){_("authentication-modal-loader-render")})},T.prototype.prepareLookup=function(_){var I=a({},_),f=this;return this.getDfReferenceId().then(function(N){I.dfReferenceId=N}).then(function(){return f._triggerCardinalBinProcess(_.bin)}).catch(function(){}).then(function(){return f._waitForClient()}).then(function(){return I.clientMetadata=f._clientMetadata,I.authorizationFingerprint=f._client.getConfiguration().authorizationFingerprint,I.braintreeLibraryVersion="braintree/web/"+s,I})},T.prototype.initializeChallengeWithLookupResponse=function(_,I){return this.setupSongbird().then(function(){return t.prototype.initializeChallengeWithLookupResponse.call(this,_,I)}.bind(this))},T.prototype.handleSongbirdError=function(_){this._songbirdInitFailed=!0,this._removeSongbirdListeners(),l.sendEvent(this._createPromise,"three-d-secure.cardinal-sdk.songbird-error."+_),this._songbirdPromise&&this._songbirdPromise.resolve()},T.prototype._triggerCardinalBinProcess=function(_){var I=this,f=Date.now();return window.Cardinal.trigger("bin.process",_).then(function(N){I._clientMetadata.issuerDeviceDataCollectionTimeElapsed=Date.now()-f,I._clientMetadata.issuerDeviceDataCollectionResult=N&&N.Status})},T.prototype.transformBillingAddress=function(_,I){return I&&(O(I,_,"billing"),_.billingPhoneNumber=I.phoneNumber,_.billingGivenName=I.givenName,_.billingSurname=I.surname),_},T.prototype.transformShippingAddress=function(_){var I=_.shippingAddress;return I&&(O(I,_,"shipping"),delete _.shippingAddress),_},T.prototype._createV1IframeModalElement=function(_){var I=document.createElement("div");return I.innerHTML='<div data-braintree-v1-fallback-iframe-container="true" style="height: 400px;"></div>',I.querySelector('[data-braintree-v1-fallback-iframe-container="true"]').appendChild(_),I},T.prototype._createV1IframeModal=function(_){var I=this._createV1IframeModalElement(_),f=I.querySelector("[data-braintree-v1-fallback-close-button]"),N=I.querySelector("[data-braintree-v1-fallback-backdrop]"),P=this;function b(){I.parentNode.removeChild(I),P.cancelVerifyCard(u.THREEDS_CARDINAL_SDK_CANCELED),document.removeEventListener("keyup",P._onV1Keyup),P._onV1Keyup=null}return this._onV1Keyup=function(D){D.key==="Escape"&&I.parentNode&&b()},f&&f.addEventListener("click",b),N&&N.addEventListener("click",b),document.addEventListener("keyup",this._onV1Keyup),I},T.prototype._addV1IframeToPage=function(){document.body.appendChild(this._v1Modal)},T.prototype.setupSongbird=function(_){var I=this,f=Date.now();return this._songbirdPromise?this._songbirdPromise:(_=_||{},this._songbirdPromise=new v,this._v2SetupFailureReason="reason-unknown",I._loadCardinalScript(_).then(function(){return window.Cardinal?I._configureCardinalSdk({setupOptions:_,setupStartTime:f}):(I._v2SetupFailureReason="cardinal-global-unavailable",Promise.reject(new r(u.THREEDS_CARDINAL_SDK_SETUP_FAILED)))}).catch(function(N){var P=i(N,{type:u.THREEDS_CARDINAL_SDK_SETUP_FAILED.type,code:u.THREEDS_CARDINAL_SDK_SETUP_FAILED.code,message:u.THREEDS_CARDINAL_SDK_SETUP_FAILED.message});I._getDfReferenceIdPromisePlus.reject(P),window.clearTimeout(I._songbirdSetupTimeoutReference),l.sendEvent(I._client,"three-d-secure.cardinal-sdk.init.setup-failed"),I.handleSongbirdError("cardinal-sdk-setup-failed."+I._v2SetupFailureReason)}),this._songbirdPromise)},T.prototype._configureCardinalSdk=function(_){var I=this;return this._waitForClient().then(function(){var f=I._client.getConfiguration().gatewayConfiguration.threeDSecure;return f}).then(function(f){var N=f.cardinalAuthenticationJWT,P=_.setupOptions,b=_.setupStartTime,D=I._createCardinalConfigurationOptions(P);y.forEach(function(M){I.setCardinalListener(M,function(){I._emit(T.events[M.toUpperCase()])})}),I.setCardinalListener("payments.setupComplete",I._createPaymentsSetupCompleteCallback()),I._setupFrameworkSpecificListeners(),window.Cardinal.configure(D),window.Cardinal.setup("init",{jwt:N}),I._clientMetadata.cardinalDeviceDataCollectionTimeElapsed=Date.now()-b,I.setCardinalListener("payments.validated",I._createPaymentsValidatedCallback())}).catch(function(f){return I._v2SetupFailureReason="cardinal-configuration-threw-error",Promise.reject(f)})},T.prototype.setCardinalListener=function(_,I){this._cardinalEvents.push(_),window.Cardinal.on(_,I)},T.prototype._setupFrameworkSpecificListeners=function(){},T.prototype._createCardinalConfigurationOptions=function(_){var I=_.cardinalSDKConfig||{},f=I.payment||{};return!I.logging&&_.loggingEnabled&&(I.logging={level:"verbose"}),I.payment={},f.hasOwnProperty("displayLoading")&&(I.payment.displayLoading=f.displayLoading),f.hasOwnProperty("displayExitButton")&&(I.payment.displayExitButton=f.displayExitButton),I},T.prototype._loadCardinalScript=function(_){var I=this;return this._waitForClient().then(function(){var f=I._getCardinalScriptSource();return I._songbirdSetupTimeoutReference=window.setTimeout(function(){l.sendEvent(I._client,"three-d-secure.cardinal-sdk.init.setup-timeout"),I.handleSongbirdError("cardinal-sdk-setup-timeout")},_.timeout||A),o.loadScript({src:f})}).catch(function(f){return I._v2SetupFailureReason="songbird-js-failed-to-load",Promise.reject(i(f,u.THREEDS_CARDINAL_SDK_SCRIPT_LOAD_FAILED))})},T.prototype._getCardinalScriptSource=function(){var _=this._client.getConfiguration().gatewayConfiguration;return _&&_.environment==="production"?E.CARDINAL_SCRIPT_SOURCE.production:E.CARDINAL_SCRIPT_SOURCE.sandbox},T.prototype._createPaymentsSetupCompleteCallback=function(){var _=this;return function(I){_._getDfReferenceIdPromisePlus.resolve(I.sessionId),window.clearTimeout(_._songbirdSetupTimeoutReference),l.sendEvent(_._createPromise,"three-d-secure.cardinal-sdk.init.setup-completed"),_._songbirdPromise.resolve()}},T.prototype.getDfReferenceId=function(){return this._getDfReferenceIdPromisePlus},T.prototype._performJWTValidation=function(_,I){var f=this,N=this._lookupPaymentMethod.nonce,P="payment_methods/"+N+"/three_d_secure/authenticate_from_jwt",b=_&&_.Payment&&_.Payment.ExtendedData&&_.Payment.ExtendedData.ChallengeCancel;return b&&(l.sendEvent(this._createPromise,"three-d-secure.verification-flow.cardinal-sdk.cancel-code."+b),b===c&&this._emit(T.events.CUSTOMER_CANCELED)),l.sendEvent(this._createPromise,"three-d-secure.verification-flow.upgrade-payment-method.started"),this._waitForClient().then(function(){return f._client.request({method:"post",endpoint:P,data:{jwt:I,paymentMethodNonce:N}})}).then(function(D){var M=D.paymentMethod||f._lookupPaymentMethod,L=f._formatAuthResponse(M,D.threeDSecureInfo);return L.rawCardinalSDKVerificationData=_,l.sendEvent(f._client,"three-d-secure.verification-flow.upgrade-payment-method.succeeded"),Promise.resolve(L)}).catch(function(D){var M=new r({type:u.THREEDS_JWT_AUTHENTICATION_FAILED.type,code:u.THREEDS_JWT_AUTHENTICATION_FAILED.code,message:u.THREEDS_JWT_AUTHENTICATION_FAILED.message,details:{originalError:D}});return l.sendEvent(f._client,"three-d-secure.verification-flow.upgrade-payment-method.errored"),Promise.reject(M)})},T.prototype._createPaymentsValidatedCallback=function(){var _=this;return function(I,f){var N;if(l.sendEvent(_._createPromise,"three-d-secure.verification-flow.cardinal-sdk.action-code."+I.ActionCode.toLowerCase()),!_._verifyCardPromisePlus){_.handleSongbirdError("cardinal-sdk-setup-error.number-"+I.ErrorNumber);return}switch(I.ActionCode){case"SUCCESS":case"NOACTION":case"FAILURE":_._performJWTValidation(I,f).then(function(P){_._verifyCardPromisePlus.resolve(P)}).catch(function(P){_._verifyCardPromisePlus.reject(P)});break;case"ERROR":switch(l.sendEvent(_._createPromise,"three-d-secure.verification-flow.cardinal-sdk-error."+I.ErrorNumber),I.ErrorNumber){case 10001:case 10002:N=new r(u.THREEDS_CARDINAL_SDK_SETUP_TIMEDOUT);break;case 10003:case 10007:case 10009:N=new r(u.THREEDS_CARDINAL_SDK_RESPONSE_TIMEDOUT);break;case 10005:case 10006:N=new r(u.THREEDS_CARDINAL_SDK_BAD_CONFIG);break;case 10008:case 10010:N=new r(u.THREEDS_CARDINAL_SDK_BAD_JWT);break;case 10011:l.sendEvent(_._createPromise,"three-d-secure.verification-flow.canceled"),N=new r(u.THREEDS_CARDINAL_SDK_CANCELED);break;default:N=new r(u.THREEDS_CARDINAL_SDK_ERROR)}N.details={originalError:{code:I.ErrorNumber,description:I.ErrorDescription}},_._verifyCardPromisePlus.reject(N);break;default:}}},T.prototype._checkForVerifyCardError=function(_,I){return _.bin?t.prototype._checkForVerifyCardError.call(this,_,I):new r({type:u.THREEDS_MISSING_VERIFY_CARD_OPTION.type,code:u.THREEDS_MISSING_VERIFY_CARD_OPTION.code,message:"verifyCard options must include a BIN."})},T.prototype._checkForFrameworkSpecificVerifyCardErrors=function(_,I){var f;return typeof _.onLookupComplete!="function"&&!I.ignoreOnLookupCompleteRequirement&&(f="an onLookupComplete function"),f},T.prototype._formatVerifyCardOptions=function(_){var I=t.prototype._formatVerifyCardOptions.call(this,_),f=I.additionalInformation||{};return f=this.transformBillingAddress(f,_.billingAddress),f=this.transformShippingAddress(f),_.onLookupComplete&&(I.onLookupComplete=n(_.onLookupComplete)),_.email&&(f.email=_.email),_.mobilePhoneNumber&&(f.mobilePhoneNumber=_.mobilePhoneNumber),I.additionalInformation=f,I},T.prototype._onLookupComplete=function(_,I){var f=this;return t.prototype._onLookupComplete.call(this,_).then(function(N){return new Promise(function(P,b){N.requiresUserAuthentication=!!(N.lookup&&N.lookup.acsUrl);function D(){P(N)}f._verifyCardPromisePlus.catch(b),I.onLookupComplete?I.onLookupComplete(N,D):f._emit(T.events.LOOKUP_COMPLETE,N,D)})})},T.prototype._presentChallenge=function(_){this._songbirdInitFailed||!_.lookup.transactionId||window.Cardinal.continue("cca",{AcsUrl:_.lookup.acsUrl,Payload:_.lookup.pareq},{OrderDetails:{TransactionId:_.lookup.transactionId}})},T.prototype._formatLookupData=function(_){var I=this;return t.prototype._formatLookupData.call(this,_).then(function(f){if(f.additionalInfo=_.additionalInformation,_.accountType&&(f.accountType=_.accountType),_.challengeRequested&&(f.challengeRequested=_.challengeRequested),_.requestedExemptionType){if(!h.includes(_.requestedExemptionType))throw new r({code:u.THREEDS_REQUESTED_EXEMPTION_TYPE_INVALID.code,type:u.THREEDS_REQUESTED_EXEMPTION_TYPE_INVALID.type,message:"requestedExemptionType `"+_.requestedExemptionType+"` is not a valid exemption. The accepted values are: `"+h.join("`, `")+"`"});f.requestedExemptionType=_.requestedExemptionType}return _.customFields&&(f.customFields=_.customFields),_.dataOnlyRequested&&(f.dataOnlyRequested=_.dataOnlyRequested),_.exemptionRequested&&(f.exemptionRequested=_.exemptionRequested),_.requestVisaDAF&&(f.requestVisaDAF=_.requestVisaDAF),_.bin&&(f.bin=_.bin),_.cardAdd!=null&&(f.cardAdd=_.cardAdd),_.cardAddChallengeRequested!=null&&(f.cardAdd=_.cardAddChallengeRequested),_.merchantName&&(f.merchantName=_.merchantName),I.prepareLookup(f)})},T.prototype.cancelVerifyCard=function(_){var I=this;return t.prototype.cancelVerifyCard.call(this).then(function(f){return I._verifyCardPromisePlus&&(_=_||new r(u.THREEDS_VERIFY_CARD_CANCELED_BY_MERCHANT),I._verifyCardPromisePlus.reject(_)),f})},T.prototype._removeSongbirdListeners=function(){this._cardinalEvents.forEach(function(_){window.Cardinal.off(_)}),this._cardinalEvents=[]},T.prototype.teardown=function(){return window.Cardinal&&this._removeSongbirdListeners(),t.prototype.teardown.call(this)},T.prototype._reloadThreeDSecure=function(){var _=this,I=Date.now();return _.teardown().then(function(){_._configureCardinalSdk({setupOptions:_.originalSetupOptions,setupStartTime:I})})};function O(_,I,f){I[f+"Line1"]=_.streetAddress,I[f+"Line2"]=_.extendedAddress,I[f+"Line3"]=_.line3,I[f+"City"]=_.locality,I[f+"State"]=_.region,I[f+"PostalCode"]=_.postalCode,I[f+"CountryCode"]=_.countryCodeAlpha2}d.exports=T},{"../../../lib/analytics":119,"../../../lib/assets":120,"../../../lib/assign":121,"../../../lib/braintree-error":124,"../../../lib/constants":126,"../../../lib/convert-to-braintree-error":128,"../../../lib/deferred":132,"../../../lib/enumerate":134,"../../shared/constants":199,"../../shared/errors":200,"./base":190,"@braintree/extended-promise":34}],197:[function(e,d,m){"use strict";var t=e("@braintree/wrap-promise"),a=e("../../lib/methods"),n=e("../../lib/convert-methods-to-error"),r=e("@braintree/event-emitter"),i=e("./frameworks");function l(o){var u=this,p=i[o.framework];r.call(this),this._framework=new p(o),this._framework.setUpEventListeners(function(){u._emit.apply(u,arguments)})}r.createChild(l),l.prototype.verifyCard=function(o){var u;return this.hasListener("lookup-complete")&&(u={ignoreOnLookupCompleteRequirement:!0}),this._framework.verifyCard(o,u)},l.prototype.initializeChallengeWithLookupResponse=function(o){return typeof o=="string"&&(o=JSON.parse(o)),this._framework.initializeChallengeWithLookupResponse(o)},l.prototype.prepareLookup=function(o){return this._framework.prepareLookup(o).then(function(u){return JSON.stringify(u)})},l.prototype.cancelVerifyCard=function(){return this._framework.cancelVerifyCard()},l.prototype.teardown=function(){var o=a(l.prototype).concat(a(r.prototype));return n(this,o),this._framework.teardown()},d.exports=t.wrapPrototype(l)},{"../../lib/convert-methods-to-error":127,"../../lib/methods":155,"./frameworks":193,"@braintree/event-emitter":33,"@braintree/wrap-promise":43}],198:[function(e,d,m){"use strict";var t=e("./external/three-d-secure"),a=e("../lib/is-https").isHTTPS,n=e("../lib/basic-component-verification"),r=e("../lib/create-deferred-client"),i=e("../lib/create-assets-url"),l=e("../lib/braintree-error"),o=e("../lib/analytics"),u=e("./shared/errors"),p="3.102.0",E=e("@braintree/wrap-promise");function v(g){var s="3D Secure",c=A(g);return n.verify({name:s,client:g.client,authorization:g.authorization}).then(function(){var y=i.create(g.authorization),h=r.create({authorization:g.authorization,client:g.client,debug:g.debug,assetsUrl:y,name:s}).then(function(O){var _,I,f=O.getConfiguration(),N=f.gatewayConfiguration;return g.client=O,N.threeDSecureEnabled||(_=u.THREEDS_NOT_ENABLED),f.authorizationType==="TOKENIZATION_KEY"&&(_=u.THREEDS_CAN_NOT_USE_TOKENIZATION_KEY),I=N.environment==="production",I&&!a()&&(_=u.THREEDS_HTTPS_REQUIRED),c!=="legacy"&&!(N.threeDSecure&&N.threeDSecure.cardinalAuthenticationJWT)&&(o.sendEvent(g.client,"three-d-secure.initialization.failed.missing-cardinalAuthenticationJWT"),_=u.THREEDS_NOT_ENABLED_FOR_V2),_?Promise.reject(new l(_)):(o.sendEvent(g.client,"three-d-secure.initialized"),O)}),T=new t({client:g.client,assetsUrl:y,createPromise:h,loggingEnabled:g.loggingEnabled,cardinalSDKConfig:g.cardinalSDKConfig,framework:c});return g.client?h.then(function(){return T}):T})}function A(g){var s=String(g.version||"");if(!s||s==="1")throw new l({code:u.THREEDS_UNSUPPORTED_VERSION.code,type:u.THREEDS_UNSUPPORTED_VERSION.type,message:u.THREEDS_UNSUPPORTED_VERSION.message});switch(s){case"2":case"2-cardinal-modal":return"cardinal-modal";case"2-bootstrap3-modal":return"bootstrap3-modal";case"2-inline-iframe":return"inline-iframe";default:throw new l({code:u.THREEDS_UNRECOGNIZED_VERSION.code,type:u.THREEDS_UNRECOGNIZED_VERSION.type,message:"Version `"+g.version+"` is not a recognized version. You may need to update the version of your Braintree SDK to support this version."})}}d.exports={create:E(v),VERSION:p}},{"../lib/analytics":119,"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"../lib/is-https":152,"./external/three-d-secure":197,"./shared/errors":200,"@braintree/wrap-promise":43}],199:[function(e,d,m){"use strict";d.exports={LANDING_FRAME_NAME:"braintreethreedsecurelanding",CARDINAL_SCRIPT_SOURCE:{production:"https://songbird.cardinalcommerce.com/edge/v1/songbird.js",sandbox:"https://songbirdstag.cardinalcommerce.com/edge/v1/songbird.js"}}},{}],200:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error");d.exports={THREEDS_NOT_ENABLED:{type:t.types.MERCHANT,code:"THREEDS_NOT_ENABLED",message:"3D Secure is not enabled for this merchant."},THREEDS_CAN_NOT_USE_TOKENIZATION_KEY:{type:t.types.MERCHANT,code:"THREEDS_CAN_NOT_USE_TOKENIZATION_KEY",message:"3D Secure can not use a tokenization key for authorization."},THREEDS_HTTPS_REQUIRED:{type:t.types.MERCHANT,code:"THREEDS_HTTPS_REQUIRED",message:"3D Secure requires HTTPS."},THREEDS_NOT_ENABLED_FOR_V2:{type:t.types.MERCHANT,code:"THREEDS_NOT_ENABLED_FOR_V2",message:"3D Secure version 2 is not enabled for this merchant. Contact Braintree Support for assistance at https://help.braintreepayments.com/"},THREEDS_UNRECOGNIZED_VERSION:{type:t.types.MERCHANT,code:"THREEDS_UNRECOGNIZED_VERSION"},THREEDS_CARDINAL_SDK_SETUP_FAILED:{type:t.types.UNKNOWN,code:"THREEDS_CARDINAL_SDK_SETUP_FAILED",message:"Something went wrong setting up Cardinal's Songbird.js library."},THREEDS_CARDINAL_SDK_SCRIPT_LOAD_FAILED:{type:t.types.NETWORK,code:"THREEDS_CARDINAL_SDK_SCRIPT_LOAD_FAILED",message:"Cardinal's Songbird.js library could not be loaded."},THREEDS_CARDINAL_SDK_SETUP_TIMEDOUT:{type:t.types.UNKNOWN,code:"THREEDS_CARDINAL_SDK_SETUP_TIMEDOUT",message:"Cardinal's Songbird.js took too long to setup."},THREEDS_CARDINAL_SDK_RESPONSE_TIMEDOUT:{type:t.types.UNKNOWN,code:"THREEDS_CARDINAL_SDK_RESPONSE_TIMEDOUT",message:"Cardinal's API took too long to respond."},THREEDS_CARDINAL_SDK_BAD_CONFIG:{type:t.types.MERCHANT,code:"THREEDS_CARDINAL_SDK_BAD_CONFIG",message:"JWT or other required field missing. Please check your setup configuration."},THREEDS_CARDINAL_SDK_BAD_JWT:{type:t.types.MERCHANT,code:"THREEDS_CARDINAL_SDK_BAD_JWT",message:"Cardinal JWT missing or malformed. Please check your setup configuration."},THREEDS_CARDINAL_SDK_ERROR:{type:t.types.UNKNOWN,code:"THREEDS_CARDINAL_SDK_ERROR",message:"A general error has occurred with Cardinal. See description for more information."},THREEDS_CARDINAL_SDK_CANCELED:{type:t.types.CUSTOMER,code:"THREEDS_CARDINAL_SDK_CANCELED",message:"Canceled by user."},THREEDS_VERIFY_CARD_CANCELED_BY_MERCHANT:{type:t.types.MERCHANT,code:"THREEDS_VERIFY_CARD_CANCELED_BY_MERCHANT",message:"3D Secure verfication canceled by merchant."},THREEDS_AUTHENTICATION_IN_PROGRESS:{type:t.types.MERCHANT,code:"THREEDS_AUTHENTICATION_IN_PROGRESS",message:"Cannot call verifyCard while existing authentication is in progress."},THREEDS_MISSING_VERIFY_CARD_OPTION:{type:t.types.MERCHANT,code:"THREEDS_MISSING_VERIFY_CARD_OPTION"},THREEDS_JWT_AUTHENTICATION_FAILED:{type:t.types.UNKNOWN,code:"THREEDS_JWT_AUTHENTICATION_FAILED",message:"Something went wrong authenticating the JWT from Cardinal"},THREEDS_LOOKUP_TOKENIZED_CARD_NOT_FOUND_ERROR:{type:t.types.MERCHANT,code:"THREEDS_LOOKUP_TOKENIZED_CARD_NOT_FOUND_ERROR",message:"Either the payment method nonce passed to `verifyCard` does not exist, or it was already consumed"},THREEDS_LOOKUP_VALIDATION_ERROR:{type:t.types.CUSTOMER,code:"THREEDS_LOOKUP_VALIDATION_ERROR",message:"The data passed in `verifyCard` did not pass validation checks. See details for more info"},THREEDS_LOOKUP_ERROR:{type:t.types.UNKNOWN,code:"THREEDS_LOOKUP_ERROR",message:"Something went wrong during the 3D Secure lookup"},THREEDS_INLINE_IFRAME_DETAILS_INCORRECT:{type:t.types.UNKNOWN,code:"THREEDS_INLINE_IFRAME_DETAILS_INCORRECT",message:"Something went wrong when attempting to add the authentication iframe to the page."},THREEDS_NO_VERIFICATION_PAYLOAD:{type:t.types.MERCHANT,code:"THREEDS_NO_VERIFICATION_PAYLOAD",message:"No verification payload available."},THREEDS_TERM_URL_REQUIRES_BRAINTREE_DOMAIN:{type:t.types.INTERNAL,code:"THREEDS_TERM_URL_REQUIRES_BRAINTREE_DOMAIN",message:"Term Url must be on a Braintree domain."},THREEDS_FRAMEWORK_METHOD_NOT_IMPLEMENTED:{type:t.types.INTERNAL,code:"THREEDS_FRAMEWORK_METHOD_NOT_IMPLEMENTED",message:"Method not implemented for this framework."},THREEDS_REQUESTED_EXEMPTION_TYPE_INVALID:{type:t.types.MERCHANT,code:"THREEDS_REQUESTED_EXEMPTION_TYPE_INVALID",message:"Requested Exemption Type is invalid."},THREEDS_UNSUPPORTED_VERSION:{type:t.types.MERCHANT,code:"THREEDS_UNSUPPORTED_VERSION",message:"3D Secure `1` is deprecated and no longer supported. See available versions at https://braintree.github.io/braintree-web/current/module-braintree-web_three-d-secure.html#.create"}}},{"../../lib/braintree-error":124}],201:[function(e,d,m){"use strict";var t=e("../../lib/enumerate");d.exports=t(["AUTHENTICATION_COMPLETE"],"threedsecure:")},{"../../lib/enumerate":134}],202:[function(e,d,m){"use strict";var t=e("./shared/unionpay"),a=e("../lib/basic-component-verification"),n=e("../lib/braintree-error"),r=e("../lib/create-deferred-client"),i=e("../lib/create-assets-url"),l=e("../lib/analytics"),o=e("./shared/errors"),u="3.102.0",p=e("@braintree/wrap-promise");function E(v){var A="UnionPay";return a.verify({name:A,client:v.client,authorization:v.authorization}).then(function(){return r.create({authorization:v.authorization,client:v.client,debug:v.debug,assetsUrl:i.create(v.authorization),name:A})}).then(function(g){var s=g.getConfiguration();return v.client=g,!s.gatewayConfiguration.unionPay||s.gatewayConfiguration.unionPay.enabled!==!0?Promise.reject(new n(o.UNIONPAY_NOT_ENABLED)):(l.sendEvent(v.client,"unionpay.initialized"),new t(v))})}d.exports={create:p(E),VERSION:u}},{"../lib/analytics":119,"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./shared/errors":204,"./shared/unionpay":205,"@braintree/wrap-promise":43}],203:[function(e,d,m){"use strict";var t=e("../../lib/enumerate");d.exports={events:t(["HOSTED_FIELDS_FETCH_CAPABILITIES","HOSTED_FIELDS_ENROLL","HOSTED_FIELDS_TOKENIZE"],"union-pay:"),HOSTED_FIELDS_FRAME_NAME:"braintreeunionpayhostedfields"}},{"../../lib/enumerate":134}],204:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error");d.exports={UNIONPAY_NOT_ENABLED:{type:t.types.MERCHANT,code:"UNIONPAY_NOT_ENABLED",message:"UnionPay is not enabled for this merchant."},UNIONPAY_HOSTED_FIELDS_INSTANCE_INVALID:{type:t.types.MERCHANT,code:"UNIONPAY_HOSTED_FIELDS_INSTANCE_INVALID",message:"Found an invalid Hosted Fields instance. Please use a valid Hosted Fields instance."},UNIONPAY_HOSTED_FIELDS_INSTANCE_REQUIRED:{type:t.types.MERCHANT,code:"UNIONPAY_HOSTED_FIELDS_INSTANCE_REQUIRED",message:"Could not find the Hosted Fields instance."},UNIONPAY_CARD_OR_HOSTED_FIELDS_INSTANCE_REQUIRED:{type:t.types.MERCHANT,code:"UNIONPAY_CARD_OR_HOSTED_FIELDS_INSTANCE_REQUIRED",message:"A card or a Hosted Fields instance is required. Please supply a card or a Hosted Fields instance."},UNIONPAY_CARD_AND_HOSTED_FIELDS_INSTANCES:{type:t.types.MERCHANT,code:"UNIONPAY_CARD_AND_HOSTED_FIELDS_INSTANCES",message:"Please supply either a card or a Hosted Fields instance, not both."},UNIONPAY_EXPIRATION_DATE_INCOMPLETE:{type:t.types.MERCHANT,code:"UNIONPAY_EXPIRATION_DATE_INCOMPLETE",message:"You must supply expiration month and year or neither."},UNIONPAY_ENROLLMENT_CUSTOMER_INPUT_INVALID:{type:t.types.CUSTOMER,code:"UNIONPAY_ENROLLMENT_CUSTOMER_INPUT_INVALID",message:"Enrollment failed due to user input error."},UNIONPAY_ENROLLMENT_NETWORK_ERROR:{type:t.types.NETWORK,code:"UNIONPAY_ENROLLMENT_NETWORK_ERROR",message:"Could not enroll UnionPay card."},UNIONPAY_FETCH_CAPABILITIES_NETWORK_ERROR:{type:t.types.NETWORK,code:"UNIONPAY_FETCH_CAPABILITIES_NETWORK_ERROR",message:"Could not fetch card capabilities."},UNIONPAY_TOKENIZATION_NETWORK_ERROR:{type:t.types.NETWORK,code:"UNIONPAY_TOKENIZATION_NETWORK_ERROR",message:"A tokenization network error occurred."},UNIONPAY_MISSING_MOBILE_PHONE_DATA:{type:t.types.MERCHANT,code:"UNIONPAY_MISSING_MOBILE_PHONE_DATA",message:"A `mobile` with `countryCode` and `number` is required."},UNIONPAY_FAILED_TOKENIZATION:{type:t.types.CUSTOMER,code:"UNIONPAY_FAILED_TOKENIZATION",message:"The supplied card data failed tokenization."}}},{"../../lib/braintree-error":124}],205:[function(e,d,m){"use strict";var t=e("../../lib/analytics"),a=e("../../lib/braintree-error"),n=e("framebus"),r=e("./constants"),i=e("../../lib/is-verified-domain"),l=e("../../lib/use-min"),o=e("../../lib/convert-methods-to-error"),u=e("./errors"),p=r.events,E=e("@braintree/iframer"),v=e("../../lib/methods"),A="3.102.0",g=e("@braintree/uuid"),s=e("@braintree/wrap-promise"),c=e("../../lib/constants").BUS_CONFIGURATION_REQUEST_EVENT;function y(h){this._options=h}y.prototype.fetchCapabilities=function(h){var T=this,O=this._options.client,_=h.card?h.card.number:null,I=h.hostedFields;return _&&I?Promise.reject(new a(u.UNIONPAY_CARD_AND_HOSTED_FIELDS_INSTANCES)):_?O.request({method:"get",endpoint:"payment_methods/credit_cards/capabilities",data:{_meta:{source:"unionpay"},creditCard:{number:_}}}).then(function(f){return t.sendEvent(O,"unionpay.capabilities-received"),f}).catch(function(f){var N=f.details&&f.details.httpStatus;return t.sendEvent(O,"unionpay.capabilities-failed"),N===403?Promise.reject(f):Promise.reject(new a({type:u.UNIONPAY_FETCH_CAPABILITIES_NETWORK_ERROR.type,code:u.UNIONPAY_FETCH_CAPABILITIES_NETWORK_ERROR.code,message:u.UNIONPAY_FETCH_CAPABILITIES_NETWORK_ERROR.message,details:{originalError:f}}))}):I?I._bus?T._initializeHostedFields().then(function(){return new Promise(function(f,N){T._bus.emit(p.HOSTED_FIELDS_FETCH_CAPABILITIES,{hostedFields:I},function(P){if(P.err){N(new a(P.err));return}f(P.payload)})})}):Promise.reject(new a(u.UNIONPAY_HOSTED_FIELDS_INSTANCE_INVALID)):Promise.reject(new a(u.UNIONPAY_CARD_OR_HOSTED_FIELDS_INSTANCE_REQUIRED))},y.prototype.enroll=function(h){var T=this,O=this._options.client,_=h.card,I=h.mobile,f=h.hostedFields,N;if(!I)return Promise.reject(new a(u.UNIONPAY_MISSING_MOBILE_PHONE_DATA));if(f){if(f._bus){if(_)return Promise.reject(new a(u.UNIONPAY_CARD_AND_HOSTED_FIELDS_INSTANCES))}else return Promise.reject(new a(u.UNIONPAY_HOSTED_FIELDS_INSTANCE_INVALID));return new Promise(function(P,b){T._initializeHostedFields().then(function(){T._bus.emit(p.HOSTED_FIELDS_ENROLL,{hostedFields:f,mobile:I},function(D){if(D.err){b(new a(D.err));return}P(D.payload)})})})}else if(_&&_.number){if(N={_meta:{source:"unionpay"},unionPayEnrollment:{number:_.number,mobileCountryCode:I.countryCode,mobileNumber:I.number}},_.expirationDate)N.unionPayEnrollment.expirationDate=_.expirationDate;else if(_.expirationMonth||_.expirationYear)if(_.expirationMonth&&_.expirationYear)N.unionPayEnrollment.expirationYear=_.expirationYear,N.unionPayEnrollment.expirationMonth=_.expirationMonth;else return Promise.reject(new a(u.UNIONPAY_EXPIRATION_DATE_INCOMPLETE));return O.request({method:"post",endpoint:"union_pay_enrollments",data:N}).then(function(P){return t.sendEvent(O,"unionpay.enrollment-succeeded"),{enrollmentId:P.unionPayEnrollmentId,smsCodeRequired:P.smsCodeRequired}}).catch(function(P){var b,D=P.details&&P.details.httpStatus;return D===403?b=P:D<500?(b=new a(u.UNIONPAY_ENROLLMENT_CUSTOMER_INPUT_INVALID),b.details={originalError:P}):(b=new a(u.UNIONPAY_ENROLLMENT_NETWORK_ERROR),b.details={originalError:P}),t.sendEvent(O,"unionpay.enrollment-failed"),Promise.reject(b)})}return Promise.reject(new a(u.UNIONPAY_CARD_OR_HOSTED_FIELDS_INSTANCE_REQUIRED))},y.prototype.tokenize=function(h){var T,O=this,_=this._options.client,I=h.card,f=h.hostedFields;return I&&f?Promise.reject(new a(u.UNIONPAY_CARD_AND_HOSTED_FIELDS_INSTANCES)):I?(T={_meta:{source:"unionpay"},creditCard:{number:h.card.number,options:{unionPayEnrollment:{id:h.enrollmentId}}}},h.smsCode&&(T.creditCard.options.unionPayEnrollment.smsCode=h.smsCode),I.expirationDate?T.creditCard.expirationDate=I.expirationDate:I.expirationMonth&&I.expirationYear&&(T.creditCard.expirationYear=I.expirationYear,T.creditCard.expirationMonth=I.expirationMonth),h.card.cvv&&(T.creditCard.cvv=h.card.cvv),_.request({method:"post",endpoint:"payment_methods/credit_cards",data:T}).then(function(N){var P=N.creditCards[0];return delete P.consumed,delete P.threeDSecureInfo,t.sendEvent(_,"unionpay.nonce-received"),P}).catch(function(N){var P,b=N.details&&N.details.httpStatus;return t.sendEvent(_,"unionpay.nonce-failed"),b===403?P=N:b<500?(P=new a(u.UNIONPAY_FAILED_TOKENIZATION),P.details={originalError:N}):(P=new a(u.UNIONPAY_TOKENIZATION_NETWORK_ERROR),P.details={originalError:N}),Promise.reject(P)})):f?f._bus?new Promise(function(N,P){O._initializeHostedFields().then(function(){O._bus.emit(p.HOSTED_FIELDS_TOKENIZE,h,function(b){if(b.err){P(new a(b.err));return}N(b.payload)})})}):Promise.reject(new a(u.UNIONPAY_HOSTED_FIELDS_INSTANCE_INVALID)):Promise.reject(new a(u.UNIONPAY_CARD_OR_HOSTED_FIELDS_INSTANCE_REQUIRED))},y.prototype.teardown=function(){return this._bus&&(this._hostedFieldsFrame.parentNode.removeChild(this._hostedFieldsFrame),this._bus.teardown()),o(this,v(y.prototype)),Promise.resolve()},y.prototype._initializeHostedFields=function(){var h,T,O=g(),_=this;return this._hostedFieldsInitializePromise?this._hostedFieldsInitializePromise:(this._hostedFieldsInitializePromise=new Promise(function(I){h=_._options.client.getConfiguration().gatewayConfiguration.assetsUrl,T=_._options.client.getConfiguration().isDebug,_._bus=new n({channel:O,verifyDomain:i}),_._hostedFieldsFrame=E({name:r.HOSTED_FIELDS_FRAME_NAME+"_"+O,src:h+"/web/"+A+"/html/unionpay-hosted-fields-frame"+l(T)+".html",height:0,width:0}),_._bus.on(c,function(f){f(_._options.client),I()}),document.body.appendChild(_._hostedFieldsFrame)}),this._hostedFieldsInitializePromise)},d.exports=s.wrapPrototype(y)},{"../../lib/analytics":119,"../../lib/braintree-error":124,"../../lib/constants":126,"../../lib/convert-methods-to-error":127,"../../lib/is-verified-domain":153,"../../lib/methods":155,"../../lib/use-min":160,"./constants":203,"./errors":204,"@braintree/iframer":35,"@braintree/uuid":39,"@braintree/wrap-promise":43,framebus:52}],206:[function(e,d,m){"use strict";d.exports={PLAID_LINK_JS:"https://cdn.plaid.com/link/v2/stable/link-initialize.js"}},{}],207:[function(e,d,m){"use strict";var t=e("../lib/braintree-error");d.exports={US_BANK_ACCOUNT_OPTION_REQUIRED:{type:t.types.MERCHANT,code:"US_BANK_ACCOUNT_OPTION_REQUIRED"},US_BANK_ACCOUNT_MUTUALLY_EXCLUSIVE_OPTIONS:{type:t.types.MERCHANT,code:"US_BANK_ACCOUNT_MUTUALLY_EXCLUSIVE_OPTIONS"},US_BANK_ACCOUNT_LOGIN_LOAD_FAILED:{type:t.types.NETWORK,code:"US_BANK_ACCOUNT_LOGIN_LOAD_FAILED",message:"Bank login flow failed to load."},US_BANK_ACCOUNT_LOGIN_CLOSED:{type:t.types.CUSTOMER,code:"US_BANK_ACCOUNT_LOGIN_CLOSED",message:"Customer closed bank login flow before authorizing."},US_BANK_ACCOUNT_LOGIN_REQUEST_ACTIVE:{type:t.types.MERCHANT,code:"US_BANK_ACCOUNT_LOGIN_REQUEST_ACTIVE",message:"Another bank login tokenization request is active."},US_BANK_ACCOUNT_TOKENIZATION_NETWORK_ERROR:{type:t.types.NETWORK,code:"US_BANK_ACCOUNT_TOKENIZATION_NETWORK_ERROR",message:"A tokenization network error occurred."},US_BANK_ACCOUNT_FAILED_TOKENIZATION:{type:t.types.CUSTOMER,code:"US_BANK_ACCOUNT_FAILED_TOKENIZATION",message:"The supplied data failed tokenization."},US_BANK_ACCOUNT_NOT_ENABLED:{type:t.types.MERCHANT,code:"US_BANK_ACCOUNT_NOT_ENABLED",message:"US bank account is not enabled."},US_BANK_ACCOUNT_BANK_LOGIN_NOT_ENABLED:{type:t.types.MERCHANT,code:"US_BANK_ACCOUNT_BANK_LOGIN_NOT_ENABLED",message:"Bank login is not enabled."}}},{"../lib/braintree-error":124}],208:[function(e,d,m){"use strict";var t=e("../lib/basic-component-verification"),a=e("../lib/braintree-error"),n=e("../lib/create-deferred-client"),r=e("../lib/create-assets-url"),i=e("./errors"),l=e("./us-bank-account"),o="3.102.0",u=e("@braintree/wrap-promise");function p(E){var v="US Bank Account";return t.verify({name:v,client:E.client,authorization:E.authorization}).then(function(){return n.create({authorization:E.authorization,client:E.client,debug:E.debug,assetsUrl:r.create(E.authorization),name:v})}).then(function(A){var g;return E.client=A,g=E.client.getConfiguration().gatewayConfiguration.usBankAccount,g?new l(E):Promise.reject(new a(i.US_BANK_ACCOUNT_NOT_ENABLED))})}d.exports={create:u(p),VERSION:o}},{"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./errors":207,"./us-bank-account":209,"@braintree/wrap-promise":43}],209:[function(e,d,m){"use strict";var t=e("../lib/braintree-error"),a=e("./constants"),n=e("./errors"),r=e("../lib/errors"),i=e("../lib/analytics"),l=e("../lib/once"),o=e("../lib/convert-methods-to-error"),u=e("../lib/methods"),p=e("@braintree/wrap-promise"),E=T("UsBankAccount"),v=T("UsBankLogin");function A(O){this._client=O.client,this._isTokenizingBankLogin=!1,i.sendEvent(this._client,"usbankaccount.initialized")}A.prototype.tokenize=function(O){return O=O||{},O.mandateText?O.bankDetails&&O.bankLogin?Promise.reject(new t({type:n.US_BANK_ACCOUNT_MUTUALLY_EXCLUSIVE_OPTIONS.type,code:n.US_BANK_ACCOUNT_MUTUALLY_EXCLUSIVE_OPTIONS.code,message:"tokenize must be called with bankDetails or bankLogin, not both."})):O.bankDetails?this._tokenizeBankDetails(O):O.bankLogin?this._tokenizeBankLogin(O):Promise.reject(new t({type:n.US_BANK_ACCOUNT_OPTION_REQUIRED.type,code:n.US_BANK_ACCOUNT_OPTION_REQUIRED.code,message:"tokenize must be called with bankDetails or bankLogin."})):Promise.reject(new t({type:n.US_BANK_ACCOUNT_OPTION_REQUIRED.type,code:n.US_BANK_ACCOUNT_OPTION_REQUIRED.code,message:"mandateText property is required."}))},A.prototype._tokenizeBankDetails=function(O){var _=this._client,I=O.bankDetails,f={achMandate:O.mandateText,routingNumber:I.routingNumber,accountNumber:I.accountNumber,accountType:I.accountType.toUpperCase(),billingAddress:y(I.billingAddress||{})};return h(f,I),_.request({api:"graphQLApi",data:{query:E,variables:{input:{usBankAccount:f}}}}).then(function(N){return i.sendEvent(_,"usbankaccount.bankdetails.tokenization.succeeded"),Promise.resolve(s(N,"tokenizeUsBankAccount"))}).catch(function(N){var P=g(N);return i.sendEvent(_,"usbankaccount.bankdetails.tokenization.failed"),Promise.reject(P)})},A.prototype._tokenizeBankLogin=function(O){var _=this,I=this._client,f=I.getConfiguration().gatewayConfiguration,N=f.environment==="production",P=f.usBankAccount.plaid;return O.bankLogin.displayName?P?this._isTokenizingBankLogin?Promise.reject(new t(n.US_BANK_ACCOUNT_LOGIN_REQUEST_ACTIVE)):(this._isTokenizingBankLogin=!0,new Promise(function(b,D){_._loadPlaid(function(M,L){if(M){D(M);return}L.create({clientName:O.bankLogin.displayName,apiVersion:"v2",env:N?"production":"sandbox",key:P.publicKey,product:"auth",selectAccount:!0,onExit:function(){_._isTokenizingBankLogin=!1,i.sendEvent(I,"usbankaccount.banklogin.tokenization.closed.by-user"),D(new t(n.US_BANK_ACCOUNT_LOGIN_CLOSED))},onSuccess:function(C,R){var w=O.bankLogin,B={publicToken:C,accountId:N?R.account_id:"plaid_account_id",accountType:R.account.subtype.toUpperCase(),achMandate:O.mandateText,billingAddress:y(w.billingAddress||{})};h(B,w),I.request({api:"graphQLApi",data:{query:v,variables:{input:{usBankLogin:B}}}}).then(function(H){_._isTokenizingBankLogin=!1,i.sendEvent(I,"usbankaccount.banklogin.tokenization.succeeded"),b(s(H,"tokenizeUsBankLogin"))}).catch(function(H){var K;_._isTokenizingBankLogin=!1,K=g(H),i.sendEvent(I,"usbankaccount.banklogin.tokenization.failed"),D(K)})}}).open(),i.sendEvent(I,"usbankaccount.banklogin.tokenization.started")})})):Promise.reject(new t(n.US_BANK_ACCOUNT_BANK_LOGIN_NOT_ENABLED)):Promise.reject(new t({type:n.US_BANK_ACCOUNT_OPTION_REQUIRED.type,code:n.US_BANK_ACCOUNT_OPTION_REQUIRED.code,message:"displayName property is required when using bankLogin."}))};function g(O){var _,I=O.details&&O.details.httpStatus;return I===401?_=new t(r.BRAINTREE_API_ACCESS_RESTRICTED):I<500?_=new t(n.US_BANK_ACCOUNT_FAILED_TOKENIZATION):_=new t(n.US_BANK_ACCOUNT_TOKENIZATION_NETWORK_ERROR),_.details={originalError:O},_}function s(O,_){var I=O.data[_].paymentMethod,f=I.details.last4,N="US bank account ending in - "+f;return{nonce:I.id,details:{},description:N,type:"us_bank_account"}}A.prototype._loadPlaid=function(O){var _,I;if(O=l(O),window.Plaid){O(null,window.Plaid);return}_=document.querySelector('script[src="'+a.PLAID_LINK_JS+'"]'),_?c(_,O):(I=document.createElement("script"),I.src=a.PLAID_LINK_JS,I.async=!0,c(I,O),document.body.appendChild(I),this._plaidScript=I)};function c(O,_){function I(){var P=this.readyState;(!P||P==="loaded"||P==="complete")&&(N(),_(null,window.Plaid))}function f(){O.parentNode.removeChild(O),_(new t(n.US_BANK_ACCOUNT_LOGIN_LOAD_FAILED))}function N(){O.removeEventListener("error",f),O.removeEventListener("load",I),O.removeEventListener("readystatechange",I)}O.addEventListener("error",f),O.addEventListener("load",I),O.addEventListener("readystatechange",I)}function y(O){return{streetAddress:O.streetAddress,extendedAddress:O.extendedAddress,city:O.locality,state:O.region,zipCode:O.postalCode}}function h(O,_){_.ownershipType==="personal"?O.individualOwner={firstName:_.firstName,lastName:_.lastName}:_.ownershipType==="business"&&(O.businessOwner={businessName:_.businessName})}function T(O){return"mutation Tokenize"+O+"($input: Tokenize"+O+"Input!) {  tokenize"+O+"(input: $input) {    paymentMethod {      id      details {        ... on UsBankAccountDetails {          last4        }      }    }  }}"}A.prototype.teardown=function(){return this._plaidScript&&document.body.removeChild(this._plaidScript),o(this,u(A.prototype)),Promise.resolve()},d.exports=p.wrapPrototype(A)},{"../lib/analytics":119,"../lib/braintree-error":124,"../lib/convert-methods-to-error":127,"../lib/errors":135,"../lib/methods":155,"../lib/once":156,"./constants":206,"./errors":207,"@braintree/wrap-promise":43}],210:[function(e,d,m){"use strict";var t=e("../lib/braintree-error");d.exports={VAULT_MANAGER_DELETE_PAYMENT_METHOD_NONCE_REQUIRES_CLIENT_TOKEN:{type:t.types.MERCHANT,code:"VAULT_MANAGER_DELETE_PAYMENT_METHOD_NONCE_REQUIRES_CLIENT_TOKEN",message:"A client token with a customer id must be used to delete a payment method nonce."},VAULT_MANAGER_PAYMENT_METHOD_NONCE_NOT_FOUND:{type:t.types.MERCHANT,code:"VAULT_MANAGER_PAYMENT_METHOD_NONCE_NOT_FOUND"},VAULT_MANAGER_DELETE_PAYMENT_METHOD_UNKNOWN_ERROR:{type:t.types.UNKNOWN,code:"VAULT_MANAGER_DELETE_PAYMENT_METHOD_UNKNOWN_ERROR"}}},{"../lib/braintree-error":124}],211:[function(e,d,m){"use strict";var t=e("../lib/basic-component-verification"),a=e("../lib/create-deferred-client"),n=e("../lib/create-assets-url"),r=e("./vault-manager"),i="3.102.0",l=e("@braintree/wrap-promise");function o(u){var p="Vault Manager";return t.verify({name:p,client:u.client,authorization:u.authorization}).then(function(){return new r({createPromise:a.create({authorization:u.authorization,client:u.client,debug:u.debug,assetsUrl:n.create(u.authorization),name:p})})})}d.exports={create:l(o),VERSION:i}},{"../lib/basic-component-verification":122,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./vault-manager":212,"@braintree/wrap-promise":43}],212:[function(e,d,m){"use strict";var t=e("../lib/analytics"),a=e("../lib/braintree-error"),n=e("./errors"),r=e("../lib/convert-methods-to-error"),i=e("../lib/methods"),l=e("@braintree/wrap-promise"),o="mutation DeletePaymentMethodFromSingleUseToken($input: DeletePaymentMethodFromSingleUseTokenInput!) {  deletePaymentMethodFromSingleUseToken(input: $input) {    clientMutationId  }}";function u(E){this._createPromise=E.createPromise}u.prototype.fetchPaymentMethods=function(E){var v;return E=E||{},v=E.defaultFirst===!0?1:0,this._createPromise.then(function(A){return A.request({endpoint:"payment_methods",method:"get",data:{defaultFirst:v}})}).then(function(A){return t.sendEvent(this._createPromise,"vault-manager.fetch-payment-methods.succeeded"),A.paymentMethods.map(p)}.bind(this))},u.prototype.deletePaymentMethod=function(E){return this._createPromise.then(function(v){var A=v.getConfiguration().authorizationType==="CLIENT_TOKEN";return A?v.request({api:"graphQLApi",data:{query:o,variables:{input:{singleUseTokenId:E}},operationName:"DeletePaymentMethodFromSingleUseToken"}}).then(function(){t.sendEvent(v,"vault-manager.delete-payment-method.succeeded")}).catch(function(g){var s=g.details.originalError,c;return t.sendEvent(v,"vault-manager.delete-payment-method.failed"),s[0]&&s[0].extensions.errorClass==="NOT_FOUND"&&(c=new a({type:n.VAULT_MANAGER_PAYMENT_METHOD_NONCE_NOT_FOUND.type,code:n.VAULT_MANAGER_PAYMENT_METHOD_NONCE_NOT_FOUND.code,message:"A payment method for payment method nonce `"+E+"` could not be found.",details:{originalError:s}})),c||(c=new a({type:n.VAULT_MANAGER_DELETE_PAYMENT_METHOD_UNKNOWN_ERROR.type,code:n.VAULT_MANAGER_DELETE_PAYMENT_METHOD_UNKNOWN_ERROR.code,message:"An unknown error occured when attempting to delete the payment method assocaited with the payment method nonce `"+E+"`.",details:{originalError:s}})),Promise.reject(c)}):Promise.reject(new a(n.VAULT_MANAGER_DELETE_PAYMENT_METHOD_NONCE_REQUIRES_CLIENT_TOKEN))})};function p(E){var v={nonce:E.nonce,default:E.default,details:E.details,hasSubscription:E.hasSubscription,type:E.type};return E.description&&(v.description=E.description),E.binData&&(v.binData=E.binData),v}u.prototype.teardown=function(){return r(this,i(u.prototype)),Promise.resolve()},d.exports=l.wrapPrototype(u)},{"../lib/analytics":119,"../lib/braintree-error":124,"../lib/convert-methods-to-error":127,"../lib/methods":155,"./errors":210,"@braintree/wrap-promise":43}],213:[function(e,d,m){"use strict";var t=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},a=t(e("./venmo-desktop"));d.exports=function(r){var i=new a.default(r);return i.initialize()}},{"./venmo-desktop":215}],214:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.VENMO_PAYMENT_CONTEXT_STATUS_QUERY=m.LEGACY_VENMO_PAYMENT_CONTEXT_STATUS_QUERY=m.UPDATE_PAYMENT_CONTEXT_QUERY=m.LEGACY_UPDATE_PAYMENT_CONTEXT_QUERY=m.CREATE_PAYMENT_CONTEXT_QUERY=m.LEGACY_CREATE_PAYMENT_CONTEXT_QUERY=void 0,m.LEGACY_CREATE_PAYMENT_CONTEXT_QUERY=`mutation CreateVenmoQRCodePaymentContext($input: CreateVenmoQRCodePaymentContextInput!) {
  createVenmoQRCodePaymentContext(input: $input) {
    clientMutationId
    venmoQRCodePaymentContext {
      id
      merchantId
      createdAt
      expiresAt
    }
  }
}`,m.CREATE_PAYMENT_CONTEXT_QUERY=`mutation CreateVenmoPaymentContext($input: CreateVenmoPaymentContextInput!) {
  createVenmoPaymentContext(input: $input) {
    clientMutationId
    venmoPaymentContext {
      id
      merchantId
      createdAt
      expiresAt
    }
  }
}`,m.LEGACY_UPDATE_PAYMENT_CONTEXT_QUERY=`mutation UpdateVenmoQRCodePaymentContext($input: UpdateVenmoQRCodePaymentContextInput!) {
  updateVenmoQRCodePaymentContext(input: $input) {
    clientMutationId
  }
}`,m.UPDATE_PAYMENT_CONTEXT_QUERY=`mutation UpdateVenmoPaymentContextStatus($input: UpdateVenmoPaymentContextStatusInput!) {
  updateVenmoPaymentContextStatus(input: $input) {
    clientMutationId
  }
}`,m.LEGACY_VENMO_PAYMENT_CONTEXT_STATUS_QUERY=`query PaymentContext($id: ID!) {
  node(id: $id) {
    ... on VenmoQRCodePaymentContext {
      status
      paymentMethodId
      userName
    }
  }
}`,m.VENMO_PAYMENT_CONTEXT_STATUS_QUERY=`query PaymentContext($id: ID!) {
  node(id: $id) {
    ... on VenmoPaymentContext {
      status
      paymentMethodId
      userName
      payerInfo {
        firstName
        lastName
        phoneNumber
        email
        externalId
        userName
        billingAddress {
          fullName
          addressLine1
          addressLine2
          adminArea1
          adminArea2
          postalCode
          countryCode
        }
        shippingAddress {
          fullName
          addressLine1
          addressLine2
          adminArea1
          adminArea2
          postalCode
          countryCode
        }
      }
    }
  }
}`},{}],215:[function(e,d,m){"use strict";var t=this&&this.__assign||function(){return t=Object.assign||function(v){for(var A,g=1,s=arguments.length;g<s;g++){A=arguments[g];for(var c in A)Object.prototype.hasOwnProperty.call(A,c)&&(v[c]=A[c])}return v},t.apply(this,arguments)},a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(m,"__esModule",{value:!0});var n=a(e("framebus")),r=a(e("@braintree/iframer")),i=a(e("@braintree/uuid")),l=e("../shared/events"),o=e("./queries"),u=1e3,p=2e3,E=function(){function v(A){this.isHidden=!0,this.env=A.environment,this.id=i.default(),this.profileId=A.profileId,this.displayName=A.displayName,this.paymentMethodUsage=A.paymentMethodUsage,this.shouldUseLegacyQRCodeMutation=!this.paymentMethodUsage;var g=A.url+"#"+this.env+"_"+this.id;this.bus=new n.default({channel:this.id,verifyDomain:A.verifyDomain,targetFrames:[]}),this.apiRequest=A.apiRequest,this.sendEvent=A.sendEvent,this.Promise=A.Promise,this.alertBox=document.createElement("div"),this.alertBox.setAttribute("data-venmo-desktop-id",this.id),this.alertBox.setAttribute("role","alert"),this.alertBox.style.position="fixed",this.alertBox.style.display="none",this.alertBox.style.height="1px",this.alertBox.style.width="1px",this.alertBox.style.overflow="hidden",this.alertBox.style.zIndex="0",this.iframe=r.default({src:g,name:"venmo-desktop-iframe",style:{display:"none",position:"fixed",top:"0",bottom:"0",right:"0",left:"0",height:"100%",width:"100%",zIndex:"9999999"},title:"Venmo Desktop"}),this.bus.addTargetFrame(this.iframe)}return v.prototype.initialize=function(){var A=this;return new this.Promise(function(g){A.bus.on(l.VENMO_DESKTOP_IFRAME_READY,function(){g(A)}),A.bus.on(l.VENMO_DESKTOP_REQUEST_NEW_QR_CODE,function(){A.sendEvent("venmo.tokenize.desktop.restarted-from-error-view"),A.startPolling()}),document.body.appendChild(A.iframe),document.body.appendChild(A.alertBox)})},v.prototype.launchDesktopFlow=function(){var A=this;this.isHidden=!1;var g=new this.Promise(function(s,c){A.launchDesktopPromiseRejectFunction=c;var y=function(){A.bus.off(l.VENMO_DESKTOP_CUSTOMER_CANCELED,T),A.bus.off(l.VENMO_DESKTOP_UNKNOWN_ERROR,h)},h=function(O){y(),A.sendEvent("venmo.tokenize.desktop.unknown-error"),c({allowUIToHandleError:!1,reason:"UNKNOWN_ERROR",err:O})},T=function(){y(),A.updateVenmoDesktopPaymentContext("CANCELED"),A.sendEvent("venmo.tokenize.desktop.status-change.canceled-from-modal"),c({allowUIToHandleError:!1,reason:"CUSTOMER_CANCELED"})};A.completedHandler=function(O){y(),s(O)},A.bus.on(l.VENMO_DESKTOP_CUSTOMER_CANCELED,T),A.bus.on(l.VENMO_DESKTOP_UNKNOWN_ERROR,h)});return this.iframe.style.display="block",this.setAlert("Generating a QR code, get your Venmo app ready"),this.iframe.focus(),this.startPolling(),g.then(function(s){return delete A.venmoContextId,delete A.launchDesktopPromiseRejectFunction,s}).catch(function(s){return delete A.venmoContextId,delete A.launchDesktopPromiseRejectFunction,A.Promise.reject(s)})},v.prototype.triggerCompleted=function(A){var g=this;this.isHidden||setTimeout(function(){g.completedHandler&&g.completedHandler(A),delete g.completedHandler},p)},v.prototype.triggerRejected=function(A){this.launchDesktopPromiseRejectFunction&&this.launchDesktopPromiseRejectFunction(A)},v.prototype.hideDesktopFlow=function(){this.setAlert(""),this.iframe.style.display="none",this.bus.emit(l.VENMO_DESKTOP_CLOSED_FROM_PARENT),this.isHidden=!0},v.prototype.displayError=function(A){this.isHidden||(this.bus.emit(l.VENMO_DESKTOP_DISPLAY_ERROR,{message:A}),this.setAlert(A))},v.prototype.displayQRCode=function(A,g){this.isHidden||(this.bus.emit(l.VENMO_DESKTOP_DISPLAY_QR_CODE,{id:A,merchantId:g}),this.setAlert("To scan the QR code, open your Venmo app"))},v.prototype.authorize=function(){this.isHidden||(this.bus.emit(l.VENMO_DESKTOP_AUTHORIZE),this.setAlert("Venmo account authorized"))},v.prototype.authorizing=function(){this.isHidden||(this.bus.emit(l.VENMO_DESKTOP_AUTHORIZING),this.setAlert("Authorize on your Venmo app"))},v.prototype.startPolling=function(){var A=this;return this.createVenmoDesktopPaymentContext().then(function(g){var s=new Date(g.expiresAt).getTime()-new Date(g.createdAt).getTime(),c=Date.now()+s;return A.displayQRCode(g.id,g.merchantId),A.pollForStatusChange(g.status,c)}).then(function(g){if(g){var s=g.userName||"";s="@"+s.replace("@",""),A.triggerCompleted({paymentMethodNonce:g.paymentMethodId,username:s,payerInfo:g.payerInfo,id:A.venmoContextId||""})}}).catch(function(g){g.allowUIToHandleError||(A.sendEvent("venmo.tokenize.desktop.unhandled-error"),A.triggerRejected(g))})},v.prototype.pollForStatusChange=function(A,g){var s=this;return this.venmoContextId?Date.now()>g?this.updateVenmoDesktopPaymentContext("EXPIRED").then(function(){return s.displayError("Something went wrong"),s.sendEvent("venmo.tokenize.desktop.status-change.sdk-timeout"),s.Promise.reject({allowUIToHandleError:!0,reason:"TIMEOUT"})}):this.lookupVenmoDesktopPaymentContext().then(function(c){if(!s.venmoContextId||!c)return s.Promise.resolve();var y=c.status;if(y!==A)switch(A=y,s.sendEvent("venmo.tokenize.desktop.status-change."+A.toLowerCase()),A){case"CREATED":break;case"EXPIRED":case"FAILED":case"CANCELED":var h=A==="CANCELED"?"The authorization was canceled":"Something went wrong";return s.displayError(h),s.Promise.reject({allowUIToHandleError:!0,reason:A});case"SCANNED":s.authorizing();break;case"APPROVED":return s.authorize(),s.Promise.resolve(c);default:}return new s.Promise(function(T,O){setTimeout(function(){s.pollForStatusChange(A,g).then(T).catch(O)},u)})}):this.Promise.resolve()},v.prototype.teardown=function(){this.bus.teardown(),this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe),this.alertBox.parentNode&&this.alertBox.parentNode.removeChild(this.alertBox)},v.prototype.setAlert=function(A){this.alertBox.style.display=A?"block":"none",this.alertBox.textContent=A},v.prototype.createPaymentContextFromGraphqlLegacyQRCodeMutation=function(A){return this.apiRequest(o.LEGACY_CREATE_PAYMENT_CONTEXT_QUERY,{input:{environment:this.env,intent:A}}).then(function(g){return g.createVenmoQRCodePaymentContext.venmoQRCodePaymentContext})},v.prototype.createPaymentContextFromGraphQL=function(A){var g={intent:A,paymentMethodUsage:this.paymentMethodUsage,customerClient:"DESKTOP"};return this.profileId&&(g.merchantProfileId=this.profileId),this.displayName&&(g.displayName=this.displayName),this.apiRequest(o.CREATE_PAYMENT_CONTEXT_QUERY,{input:g}).then(function(s){return s.createVenmoPaymentContext.venmoPaymentContext})},v.prototype.createVenmoDesktopPaymentContext=function(){var A=this,g=this.shouldUseLegacyQRCodeMutation?this.createPaymentContextFromGraphqlLegacyQRCodeMutation("PAY_FROM_APP"):this.createPaymentContextFromGraphQL("PAY_FROM_APP");return g.then(function(s){A.venmoContextId=s.id;var c=A.profileId||s.merchantId;return{id:s.id,status:s.status,merchantId:c,createdAt:s.createdAt,expiresAt:s.expiresAt}})},v.prototype.updateVenmoDesktopPaymentContext=function(A,g){if(g===void 0&&(g={}),!this.venmoContextId)return this.Promise.resolve();var s={input:t({id:this.venmoContextId,status:A},g)},c=this.shouldUseLegacyQRCodeMutation?o.LEGACY_UPDATE_PAYMENT_CONTEXT_QUERY:o.UPDATE_PAYMENT_CONTEXT_QUERY;return this.apiRequest(c,s).then(function(){})},v.prototype.lookupVenmoDesktopPaymentContext=function(){if(!this.venmoContextId)return this.Promise.resolve();var A=this.shouldUseLegacyQRCodeMutation?o.LEGACY_VENMO_PAYMENT_CONTEXT_STATUS_QUERY:o.VENMO_PAYMENT_CONTEXT_STATUS_QUERY;return this.apiRequest(A,{id:this.venmoContextId}).then(function(g){return g.node})},v}();m.default=E},{"../shared/events":220,"./queries":214,"@braintree/iframer":35,"@braintree/uuid":39,framebus:52}],216:[function(e,d,m){"use strict";var t=e("../lib/analytics"),a=e("../lib/basic-component-verification"),n=e("../lib/create-deferred-client"),r=e("../lib/create-assets-url"),i=e("./shared/errors"),l=e("@braintree/wrap-promise"),o=e("../lib/braintree-error"),u=e("./venmo"),p=e("./shared/supports-venmo"),E="3.102.0";function v(g){var s="Venmo";return a.verify({name:s,client:g.client,authorization:g.authorization}).then(function(){var c,y;return g.profileId&&typeof g.profileId!="string"?Promise.reject(new o(i.VENMO_INVALID_PROFILE_ID)):g.deepLinkReturnUrl&&typeof g.deepLinkReturnUrl!="string"?Promise.reject(new o(i.VENMO_INVALID_DEEP_LINK_RETURN_URL)):(c=n.create({authorization:g.authorization,client:g.client,debug:g.debug,assetsUrl:r.create(g.authorization),name:s}).then(function(h){var T=h.getConfiguration();return g.client=h,T.gatewayConfiguration.payWithVenmo?h:Promise.reject(new o(i.VENMO_NOT_ENABLED))}),g.createPromise=c,y=new u(g),t.sendEvent(c,"venmo.initialized"),c.then(function(){return y}))})}function A(g){return p.isBrowserSupported(g)}d.exports={create:l(v),isBrowserSupported:A,VERSION:E}},{"../lib/analytics":119,"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./shared/errors":219,"./shared/supports-venmo":222,"./venmo":224,"@braintree/wrap-promise":43}],217:[function(e,d,m){"use strict";var t=e("@braintree/browser-detection/is-android"),a=e("@braintree/browser-detection/is-chrome"),n=e("@braintree/browser-detection/is-ios"),r=e("@braintree/browser-detection/is-ios-safari"),i=e("@braintree/browser-detection/is-ios-webview"),l=e("@braintree/browser-detection/is-samsung");function o(){return t()&&window.navigator.userAgent.toLowerCase().indexOf("wv")>-1}function u(){return n()?i()||!r():!1}function p(){var v=window.navigator.userAgent.toLowerCase();return v.indexOf("huawei")>-1&&v.indexOf("fban")>-1?!0:t()?v.indexOf("fb_iab")>-1||v.indexOf("instagram")>-1:!1}function E(){return n()&&a()}d.exports={isAndroid:t,isAndroidWebview:o,isChrome:a,isIos:n,isIosChrome:E,isSamsung:l,isIosSafari:r,isIosWebview:i,isFacebookOwnedBrowserOnAndroid:p,doesNotSupportWindowOpenInIos:u}},{"@braintree/browser-detection/is-android":22,"@braintree/browser-detection/is-chrome":24,"@braintree/browser-detection/is-ios":30,"@braintree/browser-detection/is-ios-safari":27,"@braintree/browser-detection/is-ios-webview":28,"@braintree/browser-detection/is-samsung":31}],218:[function(e,d,m){"use strict";d.exports={DOCUMENT_VISIBILITY_CHANGE_EVENT_DELAY:500,DEFAULT_PROCESS_RESULTS_DELAY:1e3,VENMO_APP_OR_MOBILE_AUTH_URL:"https://venmo.com/go/checkout",VENMO_MOBILE_APP_AUTH_ONLY_URL:"https://venmo.com/braintree/checkout",VENMO_WEB_LOGIN_URL:"https://account.venmo.com/go/web"}},{}],219:[function(e,d,m){"use strict";var t=e("../../lib/braintree-error");d.exports={VENMO_NOT_ENABLED:{type:t.types.MERCHANT,code:"VENMO_NOT_ENABLED",message:"Venmo is not enabled for this merchant."},VENMO_TOKENIZATION_REQUEST_ACTIVE:{type:t.types.MERCHANT,code:"VENMO_TOKENIZATION_REQUEST_ACTIVE",message:"Another tokenization request is active."},VENMO_TOKENIZATION_REQUEST_NOT_ACTIVE:{type:t.types.MERCHANT,code:"VENMO_TOKENIZATION_REQUEST_NOT_ACTIVE",message:"No tokenization in progress."},VENMO_APP_FAILED:{type:t.types.UNKNOWN,code:"VENMO_APP_FAILED",message:"Venmo app encountered a problem."},VENMO_APP_CANCELED:{type:t.types.CUSTOMER,code:"VENMO_APP_CANCELED",message:"Venmo app authorization was canceled."},VENMO_CANCELED:{type:t.types.CUSTOMER,code:"VENMO_CANCELED",message:"User canceled Venmo authorization, or Venmo app is not available."},VENMO_CUSTOMER_CANCELED:{type:t.types.CUSTOMER,code:"VENMO_CUSTOMER_CANCELED",message:"User canceled Venmo authorization."},VENMO_NETWORK_ERROR:{type:t.types.NETWORK,code:"VENMO_NETWORK_ERROR",message:"Something went wrong making the request"},VENMO_DESKTOP_CANCELED:{type:t.types.CUSTOMER,code:"VENMO_DESKTOP_CANCELED",message:"User canceled Venmo authorization by closing the Venmo Desktop modal."},VENMO_TOKENIZATION_CANCELED_BY_MERCHANT:{type:t.types.MERCHANT,code:"VENMO_TOKENIZATION_CANCELED_BY_MERCHANT",message:"The Venmo tokenization was canceled by the merchant."},VENMO_DESKTOP_UNKNOWN_ERROR:{type:t.types.UNKNOWN,code:"VENMO_DESKTOP_UNKNOWN_ERROR",message:"Something went wrong with the Venmo Desktop flow."},VENMO_MOBILE_PAYMENT_CONTEXT_SETUP_FAILED:{type:t.types.NETWORK,code:"VENMO_MOBILE_PAYMENT_CONTEXT_SETUP_FAILED",message:"Something went wrong creating the Venmo Payment Context."},VENMO_MOBILE_POLLING_TOKENIZATION_NETWORK_ERROR:{type:t.types.UNKNOWN,code:"VENMO_MOBILE_POLLING_TOKENIZATION_NETWORK_ERROR",message:"Something went wrong during mobile polling."},VENMO_MOBILE_POLLING_TOKENIZATION_EXPIRED:{type:t.types.CUSTOMER,code:"VENMO_MOBILE_POLLING_TOKENIZATION_EXPIRED",message:"The Venmo authorization request is expired."},VENMO_MOBILE_POLLING_TOKENIZATION_CANCELED:{type:t.types.CUSTOMER,code:"VENMO_MOBILE_POLLING_TOKENIZATION_CANCELED",message:"The Venmo authorization was canceled"},VENMO_MOBILE_POLLING_TOKENIZATION_TIMEOUT:{type:t.types.CUSTOMER,code:"VENMO_MOBILE_POLLING_TOKENIZATION_TIMEOUT",message:"Customer took too long to authorize Venmo payment."},VENMO_MOBILE_POLLING_TOKENIZATION_FAILED:{type:t.types.UNKNOWN,code:"VENMO_MOBILE_POLLING_TOKENIZATION_FAILED",message:"The Venmo authorization failed."},VENMO_INVALID_PROFILE_ID:{type:t.types.MERCHANT,code:"VENMO_INVALID_PROFILE_ID",message:"Venmo profile ID is invalid."},VENMO_INVALID_DEEP_LINK_RETURN_URL:{type:t.types.MERCHANT,code:"VENMO_INVALID_DEEP_LINK_RETURN_URL",message:"Venmo deep link return URL is invalid."},VENMO_TOKENIZATION_FAILED:{type:t.types.UNKNOWN,code:"VENMO_TOKENIZATION_FAILED",message:"Venmo encountered a problem"},VENMO_ECD_DISABLED:{type:t.types.MERCHANT,code:"ECD_DISABLED",message:"Cannot collect customer data when ECD is disabled. Enable this feature in the Control Panel to collect this data."}}},{"../../lib/braintree-error":124}],220:[function(e,d,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.VENMO_DESKTOP_UNKNOWN_ERROR=m.VENMO_DESKTOP_REQUEST_NEW_QR_CODE=m.VENMO_DESKTOP_CLOSED_FROM_PARENT=m.VENMO_DESKTOP_IFRAME_READY=m.VENMO_DESKTOP_DISPLAY_QR_CODE=m.VENMO_DESKTOP_DISPLAY_ERROR=m.VENMO_DESKTOP_CUSTOMER_CANCELED=m.VENMO_DESKTOP_AUTHORIZING=m.VENMO_DESKTOP_AUTHORIZE=m.VENMO_DESKTOP_AUTHORIZATION_TIMED_OUT=void 0,m.VENMO_DESKTOP_AUTHORIZATION_TIMED_OUT="VENMO_DESKTOP_AUTHORIZATION_TIMED_OUT",m.VENMO_DESKTOP_AUTHORIZE="VENMO_DESKTOP_AUTHORIZE",m.VENMO_DESKTOP_AUTHORIZING="VENMO_DESKTOP_AUTHORIZING",m.VENMO_DESKTOP_CUSTOMER_CANCELED="VENMO_DESKTOP_CUSTOMER_CANCELED",m.VENMO_DESKTOP_DISPLAY_ERROR="VENMO_DESKTOP_DISPLAY_ERROR",m.VENMO_DESKTOP_DISPLAY_QR_CODE="VENMO_DESKTOP_DISPLAY_QR_CODE",m.VENMO_DESKTOP_IFRAME_READY="VENMO_DESKTOP_IFRAME_READY",m.VENMO_DESKTOP_CLOSED_FROM_PARENT="VENMO_DESKTOP_CLOSED_FROM_PARENT",m.VENMO_DESKTOP_REQUEST_NEW_QR_CODE="VENMO_DESKTOP_REQUEST_NEW_QR_CODE",m.VENMO_DESKTOP_UNKNOWN_ERROR="VENMO_DESKTOP_UNKNOWN_ERROR"},{}],221:[function(e,d,m){"use strict";var t=e("./constants");function a(n){return n.useAllowDesktopWebLogin?t.VENMO_WEB_LOGIN_URL:n.mobileWebFallBack?t.VENMO_APP_OR_MOBILE_AUTH_URL:t.VENMO_MOBILE_APP_AUTH_ONLY_URL}d.exports=a},{"./constants":218}],222:[function(e,d,m){"use strict";var t=e("./browser-detection"),a=e("../../lib/in-iframe");function n(r){var i,l,o,u,p,E=t.isAndroid(),v=E||t.isIos(),A=E&&t.isChrome(),g=t.isIosSafari()||A;return r=r||{},l=(r.allowDesktopWebLogin||r.allowDesktop)===!0,u=r.hasOwnProperty("allowNewBrowserTab")?r.allowNewBrowserTab:!0,p=r.hasOwnProperty("allowWebviews")?r.allowWebviews:!0,o=u&&!a(),i=!o&&t.isIosChrome()||t.isFacebookOwnedBrowserOnAndroid()||t.isSamsung(),i||!p&&(t.isAndroidWebview()||t.isIosWebview())?!1:v?u?v:g:l}d.exports={isBrowserSupported:n}},{"../../lib/in-iframe":150,"./browser-detection":217}],223:[function(e,d,m){"use strict";var t=e("../../lib/frame-service/external"),a=e("../../lib/use-min"),n=e("@braintree/extended-promise"),r=e("../shared/errors"),i=e("../../lib/braintree-error"),l="3.102.0",o=`<svg width="198" height="58" viewBox="0 0 198 58" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M43.0702 13.6572C44.1935 15.4585 44.6999 17.3139 44.6999 19.6576C44.6999 27.1328 38.1277 36.8436 32.7935 43.6625H20.6099L15.7236 15.2939L26.3917 14.3105L28.9751 34.4966C31.389 30.6783 34.3678 24.6779 34.3678 20.587C34.3678 18.3477 33.9727 16.8225 33.3553 15.5666L43.0702 13.6572Z" fill="white"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M56.8965 26.1491C58.8596 26.1491 63.8018 25.2772 63.8018 22.5499C63.8018 21.2402 62.8481 20.587 61.7242 20.587C59.7579 20.587 57.1776 22.8763 56.8965 26.1491ZM56.6715 31.5506C56.6715 34.8807 58.5787 36.1873 61.107 36.1873C63.8603 36.1873 66.4966 35.534 69.923 33.8433L68.6324 42.3523C66.2183 43.4976 62.4559 44.2617 58.8039 44.2617C49.5403 44.2617 46.2249 38.8071 46.2249 31.9879C46.2249 23.1496 51.6179 13.765 62.7365 13.765C68.858 13.765 72.2809 17.0949 72.2809 21.7317C72.2815 29.2066 62.4005 31.4965 56.6715 31.5506Z" fill="white"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M103.067 20.3142C103.067 21.4052 102.897 22.9875 102.727 24.0216L99.5262 43.6622H89.1385L92.0585 25.658C92.1139 25.1696 92.284 24.1865 92.284 23.6411C92.284 22.3314 91.4414 22.0047 90.4282 22.0047C89.0826 22.0047 87.7337 22.6042 86.8354 23.0418L83.5234 43.6625H73.0772L77.8495 14.257H86.8908L87.0052 16.6041C89.1382 15.2404 91.9469 13.7656 95.932 13.7656C101.212 13.765 103.067 16.3845 103.067 20.3142Z" fill="white"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M133.906 16.9841C136.881 14.9131 139.69 13.765 143.563 13.765C148.897 13.765 150.753 16.3845 150.753 20.3142C150.753 21.4052 150.583 22.9875 150.413 24.0216L147.216 43.6622H136.825L139.801 25.2774C139.855 24.786 139.971 24.1865 139.971 23.8063C139.971 22.3317 139.128 22.0047 138.115 22.0047C136.824 22.0047 135.535 22.5501 134.577 23.0418L131.266 43.6625H120.878L123.854 25.2777C123.908 24.7863 124.02 24.1868 124.02 23.8065C124.02 22.332 123.177 22.0049 122.167 22.0049C120.819 22.0049 119.473 22.6045 118.574 23.0421L115.26 43.6628H104.817L109.589 14.2573H118.52L118.8 16.7122C120.878 15.241 123.684 13.7662 127.446 13.7662C130.704 13.765 132.837 15.129 133.906 16.9841Z" fill="white"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M171.426 25.5502C171.426 23.1496 170.808 21.513 168.956 21.513C164.857 21.513 164.015 28.55 164.015 32.1498C164.015 34.8807 164.802 36.5709 166.653 36.5709C170.528 36.5709 171.426 29.1497 171.426 25.5502ZM153.458 31.7152C153.458 22.442 158.511 13.765 170.136 13.765C178.896 13.765 182.098 18.7854 182.098 25.7148C182.098 34.8805 177.099 44.3723 165.194 44.3723C156.378 44.3723 153.458 38.7525 153.458 31.7152Z" fill="white"/>
</svg>`,u="Tap cancel payment to cancel and return to the business. Continue payment will relaunch the payment window.",p=400,E=570,v={backdrop:"venmo-desktop-web-backdrop",backdropHidden:"venmo-desktop-web-backdrop.hidden",backdropContainer:"venmo-backdrop-container",cancelButton:"venmo-popup-cancel-button",continueButton:"venmo-popup-continue-button",message:"venmo-message",instructions:"venmo-instructions",venmoLogo:"venmo-full-logo"};n.suppressUnhandledPromiseMessage=!0;function A(O){var _=O.frameServiceInstance,I=O.venmoUrl,f=O.checkForStatusChange,N=O.cancelTokenization,P=O.checkPaymentContextStatus,b=new n;return document.getElementById(v.continueButton).addEventListener("click",function(){_.focus()}),document.getElementById(v.cancelButton).addEventListener("click",function(){_.close(),N(),s()}),_.open({},function(D){var M=1;D?b.reject(D):f(M).then(function(L){b.resolve(L)}).catch(function(L){P().then(function(C){C.status==="CREATED"?b.reject(new i(r.VENMO_CUSTOMER_CANCELED)):b.reject(L)})}),_.close(),s()}),_.redirect(I),b}function g(){var O=Math.round((window.outerHeight-E)/2)+window.screenTop,_=Math.round((window.outerWidth-p)/2)+window.screenLeft;return{top:O,left:_}}function s(){document.getElementById("venmo-desktop-web-backdrop").classList.add("hidden")}function c(){var O=["#"+v.backdropHidden+" {","display: none;","}","#"+v.backdrop+" {","z-index: 3141592632;","cursor: pointer;","position: fixed;","top: 0;","left: 0;","bottom: 0;","width: 100%;","background: rgba(0, 0, 0, 0.8);","}"],_=["#"+v.backdropContainer+" {","display: flex;","align-content: center;","justify-content: center;","align-items: center;","width: 100%;","height: 100%;","flex-direction: column;","}"],I=["#"+v.cancelButton+" {","height: 24px;","width: 380px;","font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;","font-style: normal;","font-weight: 700;","font-size: 18px;","line-height: 24px;","text-align: center;","background-color: transparent;","border: none;","color: #FFFFFF;","margin-top: 28px;","}"],f=["#"+v.continueButton+" {","width: 400px;","height: 50px;","background: #0074DE;","border-radius: 24px;","border: none;","font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;","font-style: normal;","font-weight: 700;","font-size: 18px;","color: #FFFFFF;","margin-top: 44px;","}"],N=["#"+v.message+" {","font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;","font-style: normal;","font-weight: 500;","font-size: 24px;","line-height: 32px;","text-align: center;","color: #FFFFFF;","margin-top: 32px;","}"],P=["#"+v.instructions+" {","font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;","font-style: normal;","font-weight: 400;","font-size: 16px;","line-height: 20px;","text-align: center;","color: #FFFFFF;","margin-top: 16px;","width: 400px;","}"],b=O.concat(_,I,f,N,P);return b.join(`
`)}function y(){var O=document.getElementById(v.backdrop),_,I,f,N,P,b,D,M;if(O){O.classList.remove("hidden");return}_=document.createElement("style"),I=document.createElement("div"),f=document.createElement("div"),N=document.createElement("div"),P=document.createElement("div"),b=document.createElement("div"),D=document.createElement("button"),M=document.createElement("button"),_.id="venmo-desktop-web__injected-styles",_.innerHTML=c(),I.id=v.backdrop,f.id=v.backdropContainer,N.id=v.venmoLogo,N.innerHTML=o,P.id=v.message,P.innerText="What would you like to do?",b.id=v.instructions,b.innerText=u,D.id=v.continueButton,D.innerText="Continue payment",M.id=v.cancelButton,M.innerText="Cancel payment",document.head.appendChild(_),f.appendChild(N),f.appendChild(P),f.appendChild(b),f.appendChild(D),f.appendChild(M),I.appendChild(f),document.body.appendChild(I),I.addEventListener("click",function(L){L.stopPropagation()})}function h(O){return y(),A(O)}function T(O){var _=new n,I="venmoDesktopWebLogin",f=O.assetsUrl,N=O.debug||!1,P=g(),b=f+"/web/"+l+"/html";return t.create({name:I,dispatchFrameUrl:b+"/dispatch-frame"+a(N)+".html",openFrameUrl:b+"/venmo-landing-frame"+a(N)+".html",top:P.top,left:P.left,height:E,width:p},function(D){_.resolve(D)}),_}d.exports={runWebLogin:h,openPopup:A,setupDesktopWebLogin:T,POPUP_WIDTH:p,POPUP_HEIGHT:E}},{"../../lib/braintree-error":124,"../../lib/frame-service/external":139,"../../lib/use-min":160,"../shared/errors":219,"@braintree/extended-promise":34}],224:[function(e,d,m){"use strict";var t=e("../lib/analytics"),a=e("./shared/supports-venmo"),n=e("./shared/browser-detection"),r=e("./shared/constants"),i=e("./shared/errors"),l=e("../lib/querystring"),o=e("../lib/is-verified-domain"),u=e("../lib/methods"),p=e("../lib/convert-methods-to-error"),E=e("@braintree/wrap-promise"),v=e("../lib/braintree-error"),A=e("../lib/in-iframe"),g=e("@braintree/extended-promise"),s=e("./shared/get-venmo-url"),c=e("./shared/web-login-backdrop"),y=e("../lib/snake-case-to-camel-case"),h=e("./external/"),T=e("./external/queries"),O="3.102.0",_=250,I=3e5;g.suppressUnhandledPromiseMessage=!0;function f(C){var R=this;this._allowDesktopWebLogin=C.allowDesktopWebLogin||!1,this._mobileWebFallBack=C.mobileWebFallBack||!1,this._createPromise=C.createPromise,this._allowNewBrowserTab=C.allowNewBrowserTab!==!1,this._allowWebviews=C.allowWebviews!==!1,this._allowDesktop=C.allowDesktop===!0,this._useRedirectForIOS=C.useRedirectForIOS===!0,this._profileId=C.profileId,this._displayName=C.displayName,this._deepLinkReturnUrl=C.deepLinkReturnUrl,this._ignoreHistoryChanges=C.ignoreHistoryChanges,this._paymentMethodUsage=(C.paymentMethodUsage||"").toUpperCase(),this._shouldUseLegacyFlow=!this._paymentMethodUsage,this._requireManualReturn=C.requireManualReturn===!0,this._useDesktopQRFlow=this._allowDesktop&&this._isDesktop()&&!this._allowDesktopWebLogin,this._useAllowDesktopWebLogin=this._allowDesktopWebLogin&&this._isDesktop(),this._cannotHaveReturnUrls=A()||this._requireManualReturn,this._allowAndroidRecreation=C.allowAndroidRecreation!==!1,this._maxRetryCount=3,this._collectCustomerBillingAddress=C.collectCustomerBillingAddress||!1,this._collectCustomerShippingAddress=C.collectCustomerShippingAddress||!1,this._isFinalAmount=C.isFinalAmount||!1,this._lineItems=C.lineItems,this._subTotalAmount=C.subTotalAmount,this._discountAmount=C.discountAmount,this._taxAmount=C.taxAmount,this._shippingAmount=C.shippingAmount,this._totalAmount=C.totalAmount,this._shouldCreateVenmoPaymentContext=this._cannotHaveReturnUrls||!this._shouldUseLegacyFlow,t.sendEvent(this._createPromise,"venmo.desktop-flow.configured."+String(!!this._allowDesktop)),this.hasTokenizationResult()?t.sendEvent(this._createPromise,"venmo.appswitch.return-in-new-tab"):this._useDesktopQRFlow?this._createPromise=this._createPromise.then(function(w){var B=w.getConfiguration().gatewayConfiguration;return h({url:B.assetsUrl+"/web/"+O+"/html/venmo-desktop-frame.html",environment:B.environment==="production"?"PRODUCTION":"SANDBOX",profileId:R._profileId||B.payWithVenmo.merchantId,paymentMethodUsage:R._paymentMethodUsage,displayName:R._displayName,Promise,apiRequest:function(H,K){return w.request({api:"graphQLApi",data:{query:H,variables:K}}).then(function(Y){return Y.data})},sendEvent:function(H){t.sendEvent(R._createPromise,H)},verifyDomain:o}).then(function(H){return R._venmoDesktopInstance=H,t.sendEvent(R._createPromise,"venmo.desktop-flow.presented"),w}).catch(function(){return t.sendEvent(R._createPromise,"venmo.desktop-flow.setup-failed"),R._useDesktopQRFlow=!1,w})}):this._shouldCreateVenmoPaymentContext&&(this._mobilePollingInterval=_,this._mobilePollingExpiresThreshold=I,this._createPromise=this._createPromise.then(function(w){var B,H,K=R._cannotHaveReturnUrls?"manual-return":"mobile-payment-context",Y=w.getConfiguration();return H=c.setupDesktopWebLogin({assetsUrl:Y.gatewayConfiguration.assetsUrl,debug:Y.isDebug}).then(function(G){R._frameServiceInstance=G}).catch(function(G){return G}),R._mobilePollingContextEnvironment=Y.gatewayConfiguration.environment.toUpperCase(),B=R._createVenmoPaymentContext(w).then(function(){return t.sendEvent(R._createPromise,"venmo."+K+".presented"),w}).catch(function(G){return t.sendEvent(R._createPromise,"venmo."+K+".setup-failed"),Promise.reject(new v({type:i.VENMO_MOBILE_PAYMENT_CONTEXT_SETUP_FAILED.type,code:i.VENMO_MOBILE_PAYMENT_CONTEXT_SETUP_FAILED.code,message:N(G)?G.details.originalError[0].message:i.VENMO_MOBILE_PAYMENT_CONTEXT_SETUP_FAILED.message,details:{originalError:G}}))}),g.all([H,B]).then(function(G){var U=G[1];return Promise.resolve(U)}).catch(function(G){return Promise.reject(G)})}))}function N(C){return C.details&&C.details.originalError&&C.details.originalError[0]&&C.details.originalError[0].extensions&&C.details.originalError[0].extensions.errorClass==="VALIDATION"&&C.details.originalError[0].extensions.errorType==="user_error"}f.prototype._createVenmoPaymentContext=function(C,R){var w=this,B,H,K=C.getConfiguration(),Y=K.gatewayConfiguration.payWithVenmo,G=!1,U=w._useAllowDesktopWebLogin?"NATIVE_WEB":"MOBILE_WEB";if(!this._shouldCreateVenmoPaymentContext)return Promise.resolve();if(this._shouldUseLegacyFlow)B=C.request({api:"graphQLApi",data:{query:T.LEGACY_CREATE_PAYMENT_CONTEXT_QUERY,variables:{input:{environment:this._mobilePollingContextEnvironment,intent:"PAY_FROM_APP"}}}}).then(function(k){return k.data.createVenmoQRCodePaymentContext.venmoQRCodePaymentContext});else{if((this._collectCustomerBillingAddress||this._collectCustomerShippingAddress)&&!Y.enrichedCustomerDataEnabled)return Promise.reject(new v(i.VENMO_ECD_DISABLED));this._lineItems&&this._lineItems.forEach(function(k){k.unitTaxAmount=k.unitTaxAmount||"0"}),H={subTotalAmount:this._subTotalAmount,discountAmount:this._discountAmount,taxAmount:this._taxAmount,shippingAmount:this._shippingAmount,totalAmount:this._totalAmount,lineItems:this._lineItems},G=Object.keys(H).some(function(k){return H[k]!==void 0}),B=C.request({api:"graphQLApi",data:{query:T.CREATE_PAYMENT_CONTEXT_QUERY,variables:{input:{paymentMethodUsage:this._paymentMethodUsage,intent:"CONTINUE",customerClient:U,isFinalAmount:this._isFinalAmount,displayName:this._displayName,paysheetDetails:{collectCustomerBillingAddress:this._collectCustomerBillingAddress,collectCustomerShippingAddress:this._collectCustomerShippingAddress,transactionDetails:G?H:void 0}}}}}).then(function(k){return k.data.createVenmoPaymentContext.venmoPaymentContext})}return B.then(function(k){var x=new Date(k.expiresAt)-new Date(k.createdAt),z=x*.6666;clearTimeout(w._refreshPaymentContextTimeout),w._refreshPaymentContextTimeout=setTimeout(function(){w._tokenizationInProgress||w._createVenmoPaymentContext(C,!0)},z),!(R&&w._tokenizationInProgress)&&(w._venmoPaymentContextStatus=k.status,w._venmoPaymentContextId=k.id)})},f.prototype.appSwitch=function(C){this._deepLinkReturnUrl?L()?(t.sendEvent(this._createPromise,"venmo.appswitch.start.ios-webview"),window.location.href=C):window.popupBridge&&typeof window.popupBridge.open=="function"?(t.sendEvent(this._createPromise,"venmo.appswitch.start.popup-bridge"),window.popupBridge.open(C)):(t.sendEvent(this._createPromise,"venmo.appswitch.start.webview"),window.open(C)):(t.sendEvent(this._createPromise,"venmo.appswitch.start.browser"),n.doesNotSupportWindowOpenInIos()||this._shouldUseRedirectStrategy()?window.location.href=C:window.open(C))},f.prototype.getUrl=function(){return this._createPromise.then(function(C){var R=C.getConfiguration(),w={},B=this._deepLinkReturnUrl||window.location.href.replace(window.location.hash,""),H=R.gatewayConfiguration.payWithVenmo,K=R.analyticsMetadata,Y=H.accessToken,G={_meta:{version:K.sdkVersion,integration:K.integration,platform:K.platform,sessionId:K.sessionId}};return this._isDebug=R.isDebug,this._assetsUrl=R.gatewayConfiguration.assetsUrl,B=B.replace(/#*$/,""),this._venmoPaymentContextId&&(this._shouldUseLegacyFlow?Y+="|pcid:"+this._venmoPaymentContextId:w.resource_id=this._venmoPaymentContextId),this._shouldIncludeReturnUrls()||this._useAllowDesktopWebLogin?(this._useAllowDesktopWebLogin&&(B=this._assetsUrl+"/web/"+O+"/html/redirect-frame.html"),w["x-success"]=B+"#venmoSuccess=1",w["x-cancel"]=B+"#venmoCancel=1",w["x-error"]=B+"#venmoError=1"):(w["x-success"]="NOOP",w["x-cancel"]="NOOP",w["x-error"]="NOOP"),this._allowAndroidRecreation?w.allowAndroidRecreation=1:w.allowAndroidRecreation=0,w.ua=window.navigator.userAgent,w.braintree_merchant_id=this._profileId||H.merchantId,w.braintree_access_token=Y,w.braintree_environment=H.environment,w.braintree_sdk_data=btoa(JSON.stringify(G)),s({useAllowDesktopWebLogin:this._useAllowDesktopWebLogin,mobileWebFallBack:this._mobileWebFallBack})+"?"+l.stringify(w)}.bind(this))},f.prototype.isBrowserSupported=function(){return a.isBrowserSupported({allowNewBrowserTab:this._allowNewBrowserTab,allowWebviews:this._allowWebviews,allowDesktop:this._allowDesktop,allowDesktopWebLogin:this._allowDesktopWebLogin})},f.prototype.hasTokenizationResult=function(){return this._hasTokenizationResult()},f.prototype._hasTokenizationResult=function(C){var R=P(C);return typeof(R.venmoSuccess||R.venmoError||R.venmoCancel)<"u"},f.prototype._shouldIncludeReturnUrls=function(){return this._deepLinkReturnUrl?!0:!this._cannotHaveReturnUrls},f.prototype._isDesktop=function(){return!(n.isIos()||n.isAndroid())},f.prototype.tokenize=function(C){var R=this,w;return C=C||{},this._tokenizationInProgress===!0?Promise.reject(new v(i.VENMO_TOKENIZATION_REQUEST_ACTIVE)):(this._tokenizationInProgress=!0,this._useDesktopQRFlow?w=this._tokenizeForDesktopQRFlow(C):this._useAllowDesktopWebLogin?w=this._tokenizeWebLoginWithRedirect():this._cannotHaveReturnUrls?w=this._tokenizeForMobileWithManualReturn():w=this._tokenizeForMobileWithHashChangeListeners(C),w.then(function(B){return R._createPromise.then(function(H){return R._createVenmoPaymentContext(H)}).then(function(){return R._tokenizationInProgress=!1,D(B)})}).catch(function(B){return R._createPromise.then(function(H){return R._createVenmoPaymentContext(H)}).then(function(){return R._tokenizationInProgress=!1,Promise.reject(B)})}))},f.prototype.cancelTokenization=function(){return this._tokenizationInProgress?(this._removeVisibilityEventListener(),this._tokenizePromise&&this._tokenizePromise.reject(new v(i.VENMO_TOKENIZATION_CANCELED_BY_MERCHANT)),Promise.all([this._cancelMobilePaymentContext(),this._cancelVenmoDesktopContext()])):Promise.reject(new v(i.VENMO_TOKENIZATION_REQUEST_NOT_ACTIVE))},f.prototype._tokenizeWebLoginWithRedirect=function(){var C=this;return t.sendEvent(C._createPromise,"venmo.tokenize.web-login.start"),this._tokenizePromise=new g,this.getUrl().then(function(R){return c.runWebLogin({checkForStatusChange:C._checkPaymentContextStatusAndProcessResult.bind(C),cancelTokenization:C.cancelTokenization.bind(C),frameServiceInstance:C._frameServiceInstance,venmoUrl:R,debug:C._isDebug,checkPaymentContextStatus:C._checkPaymentContextStatus.bind(C)}).then(function(w){t.sendEvent(C._createPromise,"venmo.tokenize.web-login.success"),C._tokenizePromise.resolve({paymentMethodNonce:w.paymentMethodId,username:w.userName,payerInfo:w.payerInfo,id:C._venmoPaymentContextId})}).catch(function(w){t.sendEvent(C._createPromise,"venmo.tokenize.web-login.failure"),C._tokenizePromise.reject(w)}),C._tokenizePromise})},f.prototype._queryPaymentContextStatus=function(C){var R=this;return this._createPromise.then(function(w){var B=R._shouldUseLegacyFlow?T.LEGACY_VENMO_PAYMENT_CONTEXT_STATUS_QUERY:T.VENMO_PAYMENT_CONTEXT_STATUS_QUERY;return w.request({api:"graphQLApi",data:{query:B,variables:{id:C}}})}).then(function(w){return w.data.node})},f.prototype._checkPaymentContextStatusAndProcessResult=function(C){var R=this;return R._checkPaymentContextStatus().then(function(w){var B=w.status;if(B!==R._venmoPaymentContextStatus)switch(R._venmoPaymentContextStatus=B,t.sendEvent(R._createPromise,"venmo.tokenize.web-login.status-change"),B){case"APPROVED":return Promise.resolve(w);case"CANCELED":return Promise.reject(new v(i.VENMO_CUSTOMER_CANCELED));case"FAILED":return Promise.reject(new v(i.VENMO_TOKENIZATION_FAILED));default:}return new Promise(function(H,K){return C<R._maxRetryCount?(C++,R._checkPaymentContextStatusAndProcessResult(C).then(H).catch(K)):K(new v(i.VENMO_TOKENIZATION_FAILED))})})},f.prototype._checkPaymentContextStatus=function(){var C=this;return C._queryPaymentContextStatus(C._venmoPaymentContextId).catch(function(R){return Promise.reject(new v({type:i.VENMO_NETWORK_ERROR.type,code:i.VENMO_NETWORK_ERROR.code,message:i.VENMO_NETWORK_ERROR.message,details:R}))}).then(function(R){return Promise.resolve(R)})},f.prototype._pollForStatusChange=function(){var C=this;return Date.now()>C._mobilePollingContextExpiresIn?Promise.reject(new v(i.VENMO_MOBILE_POLLING_TOKENIZATION_TIMEOUT)):this._queryPaymentContextStatus(this._venmoPaymentContextId).catch(function(R){return Promise.reject(new v({type:i.VENMO_MOBILE_POLLING_TOKENIZATION_NETWORK_ERROR.type,code:i.VENMO_MOBILE_POLLING_TOKENIZATION_NETWORK_ERROR.code,message:i.VENMO_MOBILE_POLLING_TOKENIZATION_NETWORK_ERROR.message,details:{originalError:R}}))}).then(function(R){var w=R.status;if(w!==C._venmoPaymentContextStatus)switch(C._venmoPaymentContextStatus=w,t.sendEvent(C._createPromise,"venmo.tokenize.manual-return.status-change."+w.toLowerCase()),w){case"EXPIRED":case"FAILED":case"CANCELED":return Promise.reject(new v(i["VENMO_MOBILE_POLLING_TOKENIZATION_"+w]));case"APPROVED":return Promise.resolve(R);case"CREATED":case"SCANNED":default:}return new Promise(function(B,H){setTimeout(function(){C._pollForStatusChange().then(B).catch(H)},C._mobilePollingInterval)})})},f.prototype._tokenizeForMobileWithManualReturn=function(){var C=this;return t.sendEvent(this._createPromise,"venmo.tokenize.manual-return.start"),this._mobilePollingContextExpiresIn=Date.now()+this._mobilePollingExpiresThreshold,this._tokenizePromise=new g,this._pollForStatusChange().then(function(R){t.sendEvent(C._createPromise,"venmo.tokenize.manual-return.success"),C._tokenizePromise.resolve({paymentMethodNonce:R.paymentMethodId,username:R.userName,payerInfo:R.payerInfo,id:C._venmoPaymentContextId})}).catch(function(R){t.sendEvent(C._createPromise,"venmo.tokenize.manual-return.failure"),C._tokenizePromise.reject(R)}),this.getUrl().then(function(R){return C.appSwitch(R),C._tokenizePromise})},f.prototype._shouldUseRedirectStrategy=function(){return n.isIos()?this._mobileWebFallBack===!0?!0:this._useRedirectForIOS:!1},f.prototype._tokenizeForMobileWithHashChangeListeners=function(C){var R=this,w,B;if(this.hasTokenizationResult())return this.processHashChangeFlowResults();t.sendEvent(this._createPromise,"venmo.tokenize.mobile.start"),this._tokenizePromise=new g,this._previousHash=window.location.hash;function H(K){var Y;R.processHashChangeFlowResults(K).catch(function(G){Y=G}).then(function(G){!R._ignoreHistoryChanges&&window.location.hash!==R._previousHash&&(window.location.hash=R._previousHash),R._removeVisibilityEventListener(),Y?R._tokenizePromise.reject(Y):R._tokenizePromise.resolve(G),delete R._tokenizePromise})}return this._onHashChangeListener=function(K){var Y=K.newURL.split("#")[1];R._hasTokenizationResult(Y)&&(w=!0,clearTimeout(B),H(Y))},window.addEventListener("hashchange",this._onHashChangeListener,!1),this._visibilityChangeListener=function(){var K=C.processResultsDelay||r.DEFAULT_PROCESS_RESULTS_DELAY;window.document.hidden||w||(B=setTimeout(H,K))},this.getUrl().then(function(K){return R.appSwitch(K),setTimeout(function(){window.document.addEventListener(M(),R._visibilityChangeListener)},r.DOCUMENT_VISIBILITY_CHANGE_EVENT_DELAY),R._tokenizePromise})},f.prototype._tokenizeForDesktopQRFlow=function(){var C=this;return t.sendEvent(this._createPromise,"venmo.tokenize.desktop.start"),this._tokenizePromise=new g,this._createPromise.then(function(){return C._venmoDesktopInstance.launchDesktopFlow()}).then(function(R){C._venmoDesktopInstance.hideDesktopFlow(),t.sendEvent(C._createPromise,"venmo.tokenize.desktop.success"),C._tokenizePromise.resolve(R)}).catch(function(R){if(t.sendEvent(C._createPromise,"venmo.tokenize.desktop.failure"),C._venmoDesktopInstance&&C._venmoDesktopInstance.hideDesktopFlow(),R&&R.reason==="CUSTOMER_CANCELED"){C._tokenizePromise.reject(new v(i.VENMO_DESKTOP_CANCELED));return}C._tokenizePromise.reject(new v({type:i.VENMO_DESKTOP_UNKNOWN_ERROR.type,code:i.VENMO_DESKTOP_UNKNOWN_ERROR.code,message:i.VENMO_DESKTOP_UNKNOWN_ERROR.message,details:{originalError:R}}))}),this._tokenizePromise},f.prototype._cancelMobilePaymentContext=function(){var C=this;return this._createPromise.then(function(R){var w;return C._venmoPaymentContextId?(w=C._shouldUseLegacyFlow?T.LEGACY_UPDATE_PAYMENT_CONTEXT_QUERY:T.UPDATE_PAYMENT_CONTEXT_QUERY,R.request({api:"graphQLApi",data:{query:w,variables:{input:{id:C._venmoPaymentContextId,status:"CANCELED"}}}})):Promise.resolve()})},f.prototype._cancelVenmoDesktopContext=function(){var C=this;return this._createPromise.then(function(){return C._venmoDesktopInstance&&C._venmoDesktopInstance.updateVenmoDesktopPaymentContext("CANCELED"),Promise.resolve()})},f.prototype.teardown=function(){var C=this;return this._removeVisibilityEventListener(),this._createPromise.then(function(){C._venmoDesktopInstance&&C._venmoDesktopInstance.teardown(),clearTimeout(C._refreshPaymentContextTimeout),C._cancelMobilePaymentContext(),p(this,u(f.prototype))}.bind(this))},f.prototype._removeVisibilityEventListener=function(){window.removeEventListener("hashchange",this._onHashChangeListener),window.document.removeEventListener(M(),this._visibilityChangeListener),delete this._visibilityChangeListener,delete this._onHashChangeListener},f.prototype.processHashChangeFlowResults=function(C){var R=this,w=P(C);return new Promise(function(B,H){R._shouldUseLegacyFlow?w.venmoSuccess?(t.sendEvent(R._createPromise,"venmo.appswitch.handle.success"),B(w)):w.venmoError?(t.sendEvent(R._createPromise,"venmo.appswitch.handle.error"),H(new v({type:i.VENMO_APP_FAILED.type,code:i.VENMO_APP_FAILED.code,message:i.VENMO_APP_FAILED.message,details:{originalError:{message:decodeURIComponent(w.errorMessage),code:w.errorCode}}}))):w.venmoCancel?(t.sendEvent(R._createPromise,"venmo.appswitch.handle.cancel"),H(new v(i.VENMO_APP_CANCELED))):(t.sendEvent(R._createPromise,"venmo.appswitch.cancel-or-unavailable"),H(new v(i.VENMO_CANCELED))):R._pollForStatusChange().then(function(K){return t.sendEvent(R._createPromise,"venmo.appswitch.handle.payment-context-status-query.success"),B({paymentMethodNonce:K.paymentMethodId,username:K.userName,payerInfo:K.payerInfo,id:R._venmoPaymentContextId})}).catch(function(K){K.type===i.VENMO_MOBILE_POLLING_TOKENIZATION_CANCELED.type&&H(K),t.sendEvent(R._createPromise,"venmo.process-results.payment-context-status-query-failed"),B(w)}),R._clearFragmentParameters()})},f.prototype._clearFragmentParameters=function(){this._ignoreHistoryChanges||typeof window.history.replaceState=="function"&&window.location.hash&&history.pushState({},"",window.location.href.slice(0,window.location.href.indexOf("#")))};function P(C){var R=(C||window.location.hash.substring(1)).split("&"),w=R.reduce(function(B,H){var K=H.split("="),Y=decodeURIComponent(K[0]).replace(/\W/g,""),G=y(Y),U=decodeURIComponent(K[1]);return B[G]=U,B},{});return w.resourceId&&(w.id=w.resourceId),w}function b(C){return C=C||"","@"+C.replace("@","")}function D(C){var R={nonce:C.paymentMethodNonce,type:"VenmoAccount",details:{username:b(C.username),paymentContextId:C.id}};return C.payerInfo&&(R.details.payerInfo=C.payerInfo,R.details.payerInfo.userName=b(C.payerInfo.userName)),R}function M(){var C;return typeof window.document.hidden<"u"?C="visibilitychange":typeof window.document.msHidden<"u"?C="msvisibilitychange":typeof window.document.webkitHidden<"u"&&(C="webkitvisibilitychange"),C}function L(){return window.navigator.platform&&/iPhone|iPad|iPod/.test(window.navigator.platform)}d.exports=E.wrapPrototype(f)},{"../lib/analytics":119,"../lib/braintree-error":124,"../lib/convert-methods-to-error":127,"../lib/in-iframe":150,"../lib/is-verified-domain":153,"../lib/methods":155,"../lib/querystring":157,"../lib/snake-case-to-camel-case":159,"./external/":213,"./external/queries":214,"./shared/browser-detection":217,"./shared/constants":218,"./shared/errors":219,"./shared/get-venmo-url":221,"./shared/supports-venmo":222,"./shared/web-login-backdrop":223,"@braintree/extended-promise":34,"@braintree/wrap-promise":43}],225:[function(e,d,m){"use strict";var t=e("../lib/braintree-error");d.exports={VISA_CHECKOUT_NOT_ENABLED:{type:t.types.MERCHANT,code:"VISA_CHECKOUT_NOT_ENABLED",message:"Visa Checkout is not enabled for this merchant."},VISA_CHECKOUT_INIT_OPTIONS_REQUIRED:{type:t.types.MERCHANT,code:"VISA_CHECKOUT_INIT_OPTIONS_REQUIRED",message:"initOptions requires an object."},VISA_CHECKOUT_PAYMENT_REQUIRED:{type:t.types.MERCHANT,code:"VISA_CHECKOUT_PAYMENT_REQUIRED",message:"tokenize requires callid, encKey, and encPaymentData."},VISA_CHECKOUT_TOKENIZATION:{type:t.types.NETWORK,code:"VISA_CHECKOUT_TOKENIZATION",message:"A network error occurred when processing the Visa Checkout payment."}}},{"../lib/braintree-error":124}],226:[function(e,d,m){"use strict";var t=e("../lib/basic-component-verification"),a=e("../lib/braintree-error"),n=e("../lib/create-deferred-client"),r=e("../lib/create-assets-url"),i=e("./visa-checkout"),l=e("../lib/analytics"),o=e("./errors"),u="3.102.0",p=e("@braintree/wrap-promise");function E(v){var A="Visa Checkout";return t.verify({name:A,client:v.client,authorization:v.authorization}).then(function(){return n.create({authorization:v.authorization,client:v.client,debug:v.debug,assetsUrl:r.create(v.authorization),name:A})}).then(function(g){return v.client=g,v.client.getConfiguration().gatewayConfiguration.visaCheckout?(l.sendEvent(v.client,"visacheckout.initialized"),new i(v)):Promise.reject(new a(o.VISA_CHECKOUT_NOT_ENABLED))})}d.exports={create:p(E),VERSION:u}},{"../lib/analytics":119,"../lib/basic-component-verification":122,"../lib/braintree-error":124,"../lib/create-assets-url":129,"../lib/create-deferred-client":131,"./errors":225,"./visa-checkout":227,"@braintree/wrap-promise":43}],227:[function(e,d,m){"use strict";var t=e("../lib/braintree-error"),a=e("../lib/analytics"),n=e("./errors"),r=e("../lib/json-clone"),i=e("../lib/methods"),l=e("../lib/convert-methods-to-error"),o=e("@braintree/wrap-promise"),u={Visa:"VISA",MasterCard:"MASTERCARD",Discover:"DISCOVER","American Express":"AMEX"};function p(v){this._client=v.client}function E(v){return v.reduce(function(A,g){return u.hasOwnProperty(g)?A.concat(u[g]):A},[])}p.prototype.createInitOptions=function(v){var A,g=this._client.getConfiguration().gatewayConfiguration,s=g.visaCheckout;if(!v)throw new t(n.VISA_CHECKOUT_INIT_OPTIONS_REQUIRED);return A=r(v),A.apikey=A.apikey||s.apikey,A.encryptionKey=s.encryptionKey,A.externalClientId=A.externalClientId||s.externalClientId,A.settings=A.settings||{},A.settings.dataLevel="FULL",A.settings.payment=A.settings.payment||{},A.settings.payment.cardBrands||(A.settings.payment.cardBrands=E(g.visaCheckout.supportedCardTypes)),A},p.prototype.tokenize=function(v){var A=this;return!v.callid||!v.encKey||!v.encPaymentData?Promise.reject(new t(n.VISA_CHECKOUT_PAYMENT_REQUIRED)):this._client.request({method:"post",endpoint:"payment_methods/visa_checkout_cards",data:{_meta:{source:"visa-checkout"},visaCheckoutCard:{callId:v.callid,encryptedPaymentData:v.encPaymentData,encryptedKey:v.encKey}}}).then(function(g){return a.sendEvent(A._client,"visacheckout.tokenize.succeeded"),g.visaCheckoutCards[0]}).catch(function(g){return a.sendEvent(A._client,"visacheckout.tokenize.failed"),Promise.reject(new t({type:n.VISA_CHECKOUT_TOKENIZATION.type,code:n.VISA_CHECKOUT_TOKENIZATION.code,message:n.VISA_CHECKOUT_TOKENIZATION.message,details:{originalError:g}}))})},p.prototype.teardown=function(){return l(this,i(p.prototype)),Promise.resolve()},d.exports=o.wrapPrototype(p)},{"../lib/analytics":119,"../lib/braintree-error":124,"../lib/convert-methods-to-error":127,"../lib/json-clone":154,"../lib/methods":155,"./errors":225,"@braintree/wrap-promise":43}]},{},[117])(117)})});var Pe=ze(Oe()),te,ee,me,Ee,he;window.StoreConnect=window.StoreConnect||{};function be(F,S,V,e,d){te=F,ee=S,Ee=V,he=e,me=d,$().addEventListener("submit",Ge,!1)}function Ce(){return me?`${ee}Product${me}`:ee}function pe(){return document.getElementById(`${te}PaymentError${Ce()}`)}function $(){return document.getElementById(`${te}PaymentForm${Ce()}`)}function re(F){return document.getElementById(`${F}__payment__${ee}`)}function We(){return document.getElementById(`${te}PaymentButton${ee}`)}function _e(F){let S=We();if(he){he(S,F);return}S&&(F?(S.removeAttribute("data-loading"),S.disabled=!1,setTimeout(()=>{S.disabled=!1},500)):(S.setAttribute("data-loading",!0),S.disabled=!0))}function q(F,S=!0){let V=pe();V?(S&&(V.innerText=F),F&&V.classList.remove("sc-hide")):(console.warn(te?`Provider '${te}' does not have a #${te}PaymentError${ee} div container`:"Run init(providerName, providerId) before calling showError(error)"),console.error(F)),_e(!0)}function Re(){pe().classList.add("sc-hide")}function Ge(F){F.preventDefault(),je(()=>{Ee&&Ee($())})}function je(F){_e(!1),document.dispatchEvent(new CustomEvent("store-connect.payment-processing-start")),F()}function fe({payload:F,handleSuccess:S}){Re();let V=$();F.payment=F.payment||{},F.payment.provider_id=ee,F.payment.method=te;let e=document.getElementById(`_checkout_customer_notes_${ee}`);e&&(F.customer_notes=e.value);let d=document.getElementById(`_checkout_assisted_by_user_id_${ee}`);d&&(F.assisted_by_user_id=d.value);let m=new FormData(V);F.answers={},m.forEach((n,r)=>{let i=r.match(/answers\[(.*)\]\[answer\]/);i&&(F.answers[i[1]]={answer:n})});let t=V._method?V._method.value:V.getAttribute("method"),a=F.url?F.url:V.getAttribute("action");Pe.default.ajax({url:a,type:t||F.method,beforeSend(n,r){return n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),r.data=JSON.stringify(F),!0},success:function(n,r,i){n.sf?window.parent.postMessage({type:"payment_status",status:"success",message:n.paymentId},"*"):n.redirect_url?window.location=n.redirect_url:n.error_message?Qe(n.error_message):n.payment_response&&S&&S(n.payment_response.action)},error:function(n,r,i){if(i.status===0)return;let l=document.querySelector("[data-general-error-message]");l&&q(l.getAttribute("data-general-error-message"))}})}function Qe(F){F?q(F):Re(),_e(!0)}function ve(){let F=$();return F?F.dataset.callbackUrl:null}function Se(){let F=$();return F?F.dataset.apiMode:null}function De(){let F=$();return F?!!F.dataset.showWallets:!1}function we(){let F=$();return F?F.dataset.totalPayable:null}function Le(){let F=$();return F?F.dataset.currencyCode:null}var se=Ue();window.StoreConnect=window.StoreConnect||{};window.StoreConnect.Gateways=window.StoreConnect.Gateways||{};var Ae,ke;window.StoreConnect.Gateways.Braintree=async function({providerId:F,firstname:S,lastname:V,email:e,phone:d,billingStreet:m,billingCity:t,billingState:a,billingCountry:n,billingPostalCode:r}){be("Braintree",F,o),fetch(ve(),{method:"post",headers:{"content-type":"application/json"}}).then(p=>p.json()).then(p=>{if(p.message){q(p.message);return}i(p.token)});function i(p){se.client.create({authorization:p}).then(E=>{Ae=E,l()}).catch(E=>{q(E)})}function l(){se.hostedFields.create({client:Ae,styles:{input:{"font-size":"14px"},"input.invalid":{color:"red"},"input.valid":{color:"green"}},fields:{number:{container:re("card_number"),placeholder:re("card_number").getAttribute("data-placeholder")},cvv:{container:re("card_verification"),placeholder:re("card_verification").getAttribute("data-placeholder")},expirationDate:{container:re("card_expiry"),placeholder:re("card_expiry").getAttribute("data-placeholder")}}},(p,E)=>{if(p){q(p);return}ke=E})}function o(){ke.tokenize((p,E)=>{if(p){let A=pe().getAttribute("data-placeholder");q(A);return}if($().dataset.threeDSecure==="true")u();else{let A={payment_source:{tok_id:E.nonce,last_digits:E.details.lastFour,month:E.details.expirationMonth,year:E.details.expirationYear}};fe({payload:A})}})}function u(){se.threeDSecure.create({client:Ae,version:2},(p,E)=>{if(p){q(p);return}let v={amount:parsedAmount.toFixed(2),nonce:payload.nonce,bin:payload.details.bin,email:e,billingAddress:{givenName:S,surname:V,phoneNumber:d,streetAddress:m,locality:t,region:a,postalCode:r,countryCodeAlpha2:n},additionalInformation:{workPhoneNumber:d,shippingGivenName:S,shippingSurname:V,shippingAddress:{streetAddress:m,locality:t,region:a,postalCode:r,countryCodeAlpha2:n}},onLookupComplete:function(A,g){g()}};E.verifyCard(v,(A,g)=>{if(verifyCardErr){q(verifyCardErr);return}let s={payment:{provider_id:F,method:"Braintree"},payment_source:{tok_id:response.nonce,last_digits:response.details.lastFour,month:response.details.expirationMonth,year:response.details.expirationYear}};fe({threeDSecurePayload:s})})})}if(De()){let A=function(y){let h;y.preventDefault(),h=p.createPaymentDataRequest({transactionInfo:{currencyCode:Le(),totalPriceStatus:"FINAL",totalPrice:we()}}),v.loadPaymentData(h).then(function(T){return p.parseResponse(T)}).then(function(T){let O=T.nonce,_=T.details.lastFour;fe({payload:{checkout:{url:"/checkout/payment",payment_source:{tok_id:O,last_digits:_}}}})}).catch(function(T){q(T)})},p,E=Se()==="production"?"PRODUCTION":"TEST",v=new google.payments.api.PaymentsClient({environment:E}),g=$().dataset.merchantId,s=g&&g.length>0,c=document.getElementById(`BraintreeWalletsContainer${F}`);c&&s?fetch(ve(),{method:"post",headers:{"content-type":"application/json"}}).then(y=>y.json()).then(y=>{if(y.message){q(y.message);return}let h=y.token;se.client.create({authorization:h}).then(T=>se.googlePayment.create({client:T,googlePayVersion:2,googleMerchantId:g})).then(T=>(p=T,v.isReadyToPay({apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:T.createPaymentDataRequest().allowedPaymentMethods,existingPaymentMethodRequired:!0}))).then(T=>{if(T.result){let O=v.createButton({buttonColor:"default",buttonType:"long",onClick:A,id:`BraintreeGooglePayButton${F}`,allowedPaymentMethods:[]});c.appendChild(O)}}).catch(T=>{q(T)})}):c.remove()}};})();
