(()=>{var I=Object.create;var T=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var H=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var q=(h,e)=>()=>(e||h((e={exports:{}}).exports,e),e.exports);var B=(h,e,o,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of $(e))!F.call(h,n)&&n!==o&&T(h,n,{get:()=>e[n],enumerable:!(c=L(e,n))||c.enumerable});return h};var N=(h,e,o)=>(o=h!=null?I(H(h)):{},B(e||!h||!h.__esModule?T(o,"default",{value:h,enumerable:!0}):o,h));var R=q((_,E)=>{(function(){var h=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form:not([data-turbo=true])",formInputClickSelector:"form:not([data-turbo=true]) input[type=submit], form:not([data-turbo=true]) input[type=image], form:not([data-turbo=true]) button[type=submit], form:not([data-turbo=true]) button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(h);var e=h.Rails;(function(){(function(){var o;o=null,e.loadCSPNonce=function(){var c;return o=(c=document.querySelector("meta[name=csp-nonce]"))!=null?c.content:void 0},e.cspNonce=function(){return o??e.loadCSPNonce()}}).call(this),function(){var o,c;c=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,e.matches=function(n,i){return i.exclude!=null?c.call(n,i.selector)&&!c.call(n,i.exclude):c.call(n,i)},o="_ujsData",e.getData=function(n,i){var a;return(a=n[o])!=null?a[i]:void 0},e.setData=function(n,i,a){return n[o]==null&&(n[o]={}),n[o][i]=a},e.$=function(n){return Array.prototype.slice.call(document.querySelectorAll(n))}}.call(this),function(){var o,c,n;o=e.$,n=e.csrfToken=function(){var i;return i=document.querySelector("meta[name=csrf-token]"),i&&i.content},c=e.csrfParam=function(){var i;return i=document.querySelector("meta[name=csrf-param]"),i&&i.content},e.CSRFProtection=function(i){var a;if(a=n(),a!=null)return i.setRequestHeader("X-CSRF-Token",a)},e.refreshCSRFTokens=function(){var i,a;if(a=n(),i=c(),a!=null&&i!=null)return o('form input[name="'+i+'"]').forEach(function(b){return b.value=a})}}.call(this),function(){var o,c,n,i;n=e.matches,o=window.CustomEvent,typeof o!="function"&&(o=function(a,b){var d;return d=document.createEvent("CustomEvent"),d.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),d},o.prototype=window.Event.prototype,i=o.prototype.preventDefault,o.prototype.preventDefault=function(){var a;return a=i.call(this),this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),a}),c=e.fire=function(a,b,d){var t;return t=new o(b,{bubbles:!0,cancelable:!0,detail:d}),a.dispatchEvent(t),!t.defaultPrevented},e.stopEverything=function(a){return c(a.target,"ujs:everythingStopped"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()},e.delegate=function(a,b,d,t){return a.addEventListener(d,function(s){var u;for(u=s.target;!(!(u instanceof Element)||n(u,b));)u=u.parentNode;if(u instanceof Element&&t.call(u,s)===!1)return s.preventDefault(),s.stopPropagation()})}}.call(this),function(){var o,c,n,i,a,b,d;i=e.cspNonce,c=e.CSRFProtection,a=e.fire,o={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},e.ajax=function(t){var s;if(t=b(t),s=n(t,function(){var u,m;return m=d((u=s.response)!=null?u:s.responseText,s.getResponseHeader("Content-Type")),Math.floor(s.status/100)===2?typeof t.success=="function"&&t.success(m,s.statusText,s):typeof t.error=="function"&&t.error(m,s.statusText,s),typeof t.complete=="function"?t.complete(s,s.statusText):void 0}),t.beforeSend!=null&&!t.beforeSend(s,t))return!1;if(s.readyState===XMLHttpRequest.OPENED)return s.send(t.data)},b=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),t.type==="GET"&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),o[t.dataType]==null&&(t.dataType="*"),t.accept=o[t.dataType],t.dataType!=="*"&&(t.accept+=", */*; q=0.01"),t},n=function(t,s){var u;return u=new XMLHttpRequest,u.open(t.type,t.url,!0),u.setRequestHeader("Accept",t.accept),typeof t.data=="string"&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.crossDomain||(u.setRequestHeader("X-Requested-With","XMLHttpRequest"),c(u)),u.withCredentials=!!t.withCredentials,u.onreadystatechange=function(){if(u.readyState===XMLHttpRequest.DONE)return s(u)},u},d=function(t,s){var u,m;if(typeof t=="string"&&typeof s=="string"){if(s.match(/\bjson\b/))try{t=JSON.parse(t)}catch{}else if(s.match(/\b(?:java|ecma)script\b/))m=document.createElement("script"),m.setAttribute("nonce",i()),m.text=t,document.head.appendChild(m).parentNode.removeChild(m);else if(s.match(/\b(xml|html|svg)\b/)){u=new DOMParser,s=s.replace(/;.+/,"");try{t=u.parseFromString(t,s)}catch{}}}return t},e.href=function(t){return t.href},e.isCrossDomain=function(t){var s,u,m;u=document.createElement("a"),u.href=location.href,m=document.createElement("a");try{return m.href=t,!((!m.protocol||m.protocol===":")&&!m.host||u.protocol+"//"+u.host==m.protocol+"//"+m.host)}catch(p){return s=p,!0}}}.call(this),function(){var o,c;o=e.matches,c=function(n){return Array.prototype.slice.call(n)},e.serializeElement=function(n,i){var a,b;return a=[n],o(n,"form")&&(a=c(n.elements)),b=[],a.forEach(function(d){if(!(!d.name||d.disabled)&&!o(d,"fieldset[disabled] *")){if(o(d,"select"))return c(d.options).forEach(function(t){if(t.selected)return b.push({name:d.name,value:t.value})});if(d.checked||["radio","checkbox","submit"].indexOf(d.type)===-1)return b.push({name:d.name,value:d.value})}}),i&&b.push(i),b.map(function(d){return d.name!=null?encodeURIComponent(d.name)+"="+encodeURIComponent(d.value):d}).join("&")},e.formElements=function(n,i){return o(n,"form")?c(n.elements).filter(function(a){return o(a,i)}):c(n.querySelectorAll(i))}}.call(this),function(){var o,c,n;c=e.fire,n=e.stopEverything,e.handleConfirm=function(i){if(!o(this))return n(i)},e.confirm=function(i,a){return confirm(i)},o=function(i){var a,b,d;if(d=i.getAttribute("data-confirm"),!d)return!0;if(a=!1,c(i,"confirm")){try{a=e.confirm(d,i)}catch{}b=c(i,"confirm:complete",[a])}return a&&b}}.call(this),function(){var o,c,n,i,a,b,d,t,s,u,m,p;u=e.matches,t=e.getData,m=e.setData,p=e.stopEverything,d=e.formElements,e.handleDisabledElement=function(r){var l;if(l=this,l.disabled)return p(r)},e.enableElement=function(r){var l;if(r instanceof Event){if(s(r))return;l=r.target}else l=r;if(u(l,e.linkDisableSelector))return b(l);if(u(l,e.buttonDisableSelector)||u(l,e.formEnableSelector))return i(l);if(u(l,e.formSubmitSelector))return a(l)},e.disableElement=function(r){var l;if(l=r instanceof Event?r.target:r,u(l,e.linkDisableSelector))return n(l);if(u(l,e.buttonDisableSelector)||u(l,e.formDisableSelector))return o(l);if(u(l,e.formSubmitSelector))return c(l)},n=function(r){var l;if(!t(r,"ujs:disabled"))return l=r.getAttribute("data-disable-with"),l!=null&&(m(r,"ujs:enable-with",r.innerHTML),r.innerHTML=l),r.addEventListener("click",p),m(r,"ujs:disabled",!0)},b=function(r){var l;return l=t(r,"ujs:enable-with"),l!=null&&(r.innerHTML=l,m(r,"ujs:enable-with",null)),r.removeEventListener("click",p),m(r,"ujs:disabled",null)},c=function(r){return d(r,e.formDisableSelector).forEach(o)},o=function(r){var l;if(!t(r,"ujs:disabled"))return l=r.getAttribute("data-disable-with"),l!=null&&(u(r,"button")?(m(r,"ujs:enable-with",r.innerHTML),r.innerHTML=l):(m(r,"ujs:enable-with",r.value),r.value=l)),r.disabled=!0,m(r,"ujs:disabled",!0)},a=function(r){return d(r,e.formEnableSelector).forEach(i)},i=function(r){var l;return l=t(r,"ujs:enable-with"),l!=null&&(u(r,"button")?r.innerHTML=l:r.value=l,m(r,"ujs:enable-with",null)),r.disabled=!1,m(r,"ujs:disabled",null)},s=function(r){var l,f;return f=(l=r.detail)!=null?l[0]:void 0,f?.getResponseHeader("X-Xhr-Redirect")!=null}}.call(this),function(){var o;o=e.stopEverything,e.handleMethod=function(c){var n,i,a,b,d,t,s;if(t=this,s=t.getAttribute("data-method"),!!s)return d=e.href(t),i=e.csrfToken(),n=e.csrfParam(),a=document.createElement("form"),b="<input name='_method' value='"+s+"' type='hidden' />",n!=null&&i!=null&&!e.isCrossDomain(d)&&(b+="<input name='"+n+"' value='"+i+"' type='hidden' />"),b+='<input type="submit" />',a.method="post",a.action=d,a.target=t.target,a.innerHTML=b,a.style.display="none",document.body.appendChild(a),a.querySelector('[type="submit"]').click(),o(c)}}.call(this),function(){var o,c,n,i,a,b,d,t,s,u=[].slice;b=e.matches,n=e.getData,t=e.setData,c=e.fire,s=e.stopEverything,o=e.ajax,i=e.isCrossDomain,d=e.serializeElement,a=function(m){var p;return p=m.getAttribute("data-remote"),p!=null&&p!=="false"},e.handleRemote=function(m){var p,r,l,f,v,y,S;return f=this,a(f)?c(f,"ajax:before")?(S=f.getAttribute("data-with-credentials"),l=f.getAttribute("data-type")||"script",b(f,e.formSubmitSelector)?(p=n(f,"ujs:submit-button"),v=n(f,"ujs:submit-button-formmethod")||f.method,y=n(f,"ujs:submit-button-formaction")||f.getAttribute("action")||location.href,v.toUpperCase()==="GET"&&(y=y.replace(/\?.*$/,"")),f.enctype==="multipart/form-data"?(r=new FormData(f),p!=null&&r.append(p.name,p.value)):r=d(f,p),t(f,"ujs:submit-button",null),t(f,"ujs:submit-button-formmethod",null),t(f,"ujs:submit-button-formaction",null)):b(f,e.buttonClickSelector)||b(f,e.inputChangeSelector)?(v=f.getAttribute("data-method"),y=f.getAttribute("data-url"),r=d(f,f.getAttribute("data-params"))):(v=f.getAttribute("data-method"),y=e.href(f),r=f.getAttribute("data-params")),o({type:v||"GET",url:y,data:r,dataType:l,beforeSend:function(g,M){return c(f,"ajax:beforeSend",[g,M])?c(f,"ajax:send",[g]):(c(f,"ajax:stopped"),!1)},success:function(){var g;return g=1<=arguments.length?u.call(arguments,0):[],c(f,"ajax:success",g)},error:function(){var g;return g=1<=arguments.length?u.call(arguments,0):[],c(f,"ajax:error",g)},complete:function(){var g;return g=1<=arguments.length?u.call(arguments,0):[],c(f,"ajax:complete",g)},crossDomain:i(y),withCredentials:S!=null&&S!=="false"}),s(m)):(c(f,"ajax:stopped"),!1):!0},e.formSubmitButtonClick=function(m){var p,r;if(p=this,r=p.form,!!r)return p.name&&t(r,"ujs:submit-button",{name:p.name,value:p.value}),t(r,"ujs:formnovalidate-button",p.formNoValidate),t(r,"ujs:submit-button-formaction",p.getAttribute("formaction")),t(r,"ujs:submit-button-formmethod",p.getAttribute("formmethod"))},e.preventInsignificantClick=function(m){var p,r,l,f,v,y;if(l=this,v=(l.getAttribute("data-method")||"GET").toUpperCase(),p=l.getAttribute("data-params"),f=m.metaKey||m.ctrlKey,r=f&&v==="GET"&&!p,y=m.button!=null&&m.button!==0,y||r)return m.stopImmediatePropagation()}}.call(this),function(){var o,c,n,i,a,b,d,t,s,u,m,p,r,l,f;if(b=e.fire,n=e.delegate,t=e.getData,o=e.$,f=e.refreshCSRFTokens,c=e.CSRFProtection,r=e.loadCSPNonce,a=e.enableElement,i=e.disableElement,u=e.handleDisabledElement,s=e.handleConfirm,l=e.preventInsignificantClick,p=e.handleRemote,d=e.formSubmitButtonClick,m=e.handleMethod,typeof jQuery<"u"&&jQuery!==null&&jQuery.ajax!=null){if(jQuery.rails)throw new Error("If you load both jquery_ujs and rails-ujs, use rails-ujs only.");jQuery.rails=e,jQuery.ajaxPrefilter(function(v,y,S){if(!v.crossDomain)return c(S)})}e.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return o(e.formEnableSelector).forEach(function(v){if(t(v,"ujs:disabled"))return a(v)}),o(e.linkDisableSelector).forEach(function(v){if(t(v,"ujs:disabled"))return a(v)})}),n(document,e.linkDisableSelector,"ajax:complete",a),n(document,e.linkDisableSelector,"ajax:stopped",a),n(document,e.buttonDisableSelector,"ajax:complete",a),n(document,e.buttonDisableSelector,"ajax:stopped",a),n(document,e.linkClickSelector,"click",l),n(document,e.linkClickSelector,"click",u),n(document,e.linkClickSelector,"click",s),n(document,e.linkClickSelector,"click",i),n(document,e.linkClickSelector,"click",p),n(document,e.linkClickSelector,"click",m),n(document,e.buttonClickSelector,"click",l),n(document,e.buttonClickSelector,"click",u),n(document,e.buttonClickSelector,"click",s),n(document,e.buttonClickSelector,"click",i),n(document,e.buttonClickSelector,"click",p),n(document,e.inputChangeSelector,"change",u),n(document,e.inputChangeSelector,"change",s),n(document,e.inputChangeSelector,"change",p),n(document,e.formSubmitSelector,"submit",u),n(document,e.formSubmitSelector,"submit",s),n(document,e.formSubmitSelector,"submit",p),n(document,e.formSubmitSelector,"submit",function(v){return setTimeout(function(){return i(v)},13)}),n(document,e.formSubmitSelector,"ajax:send",i),n(document,e.formSubmitSelector,"ajax:complete",a),n(document,e.formInputClickSelector,"click",l),n(document,e.formInputClickSelector,"click",u),n(document,e.formInputClickSelector,"click",s),n(document,e.formInputClickSelector,"click",d),document.addEventListener("DOMContentLoaded",f),document.addEventListener("DOMContentLoaded",r),window._rails_loaded=!0},window.Rails===e&&b(document,"rails:attachBindings")&&e.start()}.call(this)}).call(this),typeof E=="object"&&E.exports?E.exports=e:typeof define=="function"&&define.amd&&define(e)}).call(_)});var O=N(R()),D,C,w,x,j;window.StoreConnect=window.StoreConnect||{};function P(h,e,o,c,n){D=h,C=e,x=o,j=c,w=n,k().addEventListener("submit",Q,!1)}function U(){return w?`${C}Product${w}`:C}function k(){return document.getElementById(`${D}PaymentForm${U()}`)}function X(){return document.getElementById(`${D}PaymentButton${C}`)}function G(h){let e=X();if(j){j(e,h);return}e&&(h?(e.removeAttribute("data-loading"),e.disabled=!1,setTimeout(()=>{e.disabled=!1},500)):(e.setAttribute("data-loading",!0),e.disabled=!0))}function Q(h){h.preventDefault(),W(()=>{x&&x(k())})}function W(h){G(!1),document.dispatchEvent(new CustomEvent("store-connect.payment-processing-start")),h()}function A(){let h=k();return h?h.dataset.callbackUrl:null}window.StoreConnect=window.StoreConnect||{};window.StoreConnect.Gateways=window.StoreConnect.Gateways||{};window.StoreConnect.Gateways.Windcave=async function({providerId:h}){P("Windcave",h,e);function e(){fetch(A(),{method:"post",headers:{"content-type":"application/json"}}).then(function(o){return o.json()}).then(function(o){location.href=o.form_url})}};})();
